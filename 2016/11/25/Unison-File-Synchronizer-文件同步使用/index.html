<!-- build time:Sun Mar 18 2018 11:23:02 GMT+0800 (中国标准时间) --><!DOCTYPE html><html lang="zh-Hans"><head><!--[if lt IE 9]>
        <style>body {display: none; background: none !important} </style>
        <meta http-equiv="Refresh" Content="0; url=//outdatedbrowser.com/" />
    <![endif]--><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><meta name="format-detection" content="telephone=no"><meta name="author" content="侯志伟 - houzhiwei"><meta name="description" content="Unison 是一款由 Benjamin Pierce 领导开发的 Unix/Linux 和 Windows上的免费文件同步工具. 本文翻译/介绍了跨平台文件同步软件 Unison File Synchronizer 的使用。"><meta property="og:type" content="article"><meta property="og:title" content="Unison File Synchronizer 文件同步使用"><meta property="og:url" content="houzw.github.io.git/2016/11/25/Unison-File-Synchronizer-文件同步使用/index.html"><meta property="og:site_name" content="V make the world smart"><meta property="og:description" content="Unison 是一款由 Benjamin Pierce 领导开发的 Unix/Linux 和 Windows上的免费文件同步工具. 本文翻译/介绍了跨平台文件同步软件 Unison File Synchronizer 的使用。"><meta property="og:updated_time" content="2016-12-11T12:26:31.998Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Unison File Synchronizer 文件同步使用"><meta name="twitter:description" content="Unison 是一款由 Benjamin Pierce 领导开发的 Unix/Linux 和 Windows上的免费文件同步工具. 本文翻译/介绍了跨平台文件同步软件 Unison File Synchronizer 的使用。"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="alternate" href="/atom.xml" title="V make the world smart" type="application/atom+xml"><link rel="shortcut icon" href="/favicon.ico"><link href="//cdn.bootcss.com/animate.css/3.5.1/animate.min.css" rel="stylesheet"><link href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" rel="stylesheet"><script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script><link href="//cdn.bootcss.com/pace/1.0.2/themes/blue/pace-theme-minimal.css" rel="stylesheet"><link rel="stylesheet" href="/css/style.css"><link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet"><title>Unison File Synchronizer 文件同步使用 | V make the world smart</title><script src="//cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script><script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script><script>var yiliaConfig={fancybox:!0,animate:!0,isHome:!1,isPost:!0,isArchive:!1,isTag:!1,isCategory:!1,fancybox_js:"//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js",scrollreveal:"//cdn.bootcss.com/scrollReveal.js/3.1.4/scrollreveal.min.js",search:!0}</script><script>yiliaConfig.jquery_ui=[!0,"//cdn.bootcss.com/jqueryui/1.10.4/jquery-ui.min.js","//cdn.bootcss.com/jqueryui/1.10.4/css/jquery-ui.min.css"]</script><script>yiliaConfig.rootUrl="/"</script></head></html><body><div id="container"><div class="left-col"><div class="overlay"></div><div class="intrude-less"><header id="header" class="inner"><a href="/" class="profilepic"><img src="http://ofcj2lgtd.bkt.clouddn.com/avatar.jpg" class="animated zoomIn"></a><hgroup><h1 class="header-author"><a href="/">侯志伟 - houzhiwei</a></h1></hgroup><p class="header-subtitle">houzhiwei&#39;s blogs</p><form id="search-form"><input type="text" id="local-search-input" name="q" placeholder="search..." class="search form-control" autocomplete="off" autocorrect="off" searchonload="false"> <i class="fa fa-times" onclick="resetSearch()"></i></form><div id="local-search-result"></div><p class="no-result">No results found <i class="fa fa-spinner fa-pulse"></i></p><div id="switch-btn" class="switch-btn"><div class="icon"><div class="icon-ctn"><div class="icon-wrap icon-house" data-idx="0"><div class="birdhouse"></div><div class="birdhouse_holes"></div></div><div class="icon-wrap icon-ribbon hide" data-idx="1"><div class="ribbon"></div></div><div class="icon-wrap icon-link hide" data-idx="2"><div class="loopback_l"></div><div class="loopback_r"></div></div><div class="icon-wrap icon-me hide" data-idx="3"><div class="user"></div><div class="shoulder"></div></div></div></div><div class="tips-box hide"><div class="tips-arrow"></div><ul class="tips-inner"><li>菜单</li><li>标签</li><li>友情链接</li><li>关于我</li></ul></div></div><div id="switch-area" class="switch-area"><div class="switch-wrap"><section class="switch-part switch-part1"><nav class="header-menu"><ul><li><a href="/">主页</a></li><li><a href="/archives/">所有文章</a></li><li><a href="/tags/">标签云</a></li><li><a href="/about/">关于我</a></li></ul></nav><nav class="header-nav"><ul class="social"><a class="fa Email" href="mailto:&#104;&#111;&#117;&#122;&#119;&#64;&#108;&#114;&#101;&#105;&#115;&#46;&#97;&#99;&#46;&#99;&#110;" title="Email"></a> <a class="fa 新浪微博" href="http://weibo.com/singland" title="新浪微博"></a> <a class="fa GitHub" href="https://github.com/houzw" title="GitHub"></a> <a class="fa RSS" href="/atom.xml" title="RSS"></a> <a class="fa 博客园" href="http://www.cnblogs.com/yes-V-can/" title="博客园"></a></ul></nav></section><section class="switch-part switch-part2"><div class="widget tagcloud" id="js-tagcloud"><ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/3S/">3S</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ArcGIS/">ArcGIS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CXF/">CXF</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CentOS7/">CentOS7</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Crypto-js/">Crypto-js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DEM/">DEM</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ESDL/">ESDL</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/FreeFileSync/">FreeFileSync</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GIS/">GIS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GNSS/">GNSS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GRASS-GIS/">GRASS-GIS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Header-First/">Header First</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/">Linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MapFile/">MapFile</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MapServer/">MapServer</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Maven/">Maven</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Ontology/">Ontology</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OpenLayers3/">OpenLayers3</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RS/">RS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SOAP/">SOAP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SSH/">SSH</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Shiro学习/">Shiro学习</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spring-MVC/">Spring MVC</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Unison/">Unison</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/VNC/">VNC</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/WPS/">WPS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/WebService/">WebService</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Webpack/">Webpack</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Windows/">Windows</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cxf/">cxf</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cygwin/">cygwin</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gdal/">gdal</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gis/">gis</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/http/">http</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/schema/">schema</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/spring/">spring</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/taudem5/">taudem5</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/webpack/">webpack</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/分类/">分类</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/前端/">前端</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/加解密/">加解密</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/同步/">同步</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/地理信息系统/">地理信息系统</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/地理空间/">地理空间</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/基本命令/">基本命令</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/安全/">安全</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/开发/">开发</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/开源/">开源</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/插件/">插件</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/教程/">教程</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/本体/">本体</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/河网/">河网</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/目录结构/">目录结构</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/空间关系/">空间关系</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/空间数据/">空间数据</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/编辑器/">编辑器</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/规范/">规范</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/设计模式/">设计模式</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/跨平台/">跨平台</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/配置/">配置</a></li></ul></div></section><section class="switch-part switch-part3"><div id="js-friends"><a class="main-nav-link switch-friends-link" href="https://hexo.io">Hexo</a> <a class="main-nav-link switch-friends-link" href="https://pages.github.com/">GitHub</a> <a class="main-nav-link switch-friends-link" href="http://moxfive.xyz/">MOxFIVE</a></div></section><section class="switch-part switch-part4"><div id="js-aboutme">热爱旅行但很宅，热爱技术但很菜，身为GISer一直Coder，想要改变世界，先得改变自己</div></section></div></div></header></div></div><div class="mid-col"><nav id="mobile-nav"><div class="overlay"><div class="slider-trigger"></div><h1 class="header-author js-mobile-header hide"><a href="/" title="回到主页">侯志伟 - houzhiwei</a></h1></div><div class="intrude-less"><header id="header" class="inner"><a href="/" class="profilepic"><img src="http://ofcj2lgtd.bkt.clouddn.com/avatar.jpg" class="animated zoomIn"></a><hgroup><h1 class="header-author"><a href="/" title="回到主页">侯志伟 - houzhiwei</a></h1></hgroup><p class="header-subtitle">houzhiwei&#39;s blogs</p><nav class="header-menu"><ul><li><a href="/">主页</a></li><li><a href="/archives/">所有文章</a></li><li><a href="/tags/">标签云</a></li><li><a href="/about/">关于我</a></li><div class="clearfix"></div></ul></nav><nav class="header-nav"><ul class="social"><a class="fa Email" target="_blank" href="mailto:&#104;&#111;&#117;&#122;&#119;&#64;&#108;&#114;&#101;&#105;&#115;&#46;&#97;&#99;&#46;&#99;&#110;" title="Email"></a> <a class="fa 新浪微博" target="_blank" href="http://weibo.com/singland" title="新浪微博"></a> <a class="fa GitHub" target="_blank" href="https://github.com/houzw" title="GitHub"></a> <a class="fa RSS" target="_blank" href="/atom.xml" title="RSS"></a> <a class="fa 博客园" target="_blank" href="http://www.cnblogs.com/yes-V-can/" title="博客园"></a></ul></nav></header></div><link class="menu-list" tags="标签" friends="友情链接" about="关于我"></nav><div class="body-wrap"><article id="post-Unison-File-Synchronizer-文件同步使用" class="article article-type-post" itemscope itemprop="blogPost"><div class="article-meta"><a href="/2016/11/25/Unison-File-Synchronizer-文件同步使用/" class="article-date"><time datetime="2016-11-25T15:21:02.000Z" itemprop="datePublished">2016-11-25</time></a></div><div class="article-inner"><input type="hidden" class="isFancy"><header class="article-header"><h1 class="article-title" itemprop="name">Unison File Synchronizer 文件同步使用</h1></header><div class="article-info article-info-post"><div class="article-category tagcloud"><a class="article-category-link" href="/categories/运维-文件同步/">运维 - 文件同步</a></div><div class="article-tag tagcloud"><ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Unison/">Unison</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/同步/">同步</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/跨平台/">跨平台</a></li></ul></div><div class="clearfix"></div></div><div class="article-entry" itemprop="articleBody"><h1 id="Unison-File-Synchronizer-文件同步使用"><a href="#Unison-File-Synchronizer-文件同步使用" class="headerlink" title="Unison File Synchronizer 文件同步使用"></a>Unison File Synchronizer 文件同步使用</h1><blockquote><p><a href="https://github.com/bcpierce00/unison" target="_blank" rel="external">Unison File Synchronizer Github 主页</a></p><p>基于 <a href="http://www.cis.upenn.edu/~bcpierce/unison/download/releases/stable/unison-manual.html" target="_blank" rel="external">Unison File Synchronizer User Manual and Reference Guide</a> 翻译、补充</p><p><a href="http://www.gdsw.at/utils/archivers/unison/beta-test/unison-2.9.20/unison-manual.pdf" target="_blank" rel="external">unison-manual.pdf</a></p><p>其他类似软件工具还有 <a href="http://www.freefilesync.org/manual.php" target="_blank" rel="external">FreeFileSync</a> 及 <a href="https://syncthing.net/" target="_blank" rel="external">Syncthing</a></p></blockquote><h2 id="0-概览"><a href="#0-概览" class="headerlink" title="0. 概览"></a>0. 概览</h2><p>Unison File Synchronizer 是一款由<a href="http://www.cis.upenn.edu/~bcpierce/" target="_blank" rel="external">Benjamin Pierce</a> 领导开发的Unix和Windows上的免费文件同步工具. 它允许在不同的主机上（或同一主机的不同磁盘）存放两份文件或目录的集合的副本, 分别修改然后通过将它们的变化传送到每个其他的副本上来更新。</p><p>Unison 拥有与其他工具，如配置管理包 (<a href="http://www.cyclic.com/" target="_blank" rel="external">CVS</a>, <a href="http://www.xcf.berkeley.edu/~jmacd/prcs.html" target="_blank" rel="external">PRCS</a>, etc.), 分布式文件系统 (<a href="http://www.coda.cs.cmu.edu/" target="_blank" rel="external">Coda</a>, etc.), 单向镜像工具 (<a href="http://samba.anu.edu.au/rsync/" target="_blank" rel="external">rsync</a>, etc.)及其他同步工具 (<a href="http://www.pumatech.com/" target="_blank" rel="external">Intellisync</a>, <a href="http://www.merl.com/reports/TR99-14/" target="_blank" rel="external">Reconcile</a>, etc)类似的功能特性. 但是，它也有它自己的不同之处:</p><ul><li>Unison 可以在 Windows (95, 98, NT, 2k, and XP) 和 Unix (OSX, Solaris, Linux, etc.) 系统上运行. 此外，Unison 可以跨平台工作，例如，允许你将Windows 手提电脑与 Unix 服务器同步.</li><li>与分布式文件系统不同的是, Unison 是一个用户级别的程序（<code>user-level program</code>）: 不需要修改内核或在每个主机上拥有超级用户权限.</li><li>不同于普通的镜像或备份工具， Unison 可以处理分布式目录结构副本的同时更新（<code>updates to both replicas</code>）. 不冲突的更新可以自动传输，冲突的更新会被检测到并展示出来.</li><li>Unison 可以在任意一组联网的及其间工作，直接使用socket连接或加密的ssh隧道连接通信。它会注意到网络带宽，即使是如PPP连接这样的低速连接也可以很好地工作。大文件的小更新传输使用类似<code>rsync</code>的压缩协议进行优化。</li><li>Unison 具备失败复原功能（ resilient to failure）. 它会随时将副本和它自己的私有结构保持在敏感状态（sensible state）, 即使是不正常的停止或通信中断.</li><li>Unison 是免费的; 所有的代码在 GNU Public License下公开.</li></ul><h2 id="1-下载-Unison"><a href="#1-下载-Unison" class="headerlink" title="1. 下载 Unison"></a>1. 下载 Unison</h2><blockquote><p>下载地址: <a href="http://www.cis.upenn.edu/~bcpierce/unison" target="_blank" rel="external">http://www.cis.upenn.edu/~bcpierce/unison</a>.</p><p>二进制包：<a href="http://unison-binaries.inria.fr/" target="_blank" rel="external">Unison Binaries</a> 或 <a href="https://github.com/bcpierce00/unison/releases" target="_blank" rel="external">https://github.com/bcpierce00/unison/releases</a></p></blockquote><p>如果对于客户端机器架构有预编译的二进制版Unison, 只需要下载然后将它放在你能找到的地方(若你是从命令行来启动)或放在桌面(若你是采用双击方式启动).</p><p>图形版本的可执行文件 (名称中有 <code>gtkui</code>或<code>gtk</code> ) 实际提供了两个界面: 默认显示图形界面，文字界面可以通过命令行中加 <code>-ui text</code> 来选择. <code>textui</code> 可执行文件仅仅提供了文字界面. 若没有适合你系统架构的编译好的可执行文件，你需要自己编译。 查看<a href="http://www.cis.upenn.edu/~bcpierce/unison/download/releases/stable/unison-manual.html#building" target="_blank" rel="external">Building Unison</a>部分。也有一些不由官方维护，由其他人提供的其他平台的编译版本，查看<a href="http://www.cis.upenn.edu/~bcpierce/unison/download.html" target="_blank" rel="external">Contributed Ports</a> 。</p><blockquote><p>注意，如果没有安装GTK运行环境，会报错：“无法启动此程序，因为计算机中丢失<code>libgdk-win32-2.0-0.dll</code>”等问题。前往Github项目<a href="https://github.com/tschoonj/GTK-for-Windows-Runtime-Environment-Installer" target="_blank" rel="external">GTK-for-Windows-Runtime-Environment-Installer</a>，下载 <a href="http://lvserver.ugent.be/gtk-win64/gtk2-runtime/gtk2-runtime-2.24.30-2016-04-09-ts-win64.exe" target="_blank" rel="external">gtk2-runtime-2.24.30-2016-04-09-ts-win64.exe</a> 安装. 将其lib目录下的<code>libgobject-2.0-0.dll、libgmodule-2.0-0.dll、libglib-2.0-0.dll、libgdk-win32-2.0-0.dll、libgdk_pixbuf-2.0-0.dll</code> 拷贝到unison-gtk所在目录。</p><p>可能报错：<strong>应用程序无法正常启动0xc000007b</strong>（我的没有解决，只能运行text版本的Unison）。</p></blockquote><p>Unison 可在不同的模式下使用: 单一机器的不同目录，通过socket连接的远程机器, 或使用ssh进行验证与安全传输的远程机器. 最后一种方式需要你安装ssh 。查看 <a href="http://www.cis.upenn.edu/~bcpierce/unison/download/releases/stable/unison-manual.html#ssh" target="_blank" rel="external">installing Ssh</a>.</p><h2 id="2-安装"><a href="#2-安装" class="headerlink" title="2. 安装"></a>2. 安装</h2><p>Unison 可以在两种界面下使用:</p><ul><li>简单的文字界面, 适用于终端 (及从脚本运行),</li><li>图形界面,基于 Gtk2 (Linux/Windows) 或原生界面框架 (OSX).</li></ul><p>你需要在每台你想要同步的机器上安装Unison . 但是, 你只需要在你真正需要展示界面的机器上(客户端) 安装图形界面版本(如果你确实需要一个GUI). 其他同步的机器可以只安装文字版本.</p><h4 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h4><blockquote><p><a href="https://sathya.de/blog/how-tos/install-unison-client-on-windows/" target="_blank" rel="external">Install Unison client on Windows</a></p><p>需要安装SSH（<a href="http://cygwin.com/" target="_blank" rel="external">http://cygwin.com/</a> ）与GTK+运行环境（ <a href="http://sourceforge.net/projects/pidgin/files/GTK%2B%20for%20Windows/）" target="_blank" rel="external">http://sourceforge.net/projects/pidgin/files/GTK%2B%20for%20Windows/）</a></p></blockquote><p>将安装文件目录，如<code>C:\Unison-Windows-2.48.4</code>添加到环境变量，然后将<code>unison 2.48.4 text.exe</code> （gtk不好用）改名为<code>unison.exe</code> ，以后使用<code>unison [options]</code> 或 <code>unison root1 root2 [options]</code> 或 <code>unison profilename [options]</code> 即可（若改名为<code>unison-text.exe</code>，则需要这样用：<code>unison-text unison [options]</code>）。</p><p>检查你下载的文件是否是真正的可执行文件，可以点击启动或在命令行中输入<code>unison -version</code>.</p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line"># 未添加环境变量、为改名时</div><div class="line">C:\Unison-Windows-2.48.4&gt;&quot;unison 2.48.4 text.exe&quot; unison -version</div><div class="line">unison version 2.48.4</div><div class="line"># 添加环境变量之后</div><div class="line">D:\Program Files\ConsoleZ&gt;unison -version</div><div class="line">unison version 2.48.4</div></pre></td></tr></table></figure><h4 id="Linux"><a href="#Linux" class="headerlink" title="Linux"></a>Linux</h4><p>假设下载的是 <a href="https://github.com/bcpierce00/unison/releases/download/2.48.4/unison-2.48.4-linux-x86_64-text-static.tar.gz" target="_blank" rel="external"><strong>unison-2.48.4-linux-x86_64-text-static.tar.gz</strong></a> ，先解压 <code>tar zxf unison-2.48.4-linux-x86_64-text-static.tar.gz</code>, 然后剪切到<code>/usr/local/bin</code>并改名 <code>sudo mv unison-2.48.4-linux-x86_64-text-static /usr/local/bin/unison</code> , 然后运行并查看版本</p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">[houzw@localhost bin]$ unison -version</div><div class="line">unison version 2.48.4</div></pre></td></tr></table></figure><h3 id="升级"><a href="#升级" class="headerlink" title="升级"></a>升级</h3><p>升级之前，最好使用旧版本最后运行同步一次。</p><h4 id="Building-Unison-from-Scratch"><a href="#Building-Unison-from-Scratch" class="headerlink" title="Building Unison from Scratch"></a>Building Unison from Scratch</h4><p>如果没有预编译版，你需要自行编译程序。</p><p>Unix系统下依赖 OCaml (version 3.11.2 or later)、GNU make （一般默认已安装）</p><h2 id="3-使用教程"><a href="#3-使用教程" class="headerlink" title="3. 使用教程"></a>3. 使用教程</h2><p>若使用命令行启动，输入<code>unison</code>就可以启动默认的界面。如果默认是图形界面，在命令行参数中加<code>-ui text</code>可以启用文字界面。其他命令行参数在两种界面模式下都是一样的。</p><p>Unison可以在单机时同步不同目录，或同步网络连接的不同机器（所有机器都需要安装unison，区别是哪一台负责显示用户界面）。单机的称此机器为客户端（client）；两台机器时，一台是客户端，一台是服务端（server）。</p><h3 id="3-1-本地（单机）使用"><a href="#3-1-本地（单机）使用" class="headerlink" title="3.1. 本地（单机）使用"></a>3.1. 本地（单机）使用</h3><h3 id="3-2-远程使用"><a href="#3-2-远程使用" class="headerlink" title="3.2. 远程使用"></a>3.2. 远程使用</h3><p>服务端（server）的机器安装哪一种界面模式的unison都可以，因为服务端机器不需要显示任何用户界面。</p><p>需要注意的是，服务端和客户端安装的unison<strong>版本最好是一致的</strong>（界面模式，即图形或文字，可以不一样）。</p><p>Unison 提供了两种不同的客户端与服务端通讯方法:</p><ul><li><strong>远程 shell方法</strong>（<em>Remote shell method</em> ）: 为了使用此方法，你必须有某种在客户端命令行里面远程启用服务端命令的方法, 例如使用 <code>ssh</code>工具等。此方法非常方便，因为它不需要人工去服务端机器上启动 “unison server”进程。同时也是非常安全的，尤其是你使用 <code>ssh</code>时.</li><li><strong>Socket方法 </strong>（<em>Socket method</em>）: 此方法只需要你能在服务端和客户端机器之间发送/接收TCP数据包. 严格的防火墙规则可能阻止它，但一旦允许，将可以在任何地点工作.</li></ul><h4 id="Remote-Shell-Method"><a href="#Remote-Shell-Method" class="headerlink" title="Remote Shell Method"></a>Remote Shell Method</h4><p>Unix 上标准的远程 Shell 工具是 <code>ssh</code>. Ssh可以从 <a href="http://www.openssh.org/" target="_blank" rel="external">http://www.openssh.org</a> 获取. <a href="http://www.cis.upenn.edu/~bcpierce/unison/download/releases/stable/unison-manual.html#ssh-win" target="_blank" rel="external">A.2</a> 部分介绍了 Windows 版本的安装.</p><blockquote><p>Windows下可选择的 SSH 连接程序有 <em>MobaXterm、XShell ( xManager )、PuTTY</em> 等等；Unix/Linux 默认都安装了SSH</p></blockquote><p>首先，测试我们是否可以在服务端机器上启用Unison,输入<code>ssh remotehostname unison -version</code> 将会打印出和在本地客户端使用<code>unison -version</code> 命令相同的版本信息. 如果远程执行失败，有可能是ssh连接失败，或者是服务端执行命令的文件目录下没有 <code>unison</code> 可执行文件(如 “command not found”).</p><p>在客户端机器的主目录（默认win下是<code>C:\Users\username\.unison</code>，Unix是<code>$HOME/.unison</code>）下创建一个 <code>a.tmp</code> 目录.</p><p>测试本地unison客户端可以启动并且能连接到远程服务器. 输入</p><p><code>unison -testServer a.tmp ssh://*remotehostname*/a.tmp</code> 注意<code>a.temp</code>前面是一个<code>/</code>， 而<code>ssh:</code> 后面是两个<code>//</code>.</p><blockquote><p>-testserver 意指连接到服务器之后立即断开 exit immediately after the connection to the server</p></blockquote><p>现在转到你的主目录下，输入:<code>unison a.tmp ssh://remotehostname/a.tmp</code>。 测试结果应该是，你的整个<code>a.tmp</code>目录从你的客户端机器上传输到了服务端机器上。</p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">D:\Program Files\ConsoleZ&gt;unison -testServer a.temp ssh://houzw@centos/a.temp</div><div class="line">Contacting server...</div><div class="line">Connected [//houzhiwei-PC/D:/Program Files/ConsoleZ/a.temp -&gt; //localhost.localdomain//home/houzw/a.temp]</div></pre></td></tr></table></figure><p>结束第一次同步之后，修改一少部分文件，然后尝试再次同步。结果应该是类似的。</p><p>若你在服务端的用户名与客户端的用户名不一样, 你需要在命令行中指明:<code>unison a.tmp ssh://username@remotehostname/a.tmp</code><br><em>注意 :</em></p><ul><li>如果你想将 <code>a.tmp</code> 放在其他地方而不是你在远程主机上的主目录下，你可以在<code>remotehostname</code>和路径开始的地方添加额外的斜杠以给定一个绝对地址： <code>unison a.tmp ssh://remotehostname//absolute/path/to/a.tmp</code></li><li>你可以通过使用命令行参数 <code>-servercmd /full/path/name/of/unison</code> 或添加 <code>servercmd=/full/path/name/of/unison</code> 到 profile (<a href="http://www.cis.upenn.edu/~bcpierce/unison/download/releases/stable/unison-manual.html#profile" target="_blank" rel="external">Profile</a> ) 来指定Unison可执行文件的明确路径 . 类似的，你可以使用 <code>-sshcmd</code>选项来指明shh程序的路径. 额外的参数可以通过设置 <code>-sshargs</code> 来传给 <code>ssh</code> .</li></ul><h4 id="Socket-Method"><a href="#Socket-Method" class="headerlink" title="Socket Method"></a>Socket Method</h4><blockquote><p><strong>Warning:</strong> 此方法不安全。 此方法只提供给专家用户来处理特定需求 ; 其他所有人都应该使用 <code>ssh</code> 方法.</p></blockquote><p>要通过socket 连接来使用Unison, 你必须在服务端启动一个 Unison 后台守护（daemon）进程. 此进程持续运行，等待客户端Unison的socket连接，并处理它们的请求.</p><p>要启动一个后台进程，在服务端输入<code>unison -socket NNNN</code>, NNNN 是守护进程需要监听的客户端连接 socket 值。 (NNNN可以是一个不被其他应用使用的很大的数 ; 若 NNNN 已经在使用, Unison 会报错误信息并退出.) 注意，客户端指定的路径会被解析成相对于你启动服务进程所在目录的相对路径。这一点与使用ssh不同, ssh中是相对于服务器主目录的.</p><p>在客户端机器的主目录下新建一个测试目录<code>a.tmp</code>. 输入:<code>unison a.tmp socket://*remotehostname*:NNNN/a.tmp</code> 结果应该是客户端上的整个<code>a.tmp</code>目录被传输到服务器上去了 (<code>a.tmp</code> 将会被创建在启动服务的目录下). 其他操作参照ssh连接下操作。</p><p>由于 socket 方法使用人数较少, 因此其功能也有限。例如，服务器只能一次处理一个客户端的连接.</p><h3 id="3-3-对所有文件使用Unison-Using-Unison-for-All-Your-Files"><a href="#3-3-对所有文件使用Unison-Using-Unison-for-All-Your-Files" class="headerlink" title="3.3. 对所有文件使用Unison | Using Unison for All Your Files"></a>3.3. 对所有文件使用Unison | Using Unison for All Your Files</h3><p>如果你需要经常对使用的文件进行同步，有几种可行的方式:</p><ol><li><p>同步你的整个主目录, 使用忽略机制 (see the <a href="http://www.cis.upenn.edu/~bcpierce/unison/download/releases/stable/unison-manual.html#ignore" target="_blank" rel="external">Ignore</a> section) 来避免同步临时文件及只属于一个主机的文件。</p></li><li><p>在每个主机的主目录下创建共享子目录，将需要同步的文件放进去.</p></li><li><p>在每个主机的主目录下创建共享子目录，将需要同步的文件的<em>链接</em>（links）放入此目录 .查看 <a href="http://www.cis.upenn.edu/~bcpierce/unison/download/releases/stable/unison-manual.html#symlinks" target="_blank" rel="external">Symbolic Links</a> 部分来设置使用 Unison 能够透明的处理这些链接.</p></li><li><p>使你的主目录成为共享的根目录，但是告诉Unison只同步部分文件和子目录. 可以通过在命令行中切换<code>-path</code> 来完成:</p><p><code>unison /home/*username* ssh://*remotehost*//home/*username* -path shared</code></p><p><code>-path</code> 选项可以按需使用多次来同步文件和文件夹:</p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">unison /home/username ssh://remotehost//home/username \ </div><div class="line">  -path shared \</div><div class="line">  -path pub \ </div><div class="line">  -path .netscape/bookmarks.html</div></pre></td></tr></table></figure><p>这些<code>-path</code> 参数也可以放入设置文件（ preference file）.查看 <a href="http://www.cis.upenn.edu/~bcpierce/unison/download/releases/stable/unison-manual.html#prefs" target="_blank" rel="external">Preferences</a> 部分.</p></li></ol><p>多数人会发现他们只需要在他们同步的任何一台主机上维护一个profile (或profiles) , 因为Unison 总会在这个机器上启动. (例如，如果你将你的笔记本与文件服务器同步，你可能会经常在笔记本上同步运行Unison.) 这与其他非对称镜像程序（asymmetric mirroring programs ），如<code>rdist</code> 的使用情景有些不同。那些镜像软件的镜像操作一般需要在最近发生文件变更的机器上使用。 <a href="http://www.cis.upenn.edu/~bcpierce/unison/download/releases/stable/unison-manual.html#profile" target="_blank" rel="external">Profile</a> 部分有Unison的profile语法及一些例子。</p><h3 id="3-4-在两台以上机器上使用Unison-Using-Unison-to-Synchronize-More-Than-Two-Machines"><a href="#3-4-在两台以上机器上使用Unison-Using-Unison-to-Synchronize-More-Than-Two-Machines" class="headerlink" title="3.4. 在两台以上机器上使用Unison | Using Unison to Synchronize More Than Two Machines"></a>3.4. 在两台以上机器上使用Unison | Using Unison to Synchronize More Than Two Machines</h3><p>Unison 被设计用于一组副本之间的同步。但是，他也可以通过执行多个两两同步（ multiple pairwise synchronizations）来实现一大组机器间的同步。.</p><p>If you need to do this, the most reliable way to set things up is to organize the machines into a “star topology,” with one machine designated as the “hub” and the rest as “spokes,” and with each spoke machine synchronizing only with the hub. The big advantage of the star topology is that it eliminates the possibility of confusing “spurious conflicts” arising from the fact that a separate archive is maintained by Unison for every pair of hosts that it synchronizes.</p><blockquote><p>群集中，同步在多机之间进行，而unison的同步功能仅支持双机。因此可以设计一个星型的拓扑结构，来实现多机的同步。其设计思想就是利用unison的双向同步功能，指定一台服务器为星型结构的主服务器(server1)，剩余服务器与其进行双向同步。这样，任何一台服务器上的文件变化都可以通过这个结构扩散，从而达到多机同步的目的;这一结构的缺点是一旦server1宕机失效，同步就会失败。因此，有必要的话，可以组成双主服务器的星型结构来弥补。</p></blockquote><h3 id="3-5-深入-Going-Further"><a href="#3-5-深入-Going-Further" class="headerlink" title="3.5. 深入 | Going Further"></a>3.5. 深入 | Going Further</h3><p>可以在命令行中输入 <code>unison -doc topics</code>或选择图形界面的帮助菜单来获取Unison功能的在线文档.</p><h2 id="基本概念-Basic-Concepts"><a href="#基本概念-Basic-Concepts" class="headerlink" title="基本概念 | Basic Concepts"></a>基本概念 | Basic Concepts</h2><h3 id="Roots"><a href="#Roots" class="headerlink" title="Roots"></a>Roots</h3><p>A replica’s <em>root</em> tells Unison where to find a set of files to be synchronized, either on the local machine or on a remote host.</p><h3 id="Paths"><a href="#Paths" class="headerlink" title="Paths"></a>Paths</h3><p>A <em>path</em> refers to a point <em>within</em> a set of files being synchronized; it is specified relative to the root of the replica.</p><h3 id="Caveats-and-Shortcomings"><a href="#Caveats-and-Shortcomings" class="headerlink" title="Caveats and Shortcomings"></a>Caveats and Shortcomings</h3><p>Here are some things to be careful of when using Unison.</p><ul><li>In the interests of speed, the update detection algorithm may (depending on which OS architecture that you run Unison on) actually use an approximation to the definition given in the <a href="http://www.cis.upenn.edu/~bcpierce/unison/download/releases/stable/unison-manual.html#updates" target="_blank" rel="external">What is an Update?</a>section.<br>In particular, the Unix implementation does not compare the actual contents of files to their previous contents, but simply looks at each file’s inode number and modtime; if neither of these have changed, then it concludes that the file has not been changed.<br>Under normal circumstances, this approximation is safe, in the sense that it may sometimes detect “false updates” but will never miss a real one. However, it is possible to fool it, for example by using <code>retouch</code> to change a file’s modtime back to a time in the past.</li><li>If you synchronize between a single-user filesystem and a shared Unix server, you should pay attention to your permission bits: by default, Unison will synchronize permissions verbatim, which may leave group-writable files on the server that could be written over by a lot of people.<br>You can control this by setting your <code>umask</code> on both computers to something like 022, masking out the “world write” and “group write” permission bits.<br>Unison does not synchronize the <code>setuid</code> and <code>setgid</code> bits, for security.</li><li>The graphical user interface is single-threaded. This means that if Unison is performing some long-running operation, the display will not be repainted until it finishes. We recommend not trying to do anything with the user interface while Unison is in the middle of detecting changes or propagating files.</li><li>Unison does not understand hard links.</li><li>It is important to be a little careful when renaming directories containing ignored files.<br>For example, suppose Unison is synchronizing directory A between the two machines called the “local” and the “remote” machine; suppose directory A contains a subdirectory D; and suppose D on the local machine contains a file or subdirectory P that matches an ignore directive in the profile used to synchronize. Thus path A/D/P exists on the local machine but not on the remote machine.<br>If D is renamed to D’ on the remote machine, and this change is propagated to the local machine, all such files or subdirectories P will be deleted. This is because Unison sees the rename as a delete and a separate create: it deletes the old directory (including the ignored files) and creates a new one (<em>not</em> including the ignored files, since they are completely invisible to it).</li></ul><h2 id="参考指南-Reference-Guide"><a href="#参考指南-Reference-Guide" class="headerlink" title="参考指南 | Reference Guide"></a>参考指南 | Reference Guide</h2><h3 id="运行Unison"><a href="#运行Unison" class="headerlink" title="运行Unison"></a>运行Unison</h3><p>多种方法启动 Unison.</p><ul><li>命令行输入 <code>unison profile</code> . Unison 会查找 <code>.unison</code> 目录下的<code>profile.prf</code> 文件. If this file does not specify a pair of roots, Unison will prompt for them and add them to the information specified by the profile.</li><li>命令行输入 <code>unison profile root1 root2</code> . In this case, Unison will use <code>profile</code>, which should not contain any root directives.</li><li>命令行输入 <code>unison root1 root2</code> . 与输入 <code>unison default root1 root2</code>具有相同效果</li><li>Typing just “unison” (or invoking Unison by clicking on a desktop icon). In this case, Unison will ask for the profile to use for synchronization (or create a new one, if necessary).</li></ul><h3 id="The-unison-Directory"><a href="#The-unison-Directory" class="headerlink" title="The.unison Directory"></a>The<code>.unison</code> Directory</h3><p>Unison 在每个主机的私有目录下存储各种信息. 如果设置了环境变量 <code>UNISON</code> , 那么它的值会被用作目录名. 如果没有定义 <code>UNISON</code> , 那么此目录名称取决于你所使用的操作系统. Unix下, 默认使用 <code>$HOME/.unison</code>. Windows下, 如果设置了环境变量 <code>USERPROFILE</code> , 那么此目录是 <code>$USERPROFILE\.unison</code>; 否则，如果设置了环境变量 <code>HOME</code> , 将会是 <code>$HOME\.unison</code>; 否则, 是 <code>c:\.unison</code>. （应该是<code>C:\Users\username\.unison</code>）</p><p>每个副本的存档文件会在每个副本主机的 <code>.unison</code> 目录下. Profiles (下面说明) 一般是从客户端的 <code>.unison</code>目录读取.</p><p>Note that Unison maintains a completely different set of archive files for each pair of roots.</p><p>不鼓励同步整个 <code>.unison</code> 目录, 因为这会导致经常性的大文件传输。 当然，如果你确实想这么干，也是安全可行的。 Synchronizing just the profile files in the <code>.unison</code>directory is definitely OK.</p><h3 id="Archive-Files"><a href="#Archive-Files" class="headerlink" title="Archive Files"></a>Archive Files</h3><p>每个副本中的存档文件的名称计算方法：</p><ul><li>the <em>canonical names</em> of all the hosts (短名称如 <code>saul</code> 会被转为完整的地址，如 <code>saul.cis.upenn.edu</code>),</li><li>the paths to the replicas on all the hosts (again, relative pathnames, symbolic links, etc. are converted into full, absolute paths), and</li><li>an internal version number that is changed whenever a new Unison release changes the format of the information stored in the archive.</li></ul><p>This method should work well for most users. However, it is occasionally useful to change the way archive names are generated. Unison provides two ways of doing this.</p><p>The function that finds the canonical hostname of the local host (which is used, for example, in calculating the name of the archive file used to remember which files have been synchronized) normally uses the <code>gethostname</code>operating system call. However, if the environment variable <code>UNISONLOCALHOSTNAME</code>is set, its value will be used instead. This makes it easier to use Unison in situations where a machine’s name changes frequently (e.g., because it is a laptop and gets moved around a lot).</p><p>A more powerful way of changing archive names is provided by the <code>rootalias</code>preference. The preference file may contain any number of lines of the form:</p><p><code>rootalias = //hostnameA//path-to-replicaA -&gt; //hostnameB/path-to-replicaB</code></p><p>When calculating the name of the archive files for a given pair of roots, Unison replaces any root that matches the left-hand side of any rootalias rule by the corresponding right-hand side.</p><p>So, if you need to relocate a root on one of the hosts, you can add a rule of the form: <code>rootalias = //new-hostname//new-path -&gt; //old-hostname/old-path</code> Note that root aliases are case-sensitive, even on case-insensitive file systems.</p><p>Warning: The <code>rootalias</code> option is dangerous and should only be used if you are sure you know what you’re doing. In particular, it should only be used if you are positive that either (1) both the original root and the new alias refer to the same set of files, or (2) the files have been relocated so that the original name is now invalid and will never be used again. (If the original root and the alias refer to different sets of files, Unison’s update detector could get confused.) After introducing a new <code>rootalias</code>, it is a good idea to run Unison a few times interactively (with the <code>batch</code> flag off, etc.) and carefully check that things look reasonable—in particular, that update detection is working as expected.</p><h3 id="参数选择-Preferences"><a href="#参数选择-Preferences" class="headerlink" title="参数选择 | Preferences"></a>参数选择 | Preferences</h3><p>Many details of Unison’s behavior are configurable by user-settable “preferences.”</p><p>有些选项是<strong>布尔值</strong>; 这些被称作 <code>flags</code>. 其他数值或字符参数, 用 <code>n</code> 或<code>xxx</code>指明. 大部分是字符型选项可以给多个值，这些参数会在内部转为list.</p><p>有两种方式设置选项的值:</p><p>临时性的：在某次运行Unison时提供相应的命令行参数,</p><p>永久性的：将命令添加到客户端主机的 <code>.unison</code>目录下的 <code>profile</code> .</p><p>选项的顺序是无关紧要的. On the command line, preferences and other arguments (the profile name and roots) can be intermixed in any order.</p><p>从命令行给选项 <code>p</code> 赋值, 可以在命令行的任何位置添加参数 <code>-p</code>( boolean flag) 或<code>-p n</code> 或 <code>-p xxx</code> (数值或字符型) . 给一个 布尔型标志设置<code>false</code> , 可以使用<code>-p=false</code>.</p><p>下面是 Unison 支持的所有选项. 可以通过<code>unison -help</code>来获得.</p><blockquote><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">&gt;   Usage: unison [options]</div><div class="line">&gt;       or unison root1 root2 [options]</div><div class="line">&gt;       or unison profilename [options]</div><div class="line">&gt;</div><div class="line">&gt;   Basic options: </div><div class="line">&gt;    -auto              automatically accept default (nonconflicting) actions</div><div class="line">&gt;    -batch             batch mode: ask no questions at all , 全自动模式，接受缺省动作并执行。</div><div class="line">&gt;    -doc xxx           show documentation (&apos;-doc topics&apos; lists topics)</div><div class="line">&gt;    -fat               use appropriate options for FAT filesystems / FAT文件系统</div><div class="line">&gt;    -group             synchronize group attributes / 同步组属性</div><div class="line">&gt;    -ignore xxx        add a pattern to the ignore list / 忽略列表的模式</div><div class="line">&gt;    -ignorenot xxx     add a pattern to the ignorenot list</div><div class="line">&gt;    -nocreation xxx    prevent file creations on one replica / 在一个副本上阻止创建文件</div><div class="line">&gt;    -nodeletion xxx    prevent file deletions on one replica / 在一个副本上阻止删除文件</div><div class="line">&gt;    -noupdate xxx      prevent file updates and deletions on one replica / 在一个副本上阻止更新与删除文件</div><div class="line">&gt;    -owner             synchronize owner / 同步所有者</div><div class="line">&gt;    -path xxx          path to synchronize / 同步的目录。只同步 -path 参数指定的子目录以及文件，而非整个目录。-path 可以多次出现</div><div class="line">&gt;    -perms n           part of the permissions which is synchronized</div><div class="line">&gt;    -root xxx          root of a replica (should be used exactly twice)</div><div class="line">&gt;    -silent            print nothing except error messages</div><div class="line">&gt;    -terse             suppress status messages</div><div class="line">&gt;    -testserver        exit immediately after the connection to the server</div><div class="line">&gt;    -times             synchronize modification times</div><div class="line">&gt;    -version           print version and exit</div><div class="line">&gt;</div><div class="line">&gt;   Advanced options: </div><div class="line">&gt;    -addprefsto xxx    file to add new prefs to</div><div class="line">&gt;    -addversionno      add version number to name of unison on server</div><div class="line">&gt;    -backup xxx        add a pattern to the backup list</div><div class="line">&gt;    -backupcurr xxx    add a pattern to the backupcurr list</div><div class="line">&gt;    -backupcurrnot xxx add a pattern to the backupcurrnot list</div><div class="line">&gt;    -backupdir xxx     directory for storing centralized backups</div><div class="line">&gt;    -backuploc xxx     where backups are stored (&apos;local&apos; or &apos;central&apos;)</div><div class="line">&gt;    -backupnot xxx     add a pattern to the backupnot list</div><div class="line">&gt;    -backupprefix xxx  prefix for the names of backup files</div><div class="line">&gt;    -backups           keep backup copies of all files (see also &apos;backup&apos;)</div><div class="line">&gt;    -backupsuffix xxx  a suffix to be added to names of backup files</div><div class="line">&gt;    -clientHostName xxx set host name of client</div><div class="line">&gt;    -confirmbigdel     ask about whole-replica (or path) deletes (default true)</div><div class="line">&gt;    -confirmmerge      ask for confirmation before committing results of a merge</div><div class="line">&gt;    -contactquietly    suppress the &apos;contacting server&apos; message during startup</div><div class="line">&gt;    -copymax n         maximum number of simultaneous copyprog transfers</div><div class="line">&gt;    -copyonconflict    keep copies of conflicting files</div><div class="line">&gt;    -copyprog xxx      external program for copying large files</div><div class="line">&gt;    -copyprogrest xxx  variant of copyprog for resuming partial transfers</div><div class="line">&gt;    -copyquoterem xxx  add quotes to remote file name for copyprog (true/false/default)</div><div class="line">&gt;    -copythreshold n   use copyprog on files bigger than this (if &gt;=0, in Kb)</div><div class="line">&gt;    -debug xxx         debug module xxx (&apos;all&apos; -&gt; everything, &apos;verbose&apos; -&gt; more)</div><div class="line">&gt;    -diff xxx          set command for showing differences between files</div><div class="line">&gt;    -dontchmod         when set, never use the chmod system call</div><div class="line">&gt;    -dumbtty           do not change terminal settings in text UI (default true)</div><div class="line">&gt;    -fastcheck xxx     do fast update detection (true/false/default)</div><div class="line">&gt;    -fastercheckUNSAFE skip computing fingerprints for new files (experts only!)</div><div class="line">&gt;    -follow xxx        add a pattern to the follow list</div><div class="line">&gt;    -force xxx         force changes from this replica to the other</div><div class="line">&gt;    -forcepartial xxx  add a pattern to the forcepartial list</div><div class="line">&gt;    -halfduplex        force half-duplex communication with the server</div><div class="line">&gt;    -height n          height (in lines) of main window in graphical interface</div><div class="line">&gt;    -host xxx          bind the socket to this host name in server socket mode</div><div class="line">&gt;    -ignorearchives    ignore existing archive files</div><div class="line">&gt;    -ignorecase xxx    identify upper/lowercase filenames (true/false/default)</div><div class="line">&gt;    -ignoreinodenumbers ignore inode number changes when detecting updates</div><div class="line">&gt;    -ignorelocks       ignore locks left over from previous run (dangerous!)</div><div class="line">&gt;    -immutable xxx     add a pattern to the immutable list</div><div class="line">&gt;    -immutablenot xxx  add a pattern to the immutablenot list</div><div class="line">&gt;    -key xxx           define a keyboard shortcut for this profile (in some UIs)</div><div class="line">&gt;    -killserver        kill server when done (even when using sockets)</div><div class="line">&gt;    -label xxx         provide a descriptive string label for this profile</div><div class="line">&gt;    -links xxx         allow the synchronization of symbolic links (true/false/default)</div><div class="line">&gt;    -log               record actions in logfile (default true)</div><div class="line">&gt;    -logfile xxx       logfile name</div><div class="line">&gt;    -maxbackups n      number of backed up versions of a file</div><div class="line">&gt;    -maxerrors n       maximum number of errors before a directory transfer is aborted</div><div class="line">&gt;    -maxsizethreshold n prevent transfer of files bigger than this (if &gt;=0, in Kb)</div><div class="line">&gt;    -maxthreads n      maximum number of simultaneous file transfers</div><div class="line">&gt;    -merge xxx         add a pattern to the merge list</div><div class="line">&gt;    -mountpoint xxx    abort if this path does not exist</div><div class="line">&gt;    -nocreationpartial xxx add a pattern to the nocreationpartial list</div><div class="line">&gt;    -nodeletionpartial xxx add a pattern to the nodeletionpartial list</div><div class="line">&gt;    -noupdatepartial xxx add a pattern to the noupdatepartial list</div><div class="line">&gt;    -numericids        don&apos;t map uid/gid values by user/group names</div><div class="line">&gt;    -prefer xxx        choose this replica&apos;s version for conflicting changes</div><div class="line">&gt;    -preferpartial xxx add a pattern to the preferpartial list</div><div class="line">&gt;    -repeat xxx        synchronize repeatedly (text interface only)</div><div class="line">&gt;    -retry n           re-try failed synchronizations N times (text ui only)</div><div class="line">&gt;    -rootalias xxx     register alias for canonical root names</div><div class="line">&gt;    -rsrc xxx          synchronize resource forks (true/false/default)</div><div class="line">&gt;    -rsync             activate the rsync transfer mode (default true)</div><div class="line">&gt;    -selftest          run internal tests and exit</div><div class="line">&gt;    -servercmd xxx     name of unison executable on remote server</div><div class="line">&gt;    -showarchive       show &apos;true names&apos; (for rootalias) of roots and archive</div><div class="line">&gt;    -socket xxx        act as a server on a socket</div><div class="line">&gt;    -sortbysize        list changed files by size, not name</div><div class="line">&gt;    -sortfirst xxx     add a pattern to the sortfirst list</div><div class="line">&gt;    -sortlast xxx      add a pattern to the sortlast list</div><div class="line">&gt;    -sortnewfirst      list new before changed files</div><div class="line">&gt;    -sshargs xxx       other arguments (if any) for remote shell command</div><div class="line">&gt;    -sshcmd xxx        path to the ssh executable</div><div class="line">&gt;    -stream            use a streaming protocol for transferring file contents (default true)</div><div class="line">&gt;    -ui xxx            select UI (&apos;text&apos; or &apos;graphic&apos;); command-line only</div><div class="line">&gt;    -unicode xxx       assume Unicode encoding in case insensitive mode</div><div class="line">&gt;    -watch             when set, use a file watcher process to detect changes (default true)  使用文件观察进程监测变化</div><div class="line">&gt;    -xferbycopying     optimize transfers using local copies (default true)</div><div class="line">&gt;</div></pre></td></tr></table></figure></blockquote><p>下面是详细说明。 Many are discussed in greater detail in other sections of the manual.</p><ul><li><p><strong>addprefsto xxx</strong></p><p>By default, new preferences added by Unison (e.g., new <code>ignore</code> clauses) will be appended to whatever preference file Unison was told to load at the beginning of the run. Setting the preference <code>addprefsto filename</code> makes Unison add new preferences to the file named <code>filename</code> instead.</p></li><li><p><strong>addversionno</strong></p><p>When this flag is set to <code>true</code> , Unison will use <code>unison-currentversionnumber</code> instead of just <code>unison</code> as the remote server command. This allows multiple binaries for different versions of unison to coexist conveniently on the same server: whichever version is run on the client, the same version will be selected on the server.</p></li><li><p><strong>auto</strong></p><p>When set to <code>true</code> , this flag causes the user interface to skip asking for confirmations on non-conflicting changes. (More precisely, when the user interface is done setting the propagation direction for one entry and is about to move to the next, it will skip over all non-conflicting entries and go directly to the next conflict.)</p></li><li><p><strong>backup xxx</strong></p><p>Including the preference <code>-backup pathspec</code> causes Unison to keep backup files for each path that matches <em>pathspec</em>. These backup files are kept in the directory specified by the <code>backuplocation</code> preference. The backups are named according to the <code>backupprefix</code> and <code>backupsuffix</code> preferences. The number of versions that are kept is determined by the <code>maxbackups</code>preference.The syntax of <em><code>pathspec</code></em> is described in the <a href="http://www.cis.upenn.edu/~bcpierce/unison/download/releases/stable/unison-manual.html#pathspec" target="_blank" rel="external">Path Specification</a> section.</p></li><li><p><strong>backupcurr xxx</strong></p><p>Including the preference <code>-backupcurr pathspec</code> causes Unison to keep a backup of the <em>current</em> version of every file matching <em><code>pathspec</code></em>. This file will be saved as a backup with version number 000. Such backups can be used as inputs to external merging programs, for instance. See the documentatation for the <code>merge</code> preference. For more details, see the<a href="http://www.cis.upenn.edu/~bcpierce/unison/download/releases/stable/unison-manual.html#merge" target="_blank" rel="external">Merging Conflicting Versions</a> section.The syntax of <em><code>pathspec</code></em> is described in the <a href="http://www.cis.upenn.edu/~bcpierce/unison/download/releases/stable/unison-manual.html#pathspec" target="_blank" rel="external">Path Specification</a> section.</p></li><li><p><strong>backupcurrnot xxx</strong></p><p>Exceptions to <code>backupcurr</code>, like the <code>ignorenot</code> preference.</p></li><li><p><strong>backupdir xxx</strong></p><p>If this preference is set, Unison will use it as the name of the directory used to store backup files specified by the <code>backup</code> preference, whenbackuplocation is set to <code>central</code>. It is checked <em>after</em> the <code>UNISONBACKUPDIR</code> environment variable.</p></li><li><p><strong>backuploc xxx</strong></p><p>This preference determines whether backups should be kept locally, near the original files, or in a central directory specified by the <code>backupdir</code> preference. If set to <code>local</code>, backups will be kept in the same directory as the original files, and if set to <code>central</code>, <code>backupdir</code> will be used instead.</p></li><li><p><strong>backupnot xxx</strong></p><p>The values of this preference specify paths or individual files or regular expressions that should <em>not</em> be backed up, even if the <code>backup</code> preference selects them—i.e., it selectively overrides <code>backup</code>. The same caveats apply here as with <code>ignore</code> and <code>ignorenot</code>.</p></li><li><p><strong>backupprefix xxx</strong></p><p>When a backup for a file <code>NAME</code> is created, it is stored in a directory specified by <code>backuplocation</code> , in a file called <code>backupprefixNAMEbackupsuffix.backupprefix</code> can include a directory name (causing Unison to keep all backup files for a given directory in a subdirectory with this name), and both backupprefix and <code>backupsuffix</code> can contain the string <em><code>$VERSION</code></em>, which will be replaced by the <em>age</em> of the backup (1 for the most recent, 2 for the second most recent, and so on…). This keyword is ignored if it appears in a directory name in the prefix; if it does not appear anywhere in the prefix or the suffix, it will be automatically placed at the beginning of the suffix.</p><p>One thing to be careful of: If the <code>backuploc</code> preference is set to <code>local</code>, Unison will automatically ignore <em>all</em> files whose prefix and suffix match <code>backupprefix</code> and <code>backupsuffix</code>. So be careful to choose values for these preferences that are sufficiently different from the names of your real files.</p></li><li><p><strong>backups</strong></p><p>Setting this flag to true is equivalent to setting <code>backuplocation</code> to localand backup to <code>Name *</code>.</p></li><li><p><strong>backupsuffix xxx</strong></p><p>See <code>backupprefix</code> for full documentation.</p></li><li><p><strong>batch</strong></p><p>When this is set to <code>true</code>, the user interface will ask no questions at all. Non-conflicting changes will be propagated; conflicts will be skipped.</p></li><li><p><strong>clientHostName xxx</strong></p><p>When specified, the host name of the client will not be guessedand the provided host name will be used to find the archive.</p></li><li><p><strong>confirmbigdel</strong></p><p>When this is set to <code>true</code>, Unison will request an extra confirmation if it appears that the entire replica has been deleted, before propagating the change. If the <code>batch</code> flag is also set, synchronization will be aborted. When the <code>path</code> preference is used, the same confirmation will be requested for top-level paths. (At the moment, this flag only affects the text user interface.) See also the <code>mountpoint</code> preference.</p></li><li><p><strong>confirmmerge</strong></p><p>Setting this preference causes both the text and graphical interfaces to ask the user if the results of a merge command may be committed to the replica or not. Since the merge command works on temporary files, the user can then cancel all the effects of applying the merge if it turns out that the result is not satisfactory. In batch-mode, this preference has no effect. Default is <code>false</code>.</p></li><li><p><strong>contactquietly</strong></p><p>If this flag is set, Unison will skip displaying the `Contacting server’ message (which some users find annoying) during startup.</p></li><li><p><strong>copymax n</strong></p><p>A number indicating how many instances of the external copying utility Unison is allowed to run simultaneously (default to 1).</p></li><li><p><strong>copyonconflict</strong></p><p>When this flag is set, Unison will make a copy of files that would otherwise be overwritten or deleted in case of conflicting changes, and more generally whenever the default behavior is overriden. This makes it possible to automatically resolve conflicts in a fairly safe way when synchronizing continuously, in combination with the <code>-repeat watch</code> and <code>-prefer newer</code> preferences.</p></li><li><p><strong>copyprog xxx</strong></p><p>A string giving the name of an external program that can be used to copy large files efficiently (plus command-line switches telling it to copy files in-place). The default setting invokes rsync with appropriate options—most users should not need to change it.</p></li><li><p><strong>copyprogrest xxx</strong></p><p>A variant of <code>copyprog</code> that names an external program that should be used to continue the transfer of a large file that has already been partially transferred. Typically, <code>copyprogrest</code> will just be <code>copyprog</code> with one extra option (e.g., <code>–partial</code>, for rsync). The default setting invokes <code>rsync</code> with appropriate options—most users should not need to change it.</p></li><li><p><strong>copyquoterem xxx</strong></p><p>When set to <code>true</code>, this flag causes Unison to add an extra layer of quotes to the remote path passed to the external copy program. This is needed by rsync, for example, which internally uses an ssh connection requiring an extra level of quoting for paths containing spaces. When this flag is set to <code>default</code>, extra quotes are added if the value of <code>copyprog</code> contains the string <code>rsync</code>.</p></li><li><p><strong>copythreshold n</strong></p><p>A number indicating above what filesize (in kilobytes) Unison should use the external copying utility specified by <code>copyprog</code>. Specifying 0 will cause<em>all</em> copies to use the external program; a negative number will prevent any files from using it. The default is -1. See the <a href="http://www.cis.upenn.edu/~bcpierce/unison/download/releases/stable/unison-manual.html#speeding" target="_blank" rel="external">Making Unison Faster on Large Files</a> section for more information.</p></li><li><p><strong>debug xxx</strong></p><p>This preference is used to make Unison print various sorts of information about what it is doing internally on the standard error stream. It can be used many times, each time with the name of a module for which debugging information should be printed. Possible arguments for <code>debug</code>can be found by looking for calls to <code>Util.debug</code> in the sources (using, e.g.,<code>grep</code>). Setting <code>-debug all</code> causes information from <em>all</em> modules to be printed (this mode of usage is the first one to try, if you are trying to understand something that Unison seems to be doing wrong); <code>-debug verbose</code> turns on some additional debugging output from some modules (e.g., it will show exactly what bytes are being sent across the network).</p></li><li><p><strong>diff xxx</strong></p><p>This preference can be used to control the name and command-line arguments of the system utility used to generate displays of file differences. The default is <code>`diff -u CURRENT2 CURRENT1</code>‘. If the value of this preference contains the substrings CURRENT1 and CURRENT2, these will be replaced by the names of the files to be diffed. If not, the two filenames will be appended to the command. In both cases, the filenames are suitably quoted.</p></li><li><p><strong>doc xxx</strong></p><p>The command-line argument <code>-doc</code> <em><code>secname</code></em> causes unison to display section <em><code>secname</code></em> of the manual on the standard output and then exit. Use<code>-doc all</code> to display the whole manual, which includes exactly the same information as the printed and HTML manuals, modulo formatting. Use <code>-doc topics</code> to obtain a list of the names of the various sections that can be printed.</p></li><li><p><strong>dontchmod</strong></p><p>By default, Unison uses the ‘chmod’ system call to set the permission bits of files after it has copied them. But in some circumstances (and under some operating systems), the chmod call always fails. Setting this preference completely prevents Unison from ever calling chmod.</p></li><li><p><strong>dumbtty</strong></p><p>When set to <code>true</code>, this flag makes the text mode user interface avoid trying to change any of the terminal settings. (Normally, Unison puts the terminal in <code>raw mode</code> , so that it can do things like overwriting the current line.) This is useful, for example, when Unison runs in a shell inside of Emacs. When <code>dumbtty</code> is set, commands to the user interface need to be followed by a carriage return before Unison will execute them. (When it is off, Unison recognizes keystrokes as soon as they are typed.)This preference has no effect on the graphical user interface.</p></li><li><p><strong>dumparchives</strong></p><p>When this preference is set, Unison will create a file unison.dump on each host, containing a text summary of the archive, immediately after loading it.</p></li><li><p><strong>fastcheck xxx</strong></p><p>When this preference is set to <code>true</code>, Unison will use the modification time and length of a file as a <code>pseudo inode number</code> when scanning replicas for updates, instead of reading the full contents of every file. (This does not apply to the very first run, when Unison will always scan all files regarless of this switch). Under Windows, this may cause Unison to miss propagating an update if the modification time and length of the file are both unchanged by the update. However, Unison will never <em>overwrite</em>such an update with a change from the other replica, since it always does a safe check for updates just before propagating a change. Thus, it is reasonable to use this switch under Windows most of the time and occasionally run Unison once with <code>fastcheck</code> set to <code>false</code>, if you are worried that Unison may have overlooked an update. For backward compatibility,<code>yes</code>, <code>no</code>, and <code>default</code> can be used in place of <code>true</code>, <code>false</code>, and <code>auto</code>. See the<a href="http://www.cis.upenn.edu/~bcpierce/unison/download/releases/stable/unison-manual.html#fastcheck" target="_blank" rel="external">Fast Checking</a> section for more information.</p></li><li><p><strong>fastercheckUNSAFE</strong></p><p>THIS FEATURE IS STILL EXPERIMENTAL AND SHOULD BE USED WITH EXTREME CAUTION. When this flag is set to <code>true</code>, Unison will compute a ‘pseudo-fingerprint’ the first time it sees a file (either because the file is new or because Unison is running for the first time). This enormously speeds update detection, but it must be used with care, as it can cause Unison to miss conflicts: If a given path in the filesystem contains files on <em>both</em> sides that Unison has not yet seen, and if those files have the same length but different contents, then Unison will not notice the presence of a conflict. If, later, one of the files is changed, the changed file will be propagated, overwriting the other.</p><p>Moreover, even when the files are initially identical, setting this flag can lead to potentially confusing behavior: if a newly created file is later touched without being modified, Unison will treat this conservatively as a potential change (since it has no record of the earlier contents) and show it as needing to be propagated to the other replica.</p><p>Most users should leave this flag off – the small time savings of not fingerprinting new files is not worth the cost in terms of safety. However, it can be very useful for power users with huge replicas that are known to be already synchronized (e.g., because one replica is a newly created duplicate of the other, or because they have previously been synchronized with Unison but Unison’s archives need to be rebuilt). In such situations, it is recommended that this flag be set only for the initial run of Unison, so that new archives can be created quickly, and then turned off for normal use.</p></li><li><p><strong>fat</strong></p><p>When this is set to true, Unison will use appropriate options to synchronize efficiently and without error a replica located on a FAT filesystem on a non-Windows machine: do not synchronize permissions (<code>perms = 0</code>); never use chmod ( <code>t dontchmod = true</code>); treat filenames as case insensitive (<code>ignorecase = true</code>); do not attempt to synchronize symbolic links (<code>links = false</code>); ignore inode number changes when detecting updates (<code>ignoreinodenumbers = true</code>). Any of these change can be overridden by explicitly setting the corresponding preference in the profile.</p></li><li><p><strong>follow xxx</strong></p><p>Including the preference <code>-follow</code> <em><code>pathspec</code></em> causes Unison to treat symbolic links matching <em><code>pathspec</code></em> as <code>invisible</code> and behave as if the object pointed to by the link had appeared literally at this position in the replica. See the <a href="http://www.cis.upenn.edu/~bcpierce/unison/download/releases/stable/unison-manual.html#symlinks" target="_blank" rel="external">Symbolic Links</a> section for more details. The syntax of <em><code>pathspec</code></em> is described in the <a href="http://www.cis.upenn.edu/~bcpierce/unison/download/releases/stable/unison-manual.html#pathspec" target="_blank" rel="external">Path Specification</a> section.</p></li><li><p><strong>force xxx</strong></p><p>Including the preference <code>-force root</code> causes Unison to resolve all differences (even non-conflicting changes) in favor of <em><code>root</code></em>. This effectively changes Unison from a synchronizer into a mirroring utility.</p><p>You can also specify <code>-force newer</code> (or <code>-force older</code>) to force Unison to choose the file with the later (earlier) modtime. In this case, the <code>-times</code>preference must also be enabled.</p><p>This preference is overridden by the <code>forcepartial</code> preference.</p><p>This preference should be used only if you are <em>sure</em> you know what you are doing!</p></li><li><p><strong>forcepartial xxx</strong></p><p>Including the preference <code>forcepartial = PATHSPEC -&gt; root</code> causes Unison to resolve all differences (even non-conflicting changes) in favor of <em><code>root</code></em> for the files in <em><code>PATHSPEC</code></em> (see the <a href="http://www.cis.upenn.edu/~bcpierce/unison/download/releases/stable/unison-manual.html#pathspec" target="_blank" rel="external">Path Specification</a> section for more information). This effectively changes Unison from a synchronizer into a mirroring utility.</p><p>You can also specify <code>forcepartial PATHSPEC -&gt; newer</code> (or <code>forcepartial PATHSPEC older</code>) to force Unison to choose the file with the later (earlier) modtime. In this case, the <code>-times</code> preference must also be enabled.</p><p>This preference should be used only if you are <em>sure</em> you know what you are doing!</p></li><li><p><strong>group</strong></p><p>When this flag is set to <code>true</code>, the group attributes of the files are synchronized. Whether the group names or the group identifiers are synchronized depends on the preference <code>numerids</code> .</p></li><li><p><strong>halfduplex</strong></p><p>When this flag is set to <code>true</code> , Unison network communication is forced to be half duplex (the client and the server never simultaneously emit data). If you experience unstabilities with your network link, this may help. The communication is always half-duplex when synchronizing with a Windows machine due to a limitation of Unison current implementation that could result in a deadlock.</p></li><li><p><strong>height n</strong></p><p>Used to set the height (in lines) of the main window in the graphical user interface.</p></li><li><p><strong>ignore xxx</strong></p><p>Including the preference <code>-ignore</code> <em><code>pathspec</code></em> causes Unison to completely ignore paths that match <em><code>pathspec</code></em> (as well as their children). This is useful for avoiding synchronizing temporary files, object files, etc. The syntax of <em><code>pathspec</code></em> is described in the <a href="http://www.cis.upenn.edu/~bcpierce/unison/download/releases/stable/unison-manual.html#pathspec" target="_blank" rel="external">Path Specification</a> section, and further details on ignoring paths is found in the <a href="http://www.cis.upenn.edu/~bcpierce/unison/download/releases/stable/unison-manual.html#ignore" target="_blank" rel="external">Ignoring Paths</a> section.</p></li><li><p><strong>ignorearchives</strong></p><p>When this preference is set, Unison will ignore any existing archive files and behave as though it were being run for the first time on these replicas. It is not a good idea to set this option in a profile: it is intended for command-line use.</p></li><li><p><strong>ignorecase xxx</strong></p><p>When set to <code>true</code>, this flag causes Unison to treat filenames as case insensitive—i.e., files in the two replicas whose names differ in (upper- and lower-case) <code>spelling</code> are treated as the same file. When the flag is set to <code>false</code>, Unison will treat all filenames as case sensitive. Ordinarily, when the flag is set to default, filenames are automatically taken to be case-insensitive if either host is running Windows or OSX. In rare circumstances it may be useful to set the flag manually.</p></li><li><p><strong>ignoreinodenumbers</strong></p><p>When set to true, this preference makes Unison not take advantage of inode numbers during fast update detection. This switch should be used with care, as it is less safe than the standard update detection method, but it can be useful with filesystems which do not support inode numbers.</p></li><li><p><strong>ignorelocks</strong></p><p>When this preference is set, Unison will ignore any lock files that may have been left over from a previous run of Unison that was interrupted while reading or writing archive files; by default, when Unison sees these lock files it will stop and request manual intervention. This option should be set only if you are <em>positive</em> that no other instance of Unison might be concurrently accessing the same archive files (e.g., because there was only one instance of unison running and it has just crashed or you have just killed it). It is probably not a good idea to set this option in a profile: it is intended for command-line use.</p></li><li><p><strong>ignorenot xxx</strong></p><p>This preference overrides the preference <code>ignore</code> . It gives a list of patterns (in the same format as <code>ignore</code>) for paths that should definitely <em>not</em> be ignored, whether or not they happen to match one of the <code>ignore</code> patterns.</p><p>Note that the semantics of <code>ignore</code> and <code>ignorenot</code> is a little counter-intuitive. When detecting updates, Unison examines paths in depth-first order, starting from the roots of the replicas and working downwards. Before examining each path, it checks whether it matches <code>ignore</code> and does not match <code>ignorenot</code>; in this case it skips this path <em>and all its descendants</em>. This means that, if some parent of a given path matches an <code>ignore</code> pattern, then it will be skipped even if the path itself matches an<code>ignorenot</code> pattern. In particular, putting <code>ignore = Path *</code> in your profile and then using ignorenot to select particular paths to be synchronized will not work. Instead, you should use the <code>path</code> preference to choose particular paths to synchronize.</p></li><li><p><strong>immutable xxx</strong></p><p>This preference specifies paths for directories whose immediate children are all immutable files — i.e., once a file has been created, its contents never changes. When scanning for updates, Unison does not check whether these files have been modified; this can speed update detection significantly (in particular, for mail directories).</p></li><li><p><strong>immutablenot xxx</strong></p><p>This preference overrides <code>immutable</code>.</p></li><li><p><strong>key xxx</strong></p><p>Used in a profile to define a numeric key (0-9) that can be used in the graphical user interface to switch immediately to this profile.</p></li><li><p><strong>killserver</strong></p><p>When set to <code>true</code>, this flag causes Unison to kill the remote server process when the synchronization is finished. This behavior is the default for <code>ssh</code> connections, so this preference is not normally needed when running over <code>ssh</code>; it is provided so that socket-mode servers can be killed off after a single run of Unison, rather than waiting to accept future connections. (Some users prefer to start a remote socket server for each run of Unison, rather than leaving one running all the time.)</p></li><li><p><strong>label xxx</strong></p><p>Used in a profile to provide a descriptive string documenting its settings. (This is useful for users that switch between several profiles, especially using the `fast switch’ feature of the graphical user interface.)</p></li><li><p><strong>links xxx</strong></p><p>When set to <code>true</code> , this flag causes Unison to synchronize symbolic links. When the flag is set to <code>false</code>, symbolic links will result in an error during update detection. Ordinarily, when the flag is set to default, symbolic links are synchronized except when one of the hosts is running Windows. In rare circumstances it may be useful to set the flag manually.</p></li><li><p><strong>log</strong></p><p>When this flag is set, Unison will log all changes to the filesystems on a file.</p></li><li><p><strong>logfile xxx</strong></p><p>By default, logging messages will be appended to the file <code>unison.log</code> in your HOME directory. Set this preference if you prefer another file.</p></li><li><p><strong>maxbackups n</strong></p><p>This preference specifies the number of backup versions that will be kept by unison, for each path that matches the predicate <code>backup</code>. The default is 2.</p></li><li><p><strong>maxerrors n</strong></p><p>This preference controls after how many errors Unison aborts a directory transfer. Setting it to a large number allows Unison to transfer most of a directory even when some files fail to be copied. The default is 1. If the preference is set too high, Unison may take a long time to abort in case of repeated failures (for instance, when the disk is full).</p></li><li><p><strong>maxsizethreshold n</strong></p><p>A number indicating above what filesize (in kilobytes) Unison should flag a conflict instead of transferring the file. This conflict remains even in the presence of force or prefer options. A negative number will allow every transfer independently of the size. The default is -1.</p></li><li><p><strong>maxthreads n</strong></p><p>This preference controls how much concurrency is allowed during the transport phase. Normally, it should be set reasonably high to maximize performance, but when Unison is used over a low-bandwidth link it may be helpful to set it lower (e.g. to 1) so that Unison doesn’t soak up all the available bandwidth. The default is the special value 0, which mean 20 threads when file content streaming is desactivated and 1000 threads when it is activated.</p></li><li><p><strong>merge xxx</strong></p><p>This preference can be used to run a merge program which will create a new version for each of the files and the backup, with the last backup and the both replicas. Setting the <code>merge</code> preference for a path will also cause this path to be backed up, just like t backup. The syntax of <em><code>pathspec&gt;cmd</code></em> is described in the <a href="http://www.cis.upenn.edu/~bcpierce/unison/download/releases/stable/unison-manual.html#pathspec" target="_blank" rel="external">Path Specification</a> section, and further details on Merging functions are present in the <a href="http://www.cis.upenn.edu/~bcpierce/unison/download/releases/stable/unison-manual.html#merge" target="_blank" rel="external">Merging files</a> section.</p></li><li><p><strong>mountpoint xxx</strong></p><p>Including the preference <code>-mountpoint PATH</code> causes Unison to double-check, at the end of update detection, that PATH exists and abort if it does not. This is useful when Unison is used to synchronize removable media. This preference can be given more than once. See the <a href="http://www.cis.upenn.edu/~bcpierce/unison/download/releases/stable/unison-manual.html#mountpoints" target="_blank" rel="external">Mount Points</a> section.</p></li><li><p><strong>nocreation xxx</strong></p><p>Including the preference <code>-nocreation</code> <em><code>root</code></em> prevents Unison from performing any file creation on root <em>root</em>.This preference can be included twice, once for each root, if you want to prevent any creation.</p></li><li><p><strong>nocreationpartial xxx</strong></p><p>Including the preference <code>nocreationpartial = PATHSPEC -&gt; root</code> prevents Unison from performing any file creation in <em><code>PATHSPEC</code></em> on root <em><code>root</code></em> (see the<a href="http://www.cis.upenn.edu/~bcpierce/unison/download/releases/stable/unison-manual.html#pathspec" target="_blank" rel="external">Path Specification</a> section for more information). It is recommended to use BelowPath patterns when selecting a directory and all its contents.</p></li><li><p><strong>nodeletion xxx</strong></p><p>Including the preference <code>-nodeletion</code> <em><code>root</code></em> prevents Unison from performing any file deletion on root <em><code>root</code></em>.</p><p>This preference can be included twice, once for each root, if you want to prevent any deletion.</p></li><li><p><strong>nodeletionpartial xxx</strong></p><p>Including the preference <code>nodeletionpartial = PATHSPEC -&gt; root</code> prevents Unison from performing any file deletion in <em><code>PATHSPEC</code></em> on root <em><code>root</code></em> (see the<a href="http://www.cis.upenn.edu/~bcpierce/unison/download/releases/stable/unison-manual.html#pathspec" target="_blank" rel="external">Path Specification</a> section for more information). It is recommended to use BelowPath patterns when selecting a directory and all its contents.</p></li><li><p><strong>noupdate xxx</strong></p><p>Including the preference <code>-noupdate root</code> prevents Unison from performing any file update or deletion on root <em><code>root</code></em>.</p><p>This preference can be included twice, once for each root, if you want to prevent any update.</p></li><li><p><strong>noupdatepartial xxx</strong></p><p>Including the preference noupdatepartial = <em>PATHSPEC</em> -&gt; <em>root</em> prevents Unison from performing any file update or deletion in <em>PATHSPEC</em> on root<em>root</em> (see the <a href="http://www.cis.upenn.edu/~bcpierce/unison/download/releases/stable/unison-manual.html#pathspec" target="_blank" rel="external">Path Specification</a> section for more information). It is recommended to use BelowPath patterns when selecting a directory and all its contents.</p></li><li><p><strong>numericids</strong></p><p>When this flag is set to <code>true</code>, groups and users are synchronized numerically, rather than by name. The special uid 0 and the special group 0 are never mapped via user/group names even if this preference is not set.</p></li><li><p><strong>owner</strong></p><p>When this flag is set to <code>true</code>, the owner attributes of the files are synchronized. Whether the owner names or the owner identifiers are synchronizeddepends on the preference numerids.</p></li><li><p><strong>path xxx</strong></p><p>When no <code>path</code> preference is given, Unison will simply synchronize the two entire replicas, beginning from the given pair of roots. If one or more <code>path</code>preferences are given, then Unison will synchronize only these paths and their children. (This is useful for doing a fast sync of just one directory, for example.) Note that path preferences are intepreted literally—they are not regular expressions.</p><p>可以重复多次，如</p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">unison /home/username ssh://remotehost//home/username \</div><div class="line">      -path shared \</div><div class="line">      -path pub \</div><div class="line">      -path .netscape/bookmarks.html</div></pre></td></tr></table></figure></li><li><p><strong>perms n</strong></p><p>The integer value of this preference is a mask indicating which permission bits should be synchronized. It is set by default to 0<em>o</em>1777: all bits but the set-uid and set-gid bits are synchronised (synchronizing theses latter bits can be a security hazard). If you want to synchronize all bits, you can set the value of this preference to −1. If one of the replica is on a FAT [Windows] filesystem, you should consider using the t fat preference instead of this preference. If you need Unison not to set permissions at all, set the value of this preference to 0 and set the preference t dontchmod to t true.</p></li><li><p><strong>prefer xxx</strong></p><p>Including the preference -prefer <em>root</em> causes Unison always to resolve conflicts in favor of <em>root</em>, rather than asking for guidance from the user. (The syntax of <em>root</em> is the same as for the <code>root</code> preference, plus the special values <code>newer</code> and <code>older</code>.) This preference is overridden by the <code>preferpartial</code> preference.This preference should be used only if you are <em>sure</em> you know what you are doing!</p></li><li><p><strong>preferpartial xxx</strong></p><p>Including the preference preferpartial = <em>PATHSPEC</em> -&gt; <em>root</em> causes Unison always to resolve conflicts in favor of <em>root</em>, rather than asking for guidance from the user, for the files in <em>PATHSPEC</em> (see the <a href="http://www.cis.upenn.edu/~bcpierce/unison/download/releases/stable/unison-manual.html#pathspec" target="_blank" rel="external">Path Specification</a> section for more information). (The syntax of <em>root</em> is the same as for the <code>root</code> preference, plus the special values <code>newer</code> and <code>older</code>.) This preference should be used only if you are <em>sure</em> you know what you are doing!</p></li><li><p><strong>repeat xxx</strong></p><p>Setting this preference causes the text-mode interface to synchronize repeatedly, rather than doing it just once and stopping. If the argument is a number, Unison will pause for that many seconds before beginning again. When the argument is <code>watch</code>, Unison relies on an external file monitoring process to synchronize whenever a change happens.</p></li><li><p><strong>retry n</strong></p><p>Setting this preference causes the text-mode interface to try again to synchronize updated paths where synchronization fails. Each such path will be tried N times.</p></li><li><p><strong>root xxx</strong></p><p>Each use of this preference names the root of one of the replicas for Unison to synchronize. Exactly two roots are needed, so normal modes of usage are either to give two values for <code>root</code> in the profile, or to give no values in the profile and provide two on the command line. Details of the syntax of roots can be found in the <a href="http://www.cis.upenn.edu/~bcpierce/unison/download/releases/stable/unison-manual.html#roots" target="_blank" rel="external">Roots</a> section.The two roots can be given in either order; Unison will sort them into a canonical order before doing anything else. It also tries to `canonize’ the machine names and paths that appear in the roots, so that, if Unison is invoked later with a slightly different name for the same root, it will be able to locate the correct archives.</p></li><li><p><strong>rootalias xxx</strong></p><p>When calculating the name of the archive files for a given pair of roots, Unison replaces any roots matching the left-hand side of any rootalias rule by the corresponding right-hand side.</p></li><li><p><strong>rshargs xxx</strong></p><p>The string value of this preference will be passed as additional arguments (besides the host name and the name of the Unison executable on the remote system) to the <code>rsh</code> command used to invoke the remote server.</p></li><li><p><strong>rshcmd xxx</strong></p><p>This preference can be used to explicitly set the name of the rsh executable (e.g., giving a full path name), if necessary.</p></li><li><p><strong>rsrc xxx</strong></p><p>When set to true, this flag causes Unison to synchronize resource forks and HFS meta-data. On filesystems that do not natively support resource forks, this data is stored in Carbon-compatible ._ AppleDouble files. When the flag is set to false, Unison will not synchronize these data. Ordinarily, the flag is set to default, and these data are automatically synchronized if either host is running OSX. In rare circumstances it is useful to set the flag manually.</p></li><li><p><strong>rsync</strong></p><p>Unison uses the ‘rsync algorithm’ for ‘diffs-only’ transfer of updates to large files. Setting this flag to false makes Unison use whole-file transfers instead. Under normal circumstances, there is no reason to do this, but if you are having trouble with repeated ‘rsync failure’ errors, setting it to false should permit you to synchronize the offending files.</p></li><li><p><strong>selftest</strong></p><p>Run internal tests and exit. This option is mostly for developers and must be used carefully: in particular, it will delete the contents of both roots, so that it can install its own files for testing. This flag only makes sense on the command line. When it is provided, no preference file is read: all preferences must be specified on thecommand line. Also, since the self-test procedure involves overwriting the roots and backup directory, the names of the roots and of the backupdir preference must include the string “test” or else the tests will be aborted. (If these are not given on the command line, dummy subdirectories in the current directory will be created automatically.)</p></li><li><p><strong>servercmd xxx</strong></p><p>This preference can be used to explicitly set the name of the Unison executable on the remote server (e.g., giving a full path name), if necessary.</p></li><li><p><strong>showarchive</strong></p><p>When this preference is set, Unison will print out the ‘true names’of the roots, in the same form as is expected by the rootaliaspreference.</p></li><li><p><strong>silent</strong></p><p>When this preference is set to true, the textual user interface will print nothing at all, except in the case of errors. Setting silent to true automatically sets the batch preference to true.</p></li><li><p><strong>sortbysize</strong></p><p>When this flag is set, the user interface will list changed files by size (smallest first) rather than by name. This is useful, for example, for synchronizing over slow links, since it puts very large files at the end of the list where they will not prevent smaller files from being transferred quickly.This preference (as well as the other sorting flags, but not the sorting preferences that require patterns as arguments) can be set interactively and temporarily using the ‘Sort’ menu in the graphical user interface.</p></li><li><p><strong>sortfirst xxx</strong></p><p>Each argument to sortfirst is a pattern <em>pathspec</em>, which describes a set of paths. Files matching any of these patterns will be listed first in the user interface. The syntax of <em>pathspec</em> is described in the <a href="http://www.cis.upenn.edu/~bcpierce/unison/download/releases/stable/unison-manual.html#pathspec" target="_blank" rel="external">Path Specification</a>section.</p></li><li><p><strong>sortlast xxx</strong></p><p>Similar to <code>sortfirst</code>, except that files matching one of these patterns will be listed at the very end.</p></li><li><p><strong>sortnewfirst</strong></p><p>When this flag is set, the user interface will list newly created files before all others. This is useful, for example, for checking that newly created files are not `junk’, i.e., ones that should be ignored or deleted rather than synchronized.</p></li><li><p><strong>sshargs xxx</strong></p><p>The string value of this preference will be passed as additional arguments (besides the host name and the name of the Unison executable on the remote system) to the <code>ssh</code> command used to invoke the remote server.</p></li><li><p><strong>sshcmd xxx</strong></p><p>This preference can be used to explicitly set the name of the ssh executable (e.g., giving a full path name), if necessary.</p></li><li><p><strong>sshversion xxx</strong></p><p>This preference can be used to control which version of ssh should be used to connect to the server. Legal values are 1 and 2, which will cause unison to try to use <code>ssh1</code> or<code>ssh2</code> instead of just <code>ssh</code> to invoke ssh. The default value is empty, which will make unison use whatever version of ssh is installed as the default `ssh’ command.</p></li><li><p><strong>stream</strong></p><p>When this preference is set, Unison will use an experimental streaming protocol for transferring file contents more efficiently. The default value is true.</p></li><li><p><strong>terse</strong></p><p>When this preference is set to true, the user interface will not print status messages.</p></li><li><p><strong>testserver</strong></p><p>Setting this flag on the command line causes Unison to attempt to connect to the remote server and, if successful, print a message and immediately exit. Useful for debugging installation problems. Should not be set in preference files.</p></li><li><p><strong>times</strong></p><p>When this flag is set to <code>true</code>, file modification times (but not directory modtimes) are propagated.</p></li><li><p><strong>ui xxx</strong></p><p>This preference selects either the graphical or the textual user interface. Legal values are <code>graphic</code> or <code>text</code>. Because this option is processed specially during Unison’s start-up sequence, it can <em>only</em> be used on the command line. In preference files it has no effect.If the Unison executable was compiled with only a textual interface, this option has no effect. (The pre-compiled binaries are all compiled with both interfaces available.)</p></li><li><p><strong>unicode xxx</strong></p><p>When set to true, this flag causes Unison to perform case insensitive file comparisons assuming Unicode encoding. This is the default. When the flag is set to false, a Latin 1 encoding is assumed. When Unison runs in case sensitive mode, this flag only makes a difference if one host is running Windows or Mac OS X. Under Windows, the flag selects between using the Unicode or 8bit Windows API for accessing the filesystem. Under Mac OS X, it selects whether comparing the filenames up to decomposition, or byte-for-byte.</p></li><li><p><strong>version</strong></p><p>Print the current version number and exit. (This option only makes sense on the command line.)</p></li><li><p><strong>watch</strong></p><p>Unison uses a file watcher process, when available, to detect filesystem changes; this is used to speed up update detection, and for continuous synchronization (<code>-repeat watch</code> preference. Setting this flag to false disable the use of this process.</p></li><li><p><strong>xferbycopying</strong></p><p>When this preference is set, Unison will try to avoid transferring file contents across the network by recognizing when a file with the required contents already exists in the target replica. This usually allows file moves to be propagated very quickly. The default value istrue.</p></li></ul><h3 id="Profiles"><a href="#Profiles" class="headerlink" title="Profiles"></a>Profiles</h3><p><code>profile</code> 是一个指定 roots, paths, ignore patterns 和其他永久性设置的文本文档, 因此不需要每次运行Unison时都在命令行中指定配置. Profiles 存储在客户端机器的<code>.unison</code> 目录. 如果 Unison 以一个 <code>name</code> 命令行参数启动, Unison会从<code>.unison</code>目录下去找 <code>name.prf</code> 文件. 如果启动时没有参数, 它会扫描 <code>.unison</code>目录中以 <code>.prf</code> 结尾的文件并提供一个菜单 (假设Unison 可执行文件是具有图形界面的). 如果找到一个名称为 <code>default.prf</code> , 那么它的设置会成为默认选择.</p><p>永久性地设置选项 <code>p</code> 的值, 可以<code>p = true</code> （布尔型）或<code>p = &lt;value&gt;</code>（其他类型）的形式将其添加到profile文件中.</p><p><code>p</code> 和 <code>xxx</code> 周围的空白会被忽略. 空行以及以 <code>#</code>起始的行都会被忽略。</p><p>当 Unison 启动时, 会首先读取profile 然后读取命令行命令，因此命令行命令会覆盖profile中的对应设置.</p><p>Profiles 中可以包含 <code>include</code> <em><code>name</code></em> 形式的行, 这会读取文件 <em><code>name</code></em> (如果此文件不在 <code>.unison</code>目录下时应该是<code>name.prf</code>) , 把文件的内容读取进来作为profile文件的一部分, 而不是 <code>include</code> 行本身. Include 允许将多个profile文件中的公共内容存储到一个文件中.</p><p>A profile may include a preference <code>label = desc</code> to provide a description of the options selected in this profile. The string <em><code>desc</code></em> is listed along with the profile name in the profile selection dialog, and displayed in the top-right corner of the main Unison window in the graphical user interface.</p><p>The graphical user-interface also supports one-key shortcuts for commonly used profiles. If a profile contains a preference of the form <code>key = n</code>, where <em><code>n</code></em> is a single digit, then pressing this digit key will cause Unison to immediately switch to this profile and begin synchronization again from scratch. In this case, all actions that have been selected for a set of changes currently being displayed will be discarded.</p><h3 id="Sample-Profiles"><a href="#Sample-Profiles" class="headerlink" title="Sample Profiles"></a>Sample Profiles</h3><h4 id="最小-Profile"><a href="#最小-Profile" class="headerlink" title="最小 Profile"></a>最小 Profile</h4><p>最简单的一个profile 文件,位于<code>.unison/default.prf</code>:</p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line"># Roots of the synchronization</div><div class="line">root = /home/bcpierce</div><div class="line">root = ssh://saul//home/bcpierce</div><div class="line"></div><div class="line"># Paths to synchronize </div><div class="line">path = current</div><div class="line">path = common</div><div class="line">path = .netscape/bookmarks.html</div></pre></td></tr></table></figure><h4 id="基本-Profile"><a href="#基本-Profile" class="headerlink" title="基本 Profile"></a>基本 Profile</h4><p>更加复杂的（sophisticated） profile, 列出了其他一些有用的配置.</p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line"># Roots of the synchronization</div><div class="line">root = /home/bcpierce</div><div class="line">root = ssh://saul//home/bcpierce</div><div class="line"></div><div class="line"># Paths to synchronize </div><div class="line">path = current</div><div class="line">path = common</div><div class="line">path = .netscape/bookmarks.html</div><div class="line"></div><div class="line"># Some regexps specifying names and paths to ignore</div><div class="line">ignore = Name temp.*</div><div class="line">ignore = Name *~</div><div class="line">ignore = Name .*~</div><div class="line">ignore = Path */pilot/backup/Archive_*</div><div class="line">ignore = Name *.o</div><div class="line">ignore = Name *.tmp</div><div class="line"></div><div class="line"># Window height</div><div class="line">height = 37</div><div class="line"></div><div class="line"># Keep a backup copy of every file in a central location</div><div class="line">backuplocation = central</div><div class="line">backupdir = /home/bcpierce/backups</div><div class="line">backup = Name *</div><div class="line">backupprefix = $VERSION.</div><div class="line">backupsuffix = </div><div class="line"></div><div class="line"># Use this command for displaying diffs</div><div class="line">diff = diff -y -W 79 --suppress-common-lines</div><div class="line"></div><div class="line"># Log actions to the terminal</div><div class="line">log = true</div></pre></td></tr></table></figure><h4 id="A-Power-User-Profile"><a href="#A-Power-User-Profile" class="headerlink" title="A Power-User Profile"></a>A Power-User Profile</h4><p>When Unison is used with large replicas, it is often convenient to be able to synchronize just a part of the replicas on a given run (this saves the time of detecting updates in the other parts). This can be accomplished by splitting up the profile into several parts — a common part containing most of the preference settings, plus one “top-level” file for each set of paths that need to be synchronized. (The <code>include</code> mechanism can also be used to allow the same set of preference settings to be used with different roots.)</p><p>The collection of profiles implementing this scheme might look as follows. The file <code>default.prf</code> is empty except for an <code>include</code> directive:</p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line"># Include the contents of the file common</div><div class="line">include common</div></pre></td></tr></table></figure><p>Note that the name of the common file is <code>common</code>, not <code>common.prf</code>; this prevents Unison from offering <code>common</code> as one of the list of profiles in the opening dialog (in the graphical UI).</p><p>The file <code>common</code> contains the real preferences:</p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line"># Roots of the synchronization</div><div class="line">root = /home/bcpierce</div><div class="line">root = ssh://saul//home/bcpierce</div><div class="line"></div><div class="line"># (... other preferences ...)</div><div class="line"></div><div class="line"># If any new preferences are added by Unison (e.g. &apos;ignore&apos;</div><div class="line"># preferences added via the graphical UI), then store them in the</div><div class="line"># file &apos;common&apos; rathen than in the top-level preference file</div><div class="line">addprefsto = common</div><div class="line"></div><div class="line"># Names and paths to ignore:</div><div class="line">ignore = Name temp.*</div><div class="line">ignore = Name *~</div><div class="line">ignore = Name .*~</div><div class="line">ignore = Path */pilot/backup/Archive_*</div><div class="line">ignore = Name *.o</div><div class="line">ignore = Name *.tmp</div></pre></td></tr></table></figure><p>Note that there are no <code>path</code> preferences in <code>common</code>. This means that, when we invoke Unison with the default profile (e.g., by typing <code>unison default</code>or just <code>unison</code> on the command line), the whole replicas will be synchronized. (If we <em>never</em> want to synchronize the whole replicas, then <code>default.prf</code> would instead include settings for all the paths that are usually synchronized.)</p><p>To synchronize just part of the replicas, Unison is invoked with an alternate preference file—e.g., doing <code>unison workingset</code>, where the preference file<code>workingset.prf</code> contains</p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">path = current/papers</div><div class="line">path = Mail/inbox</div><div class="line">path = Mail/drafts</div><div class="line">include common</div></pre></td></tr></table></figure><p>causes Unison to synchronize just the listed subdirectories.</p><p>The <code>key</code> preference can be used in combination with the graphical UI to quickly switch between different sets of paths. For example, if the file <code>mail.prf</code>contains</p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">path = Mail</div><div class="line">batch = true</div><div class="line">key = 2</div><div class="line">include common</div></pre></td></tr></table></figure><p>then pressing 2 will cause Unison to look for updates in the <code>Mail</code> subdirectory and (because the <code>batch</code> flag is set) immediately propagate any that it finds.</p><h3 id="Keeping-Backups"><a href="#Keeping-Backups" class="headerlink" title="Keeping Backups"></a>Keeping Backups</h3><p>When Unison overwrites a file or directory by propagating a new version from the other replica, it can keep the old version around as a backup. There are several preferences that control precisely where these backups are stored and how they are named.</p><p>To enable backups, you must give one or more <code>backup</code> preferences. Each of these has the form <code>backup = &lt;pathspec&gt;</code>where <code>&lt;pathspec&gt;</code> has the same form as for the <code>ignore</code> preference. For example, <code>backup = Name *</code>causes Unison to keep backups of <em>all</em> files and directories. The <code>backupnot</code>preference can be used to give a few exceptions: it specifies which files and directories should <em>not</em> be backed up, even if they match the <code>backup</code> pathspec.</p><p>It is important to note that the <code>pathspec</code> is matched against the path that is being updated by Unison, not its descendants. For example, if you set <code>backup = Name *.txt</code> and then delete a whole directory named <code>foo</code> containing some text files, these files will not be backed up because Unison will just check that <code>foo</code>does not match <code>*.txt</code>. Similarly, if the directory itself happened to be called<code>foo.txt</code>, then the whole directory and all the files in it will be backed up, regardless of their names.</p><p>Backup files can be stored either <em>centrally</em> or <em>locally</em>. This behavior is controlled by the preference <code>backuplocation</code>, whose value must be either <code>central</code>or <code>local</code>. (The default is <code>central</code>.)</p><p>When backups are stored locally, they are kept in the same directory as the original.</p><p>When backups are stored centrally, the directory used to hold them is controlled by the preference <code>backupdir</code> and the environment variable<code>UNISONBACKUPDIR</code>. (The environment variable is checked first.) If neither of these are set, then the directory <code>.unison/backup</code> in the user’s home directory is used.</p><p>The preference <code>maxbackups</code> controls how many previous versions of each file are kept (including the current version).</p><p>By default, backup files are named <code>.bak.VERSION.FILENAME</code>, where <code>FILENAME</code> is the original filename and <code>VERSION</code> is the backup number (1 for the most recent, 2 for the next most recent, etc.). This can be changed by setting the preferences <code>backupprefix</code> and/or <code>backupsuffix</code>. If desired, <code>backupprefix</code> may include a directory prefix; this can be used with <code>backuplocation = local</code> to put all backup files for each directory into a single subdirectory. For example, setting</p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">backuplocation = local</div><div class="line">backupprefix = .unison/$VERSION.</div><div class="line">backupsuffix =</div></pre></td></tr></table></figure><p>will put all backups in a local subdirectory named <code>.unison</code>. Also, note that the string <code>$VERSION</code> in either <code>backupprefix</code> or <code>backupsuffix</code> (it must appear in one or the other) is replaced by the version number. This can be used, for example, to ensure that backup files retain the same extension as the originals.</p><p>For backward compatibility, the <code>backups</code> preference is also supported. It simply means <code>backup = Name *</code> and <code>backuplocation = local</code>.</p><h3 id="Merging-Conflicting-Versions"><a href="#Merging-Conflicting-Versions" class="headerlink" title="Merging Conflicting Versions"></a>Merging Conflicting Versions</h3><p>Unison can invoke external programs to merge conflicting versions of a file. The preference <code>merge</code> controls this process.</p><p>The <code>merge</code> preference may be given once or several times in a preference file (it can also be given on the command line, of course, but this tends to be awkward because of the spaces and special characters involved). Each instance of the preference looks like this:<code>merge = &lt;PATHSPEC&gt; -&gt; &lt;MERGECMD&gt;</code></p><p>The <code>&lt;PATHSPEC&gt;</code> here has exactly the same format as for the <code>ignore</code> preference (see the</p><p>Path specification section). For example, using “<code>Name *.txt</code>” as the<code>&lt;PATHSPEC&gt;</code> tells Unison that this command should be used whenever a file with extension <code>.txt</code> needs to be merged.</p><p>Many external merging programs require as inputs not just the two files that need to be merged, but also a file containing the last <em>synchronized version</em>. You can ask Unison to keep a copy of the last synchronized version for some files using the <code>backupcurrent</code> preference. This preference is used in exactly the same way as <code>backup</code> and its meaning is similar, except that it causes backups to be kept of the <em>current</em> contents of each file after it has been synchronized by Unison, rather than the <em>previous</em> contents that Unison overwrote. These backups are kept on <em>both</em> replicas in the same place as ordinary backup files—i.e. according to the <code>backuplocation</code> and <code>backupdir</code> preferences. They are named like the original files if <code>backupslocation</code></p><p>is set to ‘central’ and otherwise, Unison uses the <code>backupprefix</code> and <code>backupsuffix</code> preferences and assumes a version number 000 for these backups.</p><p>The <code>&lt;MERGECMD&gt;</code> part of the preference specifies what external command should be invoked to merge files at paths matching the <code>&lt;PATHSPEC&gt;</code>. Within this string, several special substrings are recognized; these will be substituted with appropriate values before invoking a sub-shell to execute the command.</p><ul><li><code>CURRENT1</code> is replaced by the name of (a temporary copy of) the local variant of the file.</li><li><code>CURRENT2</code> is replaced by the name of a temporary file, into which the contents of the remote variant of the file have been transferred by Unison prior to performing the merge.</li><li><code>CURRENTARCH</code> is replaced by the name of the backed up copy of the original version of the file (i.e., the file saved by Unison if the current filename matches the path specifications for the <code>backupcurrent</code> preference, as explained above), if one exists. If no archive exists and <code>CURRENTARCH</code>appears in the merge command, then an error is signalled.</li><li><code>CURRENTARCHOPT</code> is replaced by the name of the backed up copy of the original version of the file (i.e., its state at the end of the last successful run of Unison), if one exists, or the empty string if no archive exists.</li><li><code>NEW</code> is replaced by the name of a temporary file that Unison expects to be written by the merge program when it finishes, giving the desired new contents of the file.</li><li><code>PATH</code> is replaced by the path (relative to the roots of the replicas) of the file being merged.</li><li><code>NEW1</code> and <code>NEW2</code> are replaced by the names of temporary files that Unison expects to be written by the merge program when it is only able to partially merge the originals; in this case, <code>NEW1</code> will be written back to the local replica and <code>NEW2</code> to the remote replica; <code>NEWARCH</code>, if present, will be used as the “last common state” of the replicas. (These three options are provided for later compatibility with the Harmony data synchronizer.)</li></ul><p>To accommodate the wide variety of programs that users might want to use for merging, Unison checks for several possible situations when the merge program exits:</p><ul><li>If the merge program exits with a non-zero status, then merge is considered to have failed and the replicas are not changed.</li><li>If the file <code>NEW</code> has been created, it is written back to both replicas (and stored in the backup directory). Similarly, if just the file <code>NEW1</code> has been created, it is written back to both replicas.</li><li>If neither <code>NEW</code> nor <code>NEW1</code> have been created, then Unison examines the temporary files <code>CURRENT1</code> and <code>CURRENT2</code> that were given as inputs to the merge program. If either has been changed (or both have been changed in identical ways), then its new contents are written back to both replicas. If either <code>CURRENT1</code> or <code>CURRENT2</code> has been <em>deleted</em>, then the contents of the other are written back to both replicas.</li><li>If the files <code>NEW1</code>, <code>NEW2</code>, and <code>NEWARCH</code> have all been created, they are written back to the local replica, remote replica, and backup directory, respectively. If the files <code>NEW1</code>, <code>NEW2</code> have been created, but <code>NEWARCH</code> has not, then these files are written back to the local replica and remote replica, respectively. Also, if <code>NEW1</code> and <code>NEW2</code> have identical contents, then the same contents are stored as a backup (if the <code>backupcurrent</code> preference is set for this path) to reflect the fact that the path is currently in sync.</li><li>If <code>NEW1</code> and <code>NEW2</code> (resp. <code>CURRENT1</code> and <code>CURRENT2</code>) are created (resp. overwritten) with different contents but the merge command did not fail (i.e., it exited with status code 0), then we copy <code>NEW1</code> (resp. <code>CURRENT1</code>) to the other replica and to the archive.<br>This behavior is a design choice made to handle the case where a merge command only synchronizes some specific contents between two files, skipping some irrelevant information (order between entries, for instance). We assume that, if the merge command exits normally, then the two resulting files are “as good as equal.” (The reason we copy one on top of the other is to avoid Unison detecting that the files are unequal the next time it is run and trying again to merge them when, in fact, the merge program has already made them as similar as it is able to.)</li></ul><p>If the <code>confirmmerge</code> preference is set and Unison is not run in batch mode, then Unison will always ask for confirmation before actually committing the results of the merge to the replicas.</p><p>A large number of external merging programs are available. For example, on Unix systems setting the <code>merge</code> preference to</p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">merge = Name *.txt -&gt; diff3 -m CURRENT1 CURRENTARCH CURRENT2</div><div class="line">                        &gt; NEW || echo &quot;differences detected&quot;</div></pre></td></tr></table></figure><p>will tell Unison to use the external <code>diff3</code> program for merging. Alternatively, users of <code>emacs</code> may find the following settings convenient:</p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">merge = Name *.txt -&gt; emacs -q --eval &apos;(ediff-merge-files-with-ancestor </div><div class="line">                         &quot;CURRENT1&quot; &quot;CURRENT2&quot; &quot;CURRENTARCH&quot; nil &quot;NEW&quot;)&apos;</div></pre></td></tr></table></figure><p>(These commands are displayed here on two lines to avoid running off the edge of the page. In your preference file, each command should be written on a single line.)</p><p>Users running emacs under windows may find something like this useful:</p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">merge = Name * -&gt; C:\Progra~1\Emacs\emacs\bin\emacs.exe -q --eval</div><div class="line">                         &quot;(ediff-files &quot;&quot;&quot;CURRENT1&quot;&quot;&quot; &quot;&quot;&quot;CURRENT2&quot;&quot;&quot;)&quot;</div></pre></td></tr></table></figure><p>Users running Mac OS X (you may need the Developer Tools installed to get the <em><code>opendiff</code></em> utility) may prefer <code>merge = Name *.txt -&gt; opendiff CURRENT1 CURRENT2 -ancestor CURRENTARCH -merge NEW</code></p><p>Here is a slightly more involved hack. The <em><code>opendiff</code></em> program can operate either with or without an archive file. A merge command of this form</p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">merge = Name *.txt -&gt; </div><div class="line">          if [ CURRENTARCHOPTx = x ]; </div><div class="line">          then opendiff CURRENT1 CURRENT2 -merge NEW; </div><div class="line">          else opendiff CURRENT1 CURRENT2 -ancestor CURRENTARCHOPT -merge NEW; </div><div class="line">          fi</div></pre></td></tr></table></figure><p>(still all on one line in the preference file!) will test whether an archive file exists and use the appropriate variant of the arguments to <code>opendiff</code>.</p><p>Linux users may enjoy this variant:</p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">merge = Name * -&gt; kdiff3 -o NEW CURRENTARCHOPT CURRENT1 CURRENT2</div></pre></td></tr></table></figure><p>Ordinarily, external merge programs are only invoked when Unison is <em>not</em>running in batch mode. To specify an external merge program that should be used no matter the setting of the <code>batch</code> flag, use the <code>mergebatch</code> preference instead of <code>merge</code>.</p><blockquote><p><em>Please post suggestions for other useful values of the <code>merge</code> preference to the <code>unison-users</code> mailing list—we’d like to give several examples here.</em></p></blockquote><h3 id="The-User-Interface"><a href="#The-User-Interface" class="headerlink" title="The User Interface"></a>The User Interface</h3><p>Both the textual and the graphical user interfaces are intended to be mostly self-explanatory. Here are just a few tricks:</p><ul><li>By default, when running on Unix the textual user interface will try to put the terminal into the “raw mode” so that it reads the input a character at a time rather than a line at a time. (This means you can type just the single keystroke “<code>&gt;</code>” to tell Unison to propagate a file from left to right, rather than “<code>&gt;</code> Enter.”)<br>There are some situations, though, where this will not work — for example, when Unison is running in a shell window inside Emacs. Setting the <code>dumbtty</code> preference will force Unison to leave the terminal alone and process input a line at a time.</li></ul><h3 id="Exit-code"><a href="#Exit-code" class="headerlink" title="Exit code"></a>Exit code</h3><p>When running in the textual mode, Unison returns an exit status, which describes whether, and at which level, the synchronization was successful. The exit status could be useful when Unison is invoked from a script. Currently, there are four possible values for the exit status:</p><ul><li>0: successful synchronization; everything is up-to-date now.</li><li>1: some files were skipped, but all file transfers were successful.</li><li>2: non-fatal failures occurred during file transfer.</li><li>3: a fatal error occurred, or the execution was interrupted.</li></ul><p>The graphical interface does not return any useful information through the exit status.</p><h3 id="Path-specification"><a href="#Path-specification" class="headerlink" title="Path specification"></a>Path specification</h3><p>Several Unison preferences (e.g., <code>ignore/ignorenot, follow, sortfirst/sortlast, backup, merge</code> , etc.) specify individual paths or sets of paths. These preferences share a common syntax based on regular-expressions. Each preference is associated with a list of path patterns; the paths specified are those that match any one of the path pattern.</p><ul><li>Pattern preferences can be given on the command line, or, more often, stored in profiles, using the same syntax as other preferences. For example, a profile line of the form<code>ignore = pattern</code>adds<code>pattern</code>to the list of patterns to be ignored.</li><li>Each <em>pattern</em> can have one of three forms. The most general form is a Posix extended regular expression introduced by the keyword <code>Regex</code>. (The collating sequences and character classes of full Posix regexps are not currently supported).<code>Regex *regexp*</code>For convenience, three other styles of pattern are also recognized:<code>Name *name*</code>matches any path in which the last component matches <em>name</em>,<code>Path *path*</code>matches exactly the path <em>path</em>, and<code>BelowPath *path*</code>matches the path <em>path</em> and any path below. The <em>name</em> and <em>path</em>arguments of the latter forms of patterns are <em>not</em> regular expressions. Instead, standard “globbing” conventions can be used in <em>name</em> and <em>path</em>:a <code>*</code> matches any sequence of characters not including <code>/</code> (and not beginning with <code>.</code>, when used at the beginning of a <em>name</em>)a <code>?</code> matches any single character except <code>/</code> (and leading <code>.</code>)<code>[xyz]</code> matches any character from the set {<em>x</em>, <em>y</em>, <em>z</em> }<code>{a,bb,ccc}</code> matches any one of <code>a</code>, <code>bb</code>, or <code>ccc</code>. (Be careful not to put extra spaces after the commas: these will be interpreted literally as part of the strings to be matched!)</li><li>The path separator in path patterns is always the forward-slash character “/” — even when the client or server is running under Windows, where the normal separator character is a backslash. This makes it possible to use the same set of path patterns for both Unix and Windows file systems.</li></ul><p>Some examples of path patterns appear in the Ignoring Paths section.</p><h3 id="Ignoring-Paths"><a href="#Ignoring-Paths" class="headerlink" title="Ignoring Paths"></a>Ignoring Paths</h3><p>Most users of Unison will find that their replicas contain lots of files that they don’t ever want to synchronize — temporary files, very large files, old stuff, architecture-specific binaries, etc. They can instruct Unison to ignore these paths using patterns introduced in the Path Patterns section.</p><p>For example, the following pattern will make Unison ignore any path containing the name <code>CVS</code> or a name ending in <code>.cmo</code>:<code>ignore = Name {CVS,*.cmo}</code></p><p>The next pattern makes Unison ignore the path <code>a/b</code>: <code>ignore = Path a/b</code></p><p>Path patterns do <em>not</em> skip filesnames beginning with <code>.</code> (as Name patterns do). For example,<code>ignore = Path */tmp</code>will include <code>.foo/tmp</code> in the set of ignore directories, as it is a path, not a name, that is ignored.</p><p>The following pattern makes Unison ignore any path beginning with <code>a/b</code> and ending with a name ending by <code>.ml</code>.<code>ignore = Regex a/b/.*\.ml</code></p><p>Note that regular expression patterns are “anchored”: they must match the whole path, not just a substring of the path.</p><p>Here are a few extra points regarding the <code>ignore</code> preference.</p><ul><li>If a directory is ignored, all its descendents will be too.</li><li>The user interface provides some convenient commands for adding new patterns to be ignored. To ignore a particular file, select it and press “i”. To ignore all files with the same extension, select it and press “E” (with the shift key). To ignore all files with the same name, no matter what directory they appear in, select it and press “N”. These new patterns become permanent: they are immediately added to the current profile on disk.</li><li>If you use the <code>include</code> directive to include a common collection of preferences in several top-level preference files, you will probably also want to set the <code>addprefsto</code> preference to the name of this file. This will cause any new ignore patterns that you add from inside Unison to be appended to this file, instead of whichever top-level preference file you started Unison with.</li><li>Ignore patterns can also be specified on the command line, if you like (this is probably not very useful), using an option like <code>-ignore &#39;Name temp.txt&#39;</code>.</li><li>Be careful about renaming directories containing ignored files. Because Unison understands the rename as a delete plus a create, any ignored files in the directory will be lost (since they are invisible to Unison and therefore they do not get recreated in the new version of the directory).</li><li>There is also an <code>ignorenot</code> preference, which specifies a set of patterns for paths that should <em>not</em> be ignored, even if they match an <code>ignore</code>pattern. However, the interaction of these two sets of patterns can be a little tricky. Here is exactly how it works:Unison starts detecting updates from the root of the replicas—i.e., from the empty path. If the empty path matches an <code>ignore</code>pattern and does not match an <code>ignorenot</code> pattern, then the whole replica will be ignored. (For this reason, it is not a good idea to include <code>Name *</code> as an <code>ignore</code> pattern. If you want to ignore everything except a certain set of files, use <code>Name ?*</code>.)If the root is a directory, Unison continues looking for updates in all the immediate children of the root. Again, if the name of some child matches an <code>ignore</code> pattern and does not match an<code>ignorenot</code> pattern, then this whole path <em>including everything below it</em> will be ignored.If any of the non-ignored children are directories, then the process continues recursively.</li></ul><h3 id="Symbolic-Links"><a href="#Symbolic-Links" class="headerlink" title="Symbolic Links"></a>Symbolic Links</h3><p>Ordinarily, Unison treats symbolic links in Unix replicas as “opaque”: it considers the contents of the link to be just the string specifying where the link points, and it will propagate changes in this string to the other replica.</p><p>It is sometimes useful to treat a symbolic link “transparently,” acting as though whatever it points to were physically <em>in</em> the replica at the point where the symbolic link appears. To tell Unison to treat a link in this manner, add a line of the form<code>follow = pathspec</code>to the profile, where <code>pathspec</code> is a path pattern as described in the Path Patterns section.</p><p>Windows file systems do not support symbolic links; Unison will refuse to propagate an opaque symbolic link from Unix to Windows and flag the path as erroneous. When a Unix replica is to be synchronized with a Windows system, all symbolic links should match either an <code>ignore</code> pattern or a <code>follow</code>pattern.</p><h3 id="Permissions"><a href="#Permissions" class="headerlink" title="Permissions"></a>Permissions</h3><p>Synchronizing the permission bits of files is slightly tricky when two different filesytems are involved (e.g., when synchronizing a Windows client and a Unix server). In detail, here’s how it works:</p><ul><li>When the permission bits of an existing file or directory are changed, the values of those bits that make sense on <em>both</em> operating systems will be propagated to the other replica. The other bits will not be changed.</li><li>When a newly created file is propagated to a remote replica, the permission bits that make sense in both operating systems are also propagated. The values of the other bits are set to default values (they are taken from the current umask, if the receiving host is a Unix system).</li><li>For security reasons, the Unix <code>setuid</code> and <code>setgid</code> bits are not propagated.</li><li>The Unix owner and group ids are not propagated. (What would this mean, in general?) All files are created with the owner and group of the server process.</li></ul><h3 id="Cross-Platform-Synchronization"><a href="#Cross-Platform-Synchronization" class="headerlink" title="Cross-Platform Synchronization"></a>Cross-Platform Synchronization</h3><p>If you use Unison to synchronize files between Windows and Unix systems, there are a few special issues to be aware of.</p><p><strong>Case conflicts</strong>. In Unix, filenames are case sensitive: <code>foo</code> and <code>FOO</code> can refer to different files. In Windows, on the other hand, filenames are not case sensitive: <code>foo</code> and <code>FOO</code> can only refer to the same file. This means that a Unix<code>foo</code> and <code>FOO</code> cannot be synchronized onto a Windows system — Windows won’t allow two different files to have the “same” name. Unison detects this situation for you, and reports that it cannot synchronize the files.</p><p>You can deal with a case conflict in a couple of ways. If you need to have both files on the Windows system, your only choice is to rename one of the Unix files to avoid the case conflict, and re-synchronize. If you don’t need the files on the Windows system, you can simply disregard Unison’s warning message, and go ahead with the synchronization; Unison won’t touch those files. If you don’t want to see the warning on each synchronization, you can tell Unison to ignore the files (see the Ignore section).</p><p><strong>Illegal filenames</strong>. Unix allows some filenames that are illegal in Windows. For example, colons (<code>:</code>) are not allowed in Windows filenames, but they are legal in Unix filenames. This means that a Unix file <code>foo:bar</code> can’t be synchronized to a Windows system. As with case conflicts, Unison detects this situation for you, and you have the same options: you can either rename the Unix file and re-synchronize, or you can ignore it.</p><h3 id="Slow-Links"><a href="#Slow-Links" class="headerlink" title="Slow Links"></a>Slow Links</h3><p>Unison is built to run well even over relatively slow links such as modems and DSL connections.</p><p>Unison uses the <code>rsync protocol</code> designed by Andrew Tridgell and Paul Mackerras to greatly speed up transfers of large files in which only small changes have been made. More information about the rsync protocol can be found at the rsync web site (<a href="http://samba.anu.edu.au/rsync/" target="_blank" rel="external">http://samba.anu.edu.au/rsync/</a>).</p><p>If you are using Unison with <code>ssh</code>, you may get some speed improvement by enabling <code>ssh</code>‘s compression feature. Do this by adding the option “<code>-sshargs -C</code>” to the command line or “<code>sshargs = -C</code>” to your profile.</p><h3 id="Making-Unison-Faster-on-Large-Files"><a href="#Making-Unison-Faster-on-Large-Files" class="headerlink" title="Making Unison Faster on Large Files"></a>Making Unison Faster on Large Files</h3><p>Unison’s built-in implementation of the rsync algorithm makes transferring updates to existing files pretty fast. However, for whole-file copies of newly created files, the built-in transfer method is not highly optimized. Also, if Unison is interrupted in the middle of transferring a large file, it will attempt to retransfer the whole thing on the next run.</p><p>These shortcomings can be addressed with a little extra work by telling Unison to use an external file copying utility for whole-file transfers. The recommended one is the standalone <code>rsync</code> tool, which is available by default on most Unix systems and can easily be installed on Windows systems using Cygwin.</p><p>If you have <code>rsync</code> installed on both hosts, you can make Unison use it simply by setting the <code>copythreshold</code> flag to something non-negative. If you set it to 0, Unison will use the external copy utility for <code>all</code> whole-file transfers. (This is probably slower than letting Unison copy small files by itself, but can be useful for testing.) If you set it to a larger value, Unison will use the external utility for all files larger than this size (which is given in kilobytes, so setting it to 1000 will cause the external tool to be used for all transfers larger than a megabyte).</p><p>If you want to use a different external copy utility, set both the <code>copyprog</code> and<code>copyprogpartial</code> preferences—the former is used for the first transfer of a file, while the latter is used when Unison sees a partially transferred temp file on the receiving host. Be careful here: Your external tool needs to be instructed to copy files in place (otherwise if the transfer is interrupted Unison will not notice that some of the data has already been transferred, the next time it tries). The default values are:</p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">copyprog      =   rsync --inplace --compress</div><div class="line">copyprogrest  =   rsync --partial --inplace --compress</div></pre></td></tr></table></figure><p>You may also need to set the <code>copyquoterem</code> preference. When it is set to <code>true</code>, this causes Unison to add an extra layer of quotes to the remote path passed to the external copy program. This is is needed by rsync, for example, which internally uses an ssh connection, requiring an extra level of quoting for paths containing spaces. When this flag is set to <code>default</code>, extra quotes are added if the value of <code>copyprog</code> contains the string <code>rsync</code>. The default value is <code>default</code>, naturally.</p><p>If a <em>directory</em> transfer is interrupted, the next run of Unison will automatically skip any files that were completely transferred before the interruption. (This behavior is always on: it does not depend on the setting of the <code>copythreshold</code> preference.) Note, though, that the new directory will not appear in the destination filesystem until everything has been transferred—partially transferred directories are kept in a temporary location (with names like<code>.unison.DIRNAME....</code>) until the transfer is complete.</p><h3 id="Fast-Update-Detection"><a href="#Fast-Update-Detection" class="headerlink" title="Fast Update Detection"></a>Fast Update Detection</h3><p>If your replicas are large and at least one of them is on a Windows system, you may find that Unison’s default method for detecting changes (which involves scanning the full contents of every file on every sync—the only completely safe way to do it under Windows) is too slow. Unison provides a preference <code>fastcheck</code> that, when set to <code>true</code>, causes it to use file creation times as ‘pseudo inode numbers’ when scanning replicas for updates, instead of reading the full contents of every file.</p><p>When <code>fastcheck</code> is set to <code>no</code>, Unison will perform slow checking—re-scanning the contents of each file on each synchronization—on all replicas. When <code>fastcheck</code>is set to <code>default</code> (which, naturally, is the default), Unison will use fast checks on Unix replicas and slow checks on Windows replicas.</p><p>This strategy may cause Unison to miss propagating an update if the modification time and length of the file are both unchanged by the update. However, Unison will never <em>overwrite</em> such an update with a change from the other replica, since it always does a safe check for updates just before propagating a change. Thus, it is reasonable to use this switch most of the time and occasionally run Unison once with <code>fastcheck</code> set to <code>no</code>, if you are worried that Unison may have overlooked an update.</p><p>Fastcheck is (always) automatically disabled for files with extension <code>.xls</code> or<code>.mpp</code>, to prevent Unison from being confused by the habits of certain programs (Excel, in particular) of updating files without changing their modification times.</p><h3 id="Mount-Points-and-Removable-Media"><a href="#Mount-Points-and-Removable-Media" class="headerlink" title="Mount Points and Removable Media"></a>Mount Points and Removable Media</h3><p>Using Unison removable media such as USB drives can be dangerous unless you are careful. If you synchronize a directory that is stored on removable media when the media is not present, it will look to Unison as though the whole directory has been deleted, and it will proceed to delete the directory from the other replica—probably not what you want!</p><p>To prevent accidents, Unison provides a preference called <code>mountpoint</code>. Including a line like<code>mountpoint = foo</code>in your preference file will cause Unison to check, after it finishes detecting updates, that something actually exists at the path <code>foo</code> on both replicas; if it does not, the Unison run will abort.</p><h3 id="Click-starting-Unison"><a href="#Click-starting-Unison" class="headerlink" title="Click-starting Unison"></a>Click-starting Unison</h3><p>On Windows NT/2k/XP systems, the graphical version of Unison can be invoked directly by clicking on its icon. On Windows 95/98 systems, click-starting also works, <em>as long as you are not using ssh</em>. Due to an incompatibility with ocaml and Windows 95/98 that is not under our control, you must start Unison from a DOS window in Windows 95/98 if you want to use ssh.</p><p>When you click on the Unison icon, two windows will be created: Unison’s regular window, plus a console window, which is used only for giving your password to ssh (if you do not use ssh to connect, you can ignore this window). When your password is requested, you’ll need to activate the console window (e.g., by clicking in it) before typing. If you start Unison from a DOS window, Unison’s regular window will appear and you will type your password in the DOS window you were using.</p><p>To use Unison in this mode, you must first create a profile (see the <a href="http://www.cis.upenn.edu/~bcpierce/unison/download/releases/stable/unison-manual.html#profile" target="_blank" rel="external">Profile</a> section). Use your favorite editor for this.</p><hr><h2 id="安装Ssh"><a href="#安装Ssh" class="headerlink" title="安装Ssh"></a>安装Ssh</h2><p>你的本地主机只需要一个ssh客户端; 远程主机需要一个ssh服务端（或一个守护进程daemon）, 这在 Unix 系统上是可用的. Unison 可以工作的 ssh 版本是 1.2.27 (Unix) 和1.2.14 (Windows); 其他版本<strong>可能</strong>不能用.</p><blockquote><p>如果安装了git，在安装目录的<code>/usr/bin</code>目录下已经包含了ssh程序</p></blockquote><h3 id="Unix"><a href="#Unix" class="headerlink" title="Unix"></a>Unix</h3><p>现代的 Unix一般预装了 <code>ssh</code> .</p><h3 id="Windows-1"><a href="#Windows-1" class="headerlink" title="Windows"></a>Windows</h3><p>很多ssh的 Windows 实现都只有图形界面，但是 Unison 需要一个 能在命令行下运行的ssh 客户端. 可按照下列步骤安装一个合适版本的ssh.</p><ol><li><p>下载一个 <code>ssh</code> 可执行文件<br><strong>Warning</strong>: Windows下现在有许多的 ssh 实现, 并不是所有的都能够 配合Unison使用. 我们使用了Cygwin’s 的 openssh（Cygwin’s port of openssh）和 Unison 一起工作 , 我们建议你首先尝试使用它。下面是安装方法:</p><ul><li><p>首先,创建 一个临时目录来存放安装文件 ，假设此目录名称为 <code>Foo</code>.</p></li><li><p>访问 www.cygwin.com, 点击 “Install now!” 链接， 此操作将会下载一个安装文件, <code>setup-x86.exe</code>（或 <a href="http://www.cygwin.com/setup-x86_64.exe" target="_blank" rel="external">setup-x86_64.exe</a>）; 保存到 <code>Foo</code>. 安装文件 <code>setup-x86_64.exe</code> 是一个小程序，当你运行它时，会从互联网下载真正的安装文件.</p></li><li><p>双击<code>setup.exe</code>，会出现一系列的对话框. 选择 “Install from Internet.” 。“Local Package Directory” 选择 <code>Foo</code>. 对于 “Select install root directory” 我们建议你使用默认的 <code>C:\cygwin</code>. 随后会需要选择连接类型，根据你的网络情况选择。下一步选择一个软件镜像，选择离你最近的一个(如 <a href="http://mirrors.ustc.edu.cn" target="_blank" rel="external">http://mirrors.ustc.edu.cn</a>) .</p><p>接下来会需要你选择需要安装的包. 默认的设置会下载很多对于Unison使用ssh不必要的包. 若你不想安装某个包, 点击使其出现 “skip” . 对于最小化的安装，你只需要选择 “cygwin” 和“openssh,” 大概 1900KB; 而整个安装的话包会大很多.</p><ul><li><em>Note that you are plan to build unison using the free CygWin GNU C compiler, you need to install essential development packages such as “gcc”, “make”, “fileutil”, etc; we refer to the file “INSTALL.win32-cygwin-gnuc” in the source distribution for further details.</em></li></ul></li></ul></li></ol><pre><code>所有包下载和安装完成之后,你可以删除 `Foo` 目录了.有些人报告了使用Cygwin&apos;s ssh 和Unison的一些问题. 如果你遇到麻烦你可以使用另外一个ssh: `  http://linuxmafia.com/ssh/win32.html`
</code></pre><ol><li><p>你必须设置 <code>HOME</code> 和 <code>PATH</code> 环境变量 . Ssh 会在给定的HOME目录下创建一个 <code>.ssh</code> 目录, 从而有地方存放数据，如你的公共和私有密钥. PATH 必须被设置到 Cygwin的 <code>bin</code> 目录, 从而使 Unison 可以找到 ssh 的可执行文件.</p><blockquote><p>安装完成后以<strong>管理员身份</strong>运行cygwin终端，输入<code>ssh-host-config</code>对ssh进行配置</p><p>配置时可以一路选择<code>yes</code>（privilege separation -&gt; no）</p><p>如果出现 <code>Enter the value of CYGWIN for the daemon: []</code></p><p>输入<code>ntsec</code></p><p>出现<code>Info: Host configuration finished. Have fun!</code>之后，输入<code>net start sshd</code>启动ssh服务</p><p>关于HOME环境变量：最好不设置！</p><p>Cygwin确定用户主目录有几个原则，依照顺序确定主目录。首先查看系统的HOME环境变量，其次查看<code>/etc/passwd</code>中为用户设置的主目录。有的软件遵照这个原则，而有些Cygwin应用，如ssh，却没有使用HOME环境变量而直接使用<code>/etc/passwd</code>中的的设置（这会导致<code>ssh-keygen</code> 生成的密钥对文件不会存放到设置的HOME目录(如<code>D:\Programs\SSH</code>，即 <code>/cygdrive/d/Programs/SSH</code>)下，而是其默认目录下，如<code>/home/houzw/.ssh/id_rsa</code>）。要想避免在同一个Cygwin环境下有两个不同的用户主目录设置，可以采用下面两种方法。</p><ul><li><p>方法1：修改Cygwin启动的批处理文件（如：<code>C:\cygwin\Cygwin.bat</code>），在批处理的开头添加如下的一行，就可以清除其他软件为Windows引入的HOME环境变量。<code>set HOME=</code></p><p>此方法时，<code>ssh-keygen</code>还是默认使用的<code>/etc/passwd</code>中的的设置</p></li><li><p>方法2：如果希望使用HOME环境变量指向的主目录，则通过手工编辑<code>/etc/passwd</code>文件，将其中用户主目录修改成HOME环境变量所指向的目录。（<code>ssh-keygen</code>不再使用默认的<code>/etc/passwd</code>中的的设置，但是<code>ssh localhost</code>登录之后仍是其中的路径，没办法免密码登录<code>localhost</code> ？）</p><p>若没有<code>passwd</code>文件，则创建一个：<code>mkpasswd -l &gt; /etc/passwd</code> ，内容会自动生成。</p><p><code>passwd</code>文件每一行内容： <strong>用户名</strong>:<strong>口令</strong>:<strong>用户标识号</strong>:<strong>组标识号</strong>:<strong>注释性描述</strong>:<strong>主目录</strong>:<strong>登录Shell</strong></p><p>将 <code>houzw:*:197608:197121:U-houzw-PC\houzw,S-1-5-21-1228681770-2473699563-3202222160-1000:/home/houzw:/bin/bash</code>中的<code>/home/houzw</code> 修改为<code>/cygdrive/d/Programs/SSH</code></p></li></ul></blockquote></li><li><p>DOS环境下的命令行测试 ssh ，输入 <code>ssh &lt;remote host&gt; -l &lt;login name&gt;</code></p><p>你会得到一个让你输入远程主机密码的提示.</p></li><li><p>注意， <code>ssh-keygen</code> 在某些系统上可能会失败 (报错<code>“gethostname: no such file or directory”</code> ) . 没有关系: 你可以使用ssh 利用密码来连接远程系统.</p></li><li><p>此时应该可以使用ssh连接来使用 Unison. 如果你本地和远程主机的登录用户名不一样, 连接时需要提供远程主机的用户名 (<code>//username@host/path...</code>).</p></li></ol></div></div><div class="copyright"><p><span>本文标题:</span><a href="/2016/11/25/Unison-File-Synchronizer-文件同步使用/">Unison File Synchronizer 文件同步使用</a></p><p><span>文章作者:</span><a href="/" title="回到主页">侯志伟 - houzhiwei</a></p><p><span>发布时间:</span>2016-11-25, 23:21:02</p><p><span>最后更新:</span>2016-12-11, 20:26:31</p><p><span>原始链接:</span><a class="post-url" href="/2016/11/25/Unison-File-Synchronizer-文件同步使用/" title="Unison File Synchronizer 文件同步使用">houzw.github.io.git/2016/11/25/Unison-File-Synchronizer-文件同步使用/</a> <span class="copy-path" data-clipboard-text="原文: houzw.github.io.git/2016/11/25/Unison-File-Synchronizer-文件同步使用/　　作者: 侯志伟 - houzhiwei" title="点击复制文章链接"><i class="fa fa-clipboard"></i></span><script>var clipboard=new Clipboard(".copy-path")</script></p><p><span>许可协议:</span><i class="fa fa-creative-commons"></i> <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" title="CC BY-NC-SA 4.0 International" target="_blank">"署名-非商用-相同方式共享 4.0"</a> 转载请保留原文链接及作者。</p></div><nav id="article-nav"><div id="article-nav-newer" class="article-nav-title"><a href="/2016/11/26/Linux基础/">Linux 学习之2</a></div><div id="article-nav-older" class="article-nav-title"><a href="/2016/11/25/Windows下SSH安装使用/">Windows下SSH安装使用</a></div></nav></article><div id="toc" class="toc-article"><strong class="toc-title">文章目录</strong><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Unison-File-Synchronizer-文件同步使用"><span class="toc-number">1.</span> <span class="toc-text">Unison File Synchronizer 文件同步使用</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#0-概览"><span class="toc-number">1.1.</span> <span class="toc-text">0. 概览</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-下载-Unison"><span class="toc-number">1.2.</span> <span class="toc-text">1. 下载 Unison</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-安装"><span class="toc-number">1.3.</span> <span class="toc-text">2. 安装</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Windows"><span class="toc-number">1.3.0.1.</span> <span class="toc-text">Windows</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Linux"><span class="toc-number">1.3.0.2.</span> <span class="toc-text">Linux</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#升级"><span class="toc-number">1.3.1.</span> <span class="toc-text">升级</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Building-Unison-from-Scratch"><span class="toc-number">1.3.1.1.</span> <span class="toc-text">Building Unison from Scratch</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-使用教程"><span class="toc-number">1.4.</span> <span class="toc-text">3. 使用教程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-本地（单机）使用"><span class="toc-number">1.4.1.</span> <span class="toc-text">3.1. 本地（单机）使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-远程使用"><span class="toc-number">1.4.2.</span> <span class="toc-text">3.2. 远程使用</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Remote-Shell-Method"><span class="toc-number">1.4.2.1.</span> <span class="toc-text">Remote Shell Method</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Socket-Method"><span class="toc-number">1.4.2.2.</span> <span class="toc-text">Socket Method</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-对所有文件使用Unison-Using-Unison-for-All-Your-Files"><span class="toc-number">1.4.3.</span> <span class="toc-text">3.3. 对所有文件使用Unison | Using Unison for All Your Files</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-在两台以上机器上使用Unison-Using-Unison-to-Synchronize-More-Than-Two-Machines"><span class="toc-number">1.4.4.</span> <span class="toc-text">3.4. 在两台以上机器上使用Unison | Using Unison to Synchronize More Than Two Machines</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-5-深入-Going-Further"><span class="toc-number">1.4.5.</span> <span class="toc-text">3.5. 深入 | Going Further</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#基本概念-Basic-Concepts"><span class="toc-number">1.5.</span> <span class="toc-text">基本概念 | Basic Concepts</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Roots"><span class="toc-number">1.5.1.</span> <span class="toc-text">Roots</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Paths"><span class="toc-number">1.5.2.</span> <span class="toc-text">Paths</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Caveats-and-Shortcomings"><span class="toc-number">1.5.3.</span> <span class="toc-text">Caveats and Shortcomings</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#参考指南-Reference-Guide"><span class="toc-number">1.6.</span> <span class="toc-text">参考指南 | Reference Guide</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#运行Unison"><span class="toc-number">1.6.1.</span> <span class="toc-text">运行Unison</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#The-unison-Directory"><span class="toc-number">1.6.2.</span> <span class="toc-text">The.unison Directory</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Archive-Files"><span class="toc-number">1.6.3.</span> <span class="toc-text">Archive Files</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#参数选择-Preferences"><span class="toc-number">1.6.4.</span> <span class="toc-text">参数选择 | Preferences</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Profiles"><span class="toc-number">1.6.5.</span> <span class="toc-text">Profiles</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Sample-Profiles"><span class="toc-number">1.6.6.</span> <span class="toc-text">Sample Profiles</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#最小-Profile"><span class="toc-number">1.6.6.1.</span> <span class="toc-text">最小 Profile</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#基本-Profile"><span class="toc-number">1.6.6.2.</span> <span class="toc-text">基本 Profile</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#A-Power-User-Profile"><span class="toc-number">1.6.6.3.</span> <span class="toc-text">A Power-User Profile</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Keeping-Backups"><span class="toc-number">1.6.7.</span> <span class="toc-text">Keeping Backups</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Merging-Conflicting-Versions"><span class="toc-number">1.6.8.</span> <span class="toc-text">Merging Conflicting Versions</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#The-User-Interface"><span class="toc-number">1.6.9.</span> <span class="toc-text">The User Interface</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Exit-code"><span class="toc-number">1.6.10.</span> <span class="toc-text">Exit code</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Path-specification"><span class="toc-number">1.6.11.</span> <span class="toc-text">Path specification</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Ignoring-Paths"><span class="toc-number">1.6.12.</span> <span class="toc-text">Ignoring Paths</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Symbolic-Links"><span class="toc-number">1.6.13.</span> <span class="toc-text">Symbolic Links</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Permissions"><span class="toc-number">1.6.14.</span> <span class="toc-text">Permissions</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Cross-Platform-Synchronization"><span class="toc-number">1.6.15.</span> <span class="toc-text">Cross-Platform Synchronization</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Slow-Links"><span class="toc-number">1.6.16.</span> <span class="toc-text">Slow Links</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Making-Unison-Faster-on-Large-Files"><span class="toc-number">1.6.17.</span> <span class="toc-text">Making Unison Faster on Large Files</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Fast-Update-Detection"><span class="toc-number">1.6.18.</span> <span class="toc-text">Fast Update Detection</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Mount-Points-and-Removable-Media"><span class="toc-number">1.6.19.</span> <span class="toc-text">Mount Points and Removable Media</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Click-starting-Unison"><span class="toc-number">1.6.20.</span> <span class="toc-text">Click-starting Unison</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#安装Ssh"><span class="toc-number">1.7.</span> <span class="toc-text">安装Ssh</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Unix"><span class="toc-number">1.7.1.</span> <span class="toc-text">Unix</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Windows-1"><span class="toc-number">1.7.2.</span> <span class="toc-text">Windows</span></a></li></ol></li></ol></div><style>.left-col .switch-area,.left-col .switch-btn{display:none}.toc-level-3 i,.toc-level-3 ol{display:none!important}</style><input type="button" id="tocButton" value="隐藏目录" title="点击按钮隐藏或者显示文章目录"><script>yiliaConfig.toc=["隐藏目录","显示目录",!0]</script><div class="share"><div class="bdsharebuttonbox"><a href="#" class="fa fa-twitter bds_twi" data-cmd="twi" title="分享到推特"></a> <a href="#" class="fa fa-weibo bds_tsina" data-cmd="tsina" title="分享到新浪微博"></a> <a href="#" class="fa fa-qq bds_sqq" data-cmd="sqq" title="分享给 QQ 好友"></a> <a href="#" class="fa fa-files-o bds_copy" data-cmd="copy" title="复制网址"></a> <a href="#" class="fa fa fa-envelope-o bds_mail" data-cmd="mail" title="通过邮件分享"></a> <a href="#" class="fa fa-weixin bds_weixin" data-cmd="weixin" title="生成文章二维码"></a> <a href="#" class="fa fa-share-alt bds_more" data-cmd="more"></a></div><script>with(window._bd_share_config={common:{bdSnsKey:{},bdText:"Unison File Synchronizer 文件同步使用　| V make the world smart　",bdMini:"2",bdMiniList:!1,bdPic:"",bdStyle:"0",bdSize:"24"},share:{}},document)(0)[(getElementsByTagName("head")[0]||body).appendChild(createElement("script")).src="http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion="+~(-new Date/36e5)]</script></div><section class="youyan" id="comments"><script>var loadComment=function(){var e=document,a=e.createElement("script");a.src="http://v2.uyan.cc/code/uyan.js?uid=2117097",(e.head||e.body).appendChild(a)}</script><script>loadComment()</script><div id="uyan_frame"></div></section><div class="scroll" id="post-nav-button"><a href="/2016/11/26/Linux基础/" title="上一篇: Linux 学习之2"><i class="fa fa-angle-left"></i> </a><a title="文章列表"><i class="fa fa-bars"></i><i class="fa fa-times"></i></a> <a href="/2016/11/25/Windows下SSH安装使用/" title="下一篇: Windows下SSH安装使用"><i class="fa fa-angle-right"></i></a></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2018/03/13/开源地理信息软件或算法库/">开源地理信息软件或算法库</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/03/13/Data Portal Collection/">Data Portal Collection</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/10/GIS RS  学术期刊/">GIS / RS 主要学术期刊</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/11/24/Spring MVC 接受的请求参数/">Spring MVC 接受的请求参数</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/11/24/Mybatis分页插件PageHelper使用/">Mybatis分页插件PageHelper使用</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/21/52°North-WPS-学习-发布处理服务-01/">52°North-WPS-学习-发布处理服务-01</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/20/52°North-WPS-学习-客户端API教程/">52°North-WPS-学习-客户端API教程</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/27/GeoTools-读取-Geotiff-文件/">GeoTools 读取 Geotiff 文件</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/30/BAT-批处理程序学习/">BAT 批处理程序学习</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/10/使用Jena执行SPARQL的Select和Ask查询/">使用Jena执行SPARQL的Select和Ask查询</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/08/知识图谱-资源收集/">知识图谱-资源收集</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/04/19/GRASS-GIS 下 TOPMODEL 运行/">GRASS GIS 下 TOPMODEL 运行</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/04/11/52°North-WPS-学习/">52°North WPS 学习</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/04/10/Zoo-Project学习-02/">Zoo Project学习 02</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/04/10/CentOS-7-GDAL-源码安装/">CentOS 7 GDAL 源码安装</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/04/08/Linux-目录结构/">Linux 目录结构</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/04/08/Zoo项目学习0/">Zoo项目学习0</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/04/07/Apache-CXF-Web-Service-Development笔记-01/">Apache CXF Web Service Development笔记 01</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/04/05/Activiti-实战笔记/">Activiti 实战笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/31/Vuex-学习/">Vuex 学习</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/30/Mybatis模糊查询/">Ibatis/Mybatis模糊查询</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/30/TauDEM-计算TWI/">TauDEM 计算 TWI</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/22/vue-cli webpack/">vue-cli webpack</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/22/ES6-新特性学习/">ES6 新特性学习</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/15/公共CDN整理/">公共CDN整理</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/15/Openlayers3-01/">Openlayers3-01</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/15/OpenLayers-3-扩展插件/">OpenLayers 3 扩展插件</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/12/科研相关软件工具整理/">科研相关软件工具整理</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/02/GRASS-GIS-手册-命令行启动程序说明/">GRASS GIS 手册 -命令行启动程序说明</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/18/Webpack-从入门到放弃-插件/">Webpack-从入门到放弃 - 插件</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/17/GRASS-GIS-手册：快速入门/">GRASS GIS 手册：快速入门</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/16/Webpack-从入门到放弃-多页面/">Webpack - 从入门到放弃 - 多页面</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/15/Webpack-从入门到放弃/">Webpack：从入门到放弃</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/18/MapServer之安装和基本使用/">MapServer之安装和基本使用</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/11/Crypto-js--Quick-start-Guide/">Crypto-js - Quick-start Guide</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/12/25/空间信息技术3S概述/">空间信息技术——3S概述</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/12/19/MapServer之MapFile学习/">MapServer之MapFile学习</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/12/18/WebService-学习基础-1/">WebService 学习基础-1</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/12/13/SOAP教程/">SOAP教程</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/12/11/跨平台文件同步软件-FreeFileSync使用/">跨平台文件同步软件-FreeFileSync使用</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/12/10/GDAL-Python-学习笔记-1/">GDAL Python 学习笔记-1</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/12/10/TauDEM-命令行使用方法/">TauDEM 命令行使用方法</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/12/06/Windows-下使用VNC连接-CentOS7-桌面/">Windows 下使用VNC连接 CentOS7 桌面</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/12/04/地理空间及空间关系/">地理空间及空间关系</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/12/01/GIS基本概念/">GIS基本概念</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/26/Linux基础/">Linux 学习之2</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/25/Unison-File-Synchronizer-文件同步使用/">Unison File Synchronizer 文件同步使用</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/25/Windows下SSH安装使用/">Windows下SSH安装使用</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/24/WebService-学习基础/">WebService 学习基础-1</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/23/Apache-CXF-配置/">Apache CXF 配置【TBD】</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/23/Apache-CXF-利用spring写一个服务/">Apache-CXF-利用spring写一个服务</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/16/本体编辑器（Ontology Editor）介绍/">本体编辑器（Ontology Editor）</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/14/Header First 设计模式-01-设计模式入门/">Header First 设计模式-01-设计模式入门（To Be Done）</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/05/软件开发规范/">软件开发规范</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/04/Apache Shiro学习 - 5 - Realms/">Apache Shiro学习 - 5 - Realms</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/03/地形因子分类整合/">地形因子分类整合方案</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/31/WSDL 教程/">WSDL 教程 [To be continued]</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/31/Apache CXF 使用 - 04 -简介 -  如何开发一个服务的客户端/">Apache CXF 使用 - 04 -简介 - 如何开发一个服务的客户端</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/31/Apache CXF 使用 - 03 -简介 -  如何开发一个服务/">Apache CXF 使用 - 03 -简介 - 如何开发一个服务</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/31/Apache CXF Web Service开发 - 01/">Apache CXF Web Service开发笔记 - 01</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/26/Apache CXF 使用 - 02 - Maven/">Apache CXF 使用教程 - 02 - Maven</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/26/Apache CXF  使用 - 01/">Apache CXF 使用教程 - 01 - 简介 - CXF与应用程序的整合</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/25/GDAL Python 学习笔记 - 0 - 安装/">GDAL Python 学习笔记 - 0 - 安装</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/20/基于DEM的河网提取流程-1/">基于DEM的水系/河网提取方法、流程学习笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/18/Openlayers-3-01/">OpenLayers3 学习-0-简介</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/18/TauDEM使用-ArcGIS工具箱/">TauDEM使用-ArcGIS工具箱-01</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/18/WPS/">网络地理信息处理服务 Web Processing Service (WPS)</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/10/开源地理空间基金会 OSGeo及相关项目介绍/">开源地理空间基金会 OSGeo简介</a></li></ul><script></script></div><footer id="footer"><div class="outer"><div id="footer-info"><div class="footer-left"><i class="fa fa-copyright"></i> 2016-2018 侯志伟 - houzhiwei</div><div class="footer-right"><a href="http://hexo.io/" target="_blank" title="快速、简洁且高效的博客框架">Hexo</a> Theme <a href="https://github.com/MOxFIVE/hexo-theme-yelee" target="_blank" title="简而不减 Hexo 双栏博客主题  v3.5">Yelee</a> by MOxFIVE <i class="fa fa-heart animated infinite pulse"></i></div></div><div class="visit"><span id="busuanzi_container_site_pv" style="display:none"><span id="site-visit" title="本站到访数"><i class="fa fa-user" aria-hidden="true"></i><span id="busuanzi_value_site_uv"></span> </span></span><span>| </span><span id="busuanzi_container_page_pv" style="display:none"><span id="page-visit" title="本页阅读量"><i class="fa fa-eye animated infinite pulse" aria-hidden="true"></i><span id="busuanzi_value_page_pv"></span></span></span></div></div></footer></div><script data-main="/js/main.js" src="//cdn.bootcss.com/require.js/2.2.0/require.min.js"></script><script>$(document).ready(function(){var a=window.navigator.userAgent.indexOf("iPad");if(a>-1||"none"===$(".left-col").css("display")){var c=["#9db3f4","#414141","#e5a859","#f5dfc6","#c084a0","#847e72","#cd8390","#996731"],e=Math.ceil(Math.random()*(c.length-1));$("body").css({"background-color":c[e],"background-size":"cover"})}else{var d=7,o="url(/background/bg-x.jpg)".replace(/x/gi,Math.ceil(Math.random()*d));$("body").css({background:o,"background-attachment":"fixed","background-size":"cover"})}})</script><div class="scroll" id="scroll"><a href="#" title="返回顶部"><i class="fa fa-arrow-up"></i></a> <a href="#comments" onclick="load$hide()" title="查看评论"><i class="fa fa-comments-o"></i></a> <a href="#footer" title="转到底部"><i class="fa fa-arrow-down"></i></a></div><script>var oOpenInNew={archives:".archive-article-title",miniArchives:"a.post-list-link",friends:"#js-friends a",socail:".social a"};for(var x in oOpenInNew)$(oOpenInNew[x]).attr("target","_blank")</script><script>var originTitle=document.title,titleTime;document.addEventListener("visibilitychange",function(){document.hidden?(document.title="(つェ⊂) 我藏好了哦~ "+originTitle,clearTimeout(titleTime)):(document.title="(*´∇｀*) 被你发现啦~ "+originTitle,titleTime=setTimeout(function(){document.title=originTitle},2e3))})</script><script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body><!-- rebuild by neat -->