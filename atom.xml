<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>V make the world smart</title>
  <subtitle>houzhiwei&#39;s blogs</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="houzw.github.io.git/"/>
  <updated>2018-03-13T08:17:17.636Z</updated>
  <id>houzw.github.io.git/</id>
  
  <author>
    <name>侯志伟 - houzhiwei</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>开源地理信息软件或算法库</title>
    <link href="houzw.github.io.git/2018/03/13/%E5%BC%80%E6%BA%90%E5%9C%B0%E7%90%86%E4%BF%A1%E6%81%AF%E8%BD%AF%E4%BB%B6%E6%88%96%E7%AE%97%E6%B3%95%E5%BA%93/"/>
    <id>houzw.github.io.git/2018/03/13/开源地理信息软件或算法库/</id>
    <published>2018-03-13T08:01:27.000Z</published>
    <updated>2018-03-13T08:17:17.636Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Sun Mar 18 2018 11:22:28 GMT+0800 (中国标准时间) --><h2 id="开源地理信息基金会-OSGEO"><a href="#开源地理信息基金会-OSGEO" class="headerlink" title="开源地理信息基金会 OSGEO"></a>开源地理信息基金会 <a href="http://www.osgeo.org/" target="_blank" rel="external">OSGEO</a></h2><p><img src="https://www.osgeo.org/wp-content/themes/roots/assets/img/logo-osgeo.svg" alt="osgeo"></p><p>包括著名的 GDAL、GRASS GIS、QGIS、GeoServer、OpenLayers、PostGIS、GeoTools、MapServer、GEOS、Geonetwork等</p><h2 id="GSLIB"><a href="#GSLIB" class="headerlink" title="GSLIB"></a><a href="http://www.gslib.com/" target="_blank" rel="external">GSLIB</a></h2><p>GSLIB: Geostatistical Software Library and related software. 地统计及相关软件库</p><ul><li>Point researchers and practitioners to the public-domain GSLIB programs for geostatistical problem solving.</li><li>Provide the latest GSLIB source code and PC executables to download. Bug fixes and frequently asked questions are updated from time to time.</li><li>Inform users of a commercial supplement to GSLIB, <strong>WinGslib</strong>, a Windows interface to GSLIB and related programs.</li><li>Announce training, support, and consultation opportunities. Although GSLIB comes with no support, arrangements will be made on a case-by-case basis.</li></ul><p><img src="http://www.gslib.com/images/logo23.gif" alt="img"> is being maintained by Clayton Deutsch and Emmanuel Schnetzler.</p><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      收集、整理开源的地理信息软件或者算法库，便于后续开发、研究。
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Data Portal Collection</title>
    <link href="houzw.github.io.git/2018/03/13/Data%20Portal%20Collection/"/>
    <id>houzw.github.io.git/2018/03/13/Data Portal Collection/</id>
    <published>2018-03-13T08:01:27.000Z</published>
    <updated>2018-03-18T03:27:44.401Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Sun Mar 18 2018 11:27:55 GMT+0800 (中国标准时间) --><h1 id="Data-Portal-Collection"><a href="#Data-Portal-Collection" class="headerlink" title="Data Portal Collection"></a>Data Portal Collection</h1><blockquote><p>按主要提供的数据类型分</p></blockquote><h1 id="1-综合类"><a href="#1-综合类" class="headerlink" title="1. 综合类"></a>1. 综合类</h1><h2 id="国家地球系统科学数据共享平台"><a href="#国家地球系统科学数据共享平台" class="headerlink" title="国家地球系统科学数据共享平台"></a>国家地球系统科学数据共享平台</h2><p><a href="http://www.geodata.cn/" target="_blank" rel="external">http://www.geodata.cn/</a></p><blockquote><p>申请或直接下载</p></blockquote><p>大气圈、陆地表层、陆地水圈、冰冻圈、自然资源、海洋、极地、固体地球、古环境、日地空间环境与天文、遥感数据</p><h2 id="寒区旱区科学数据中心"><a href="#寒区旱区科学数据中心" class="headerlink" title="寒区旱区科学数据中心"></a>寒区旱区科学数据中心</h2><p><a href="http://westdc.westgis.ac.cn/" target="_blank" rel="external">http://westdc.westgis.ac.cn/</a></p><h2 id="全球变化科学研究数据出版系统"><a href="#全球变化科学研究数据出版系统" class="headerlink" title="全球变化科学研究数据出版系统"></a>全球变化科学研究数据出版系统</h2><p><a href="http://www.geodoi.ac.cn/WebCn/Default.aspx" target="_blank" rel="external">http://www.geodoi.ac.cn/WebCn/Default.aspx</a></p><p>直接下载，发表成果时引用</p><h2 id="中科院资源环境科学数据中心"><a href="#中科院资源环境科学数据中心" class="headerlink" title="中科院资源环境科学数据中心"></a>中科院资源环境科学数据中心</h2><p><a href="http://www.resdc.cn/" target="_blank" rel="external">http://www.resdc.cn/</a></p><blockquote><p>网站VIP会员可以免费下载数据，网站将对会员施行VIP身份认证，通过认证的 VIP会员就可以下载网站的所有数据。</p><p>部分有偿</p></blockquote><p>中国行政区划数据、自然地理分区数据、中国气象要素空间插值数据、中国土地利用数据、中国陆地生态系统宏观结构数据、植被类型数据、土壤数据、社会经济数据、城市空气质量监测数据、中国净第一性生产力NPP数据、高分辨率卫星遥感影像数据、中分辨率卫星遥感影像数据、全球100万基础地理数据、地形地貌数据、中国长时间序列1公里植被指数（NDVI）数据集、中国水系流域空间分布数据集、中国农田生产潜力数据、全球夜间灯光数据</p><h2 id="国家遥感中心-GEO共享数据列表"><a href="#国家遥感中心-GEO共享数据列表" class="headerlink" title="国家遥感中心  GEO共享数据列表"></a>国家遥感中心 GEO共享数据列表</h2><p><a href="http://www.nrscc.gov.cn/nrscc/gjhz/gjdqgczz/gzqkjs/sjgx/geogxsjlb/" target="_blank" rel="external">http://www.nrscc.gov.cn/nrscc/gjhz/gjdqgczz/gzqkjs/sjgx/geogxsjlb/</a></p><blockquote><p>里面列举了<em>近21年表面太阳辐射数据</em>、<em>CEOS陆地表面中分辨率光学影像</em>、<em>全球陆地覆盖地球科学数据</em>（包括SRTM、GTOPO30）、<em>EROS数据服务</em>、<em>全球ASTER G-DEM数据</em>、<em>地球系统图集</em> 等的数据服务地址</p></blockquote><p>###EarthServer</p><p><a href="http://www.earthserver.eu/" target="_blank" rel="external">http://www.earthserver.eu/</a></p><p>Big Earth Data at your fingertips - this is the vision of EarthServer, an intercontinental initiative for unleashing the potential of Big Data through a disruptive paradigm shift in technology:</p><ul><li>from isolated silos of data with disparate functionality towards a single, uniform information space;</li><li>from a difficult, artificial differentiation between data and metadata access to unified retrieval;</li><li>from zillions of files towards few whatever-size datacubes;</li><li>from limited functionality to the freedom of asking anything, anytime, any server in a peer network of data centers worldwide.</li></ul><h2 id="Data-Ordering-Tools-amp-Resources"><a href="#Data-Ordering-Tools-amp-Resources" class="headerlink" title="Data Ordering Tools &amp; Resources"></a>Data Ordering Tools &amp; Resources</h2><p><a href="https://modis.gsfc.nasa.gov/tools/" target="_blank" rel="external">https://modis.gsfc.nasa.gov/tools/</a></p><ul><li><a href="https://lpdaacsvc.cr.usgs.gov/appeears/" target="_blank" rel="external">AppEEARS</a></li><li><a href="http://earthdata.nasa.gov/" target="_blank" rel="external">Earth Data</a></li><li><a href="https://search.earthdata.nasa.gov/" target="_blank" rel="external">Earthdata Search</a></li><li><a href="https://earthexplorer.usgs.gov/" target="_blank" rel="external">USGS EarthExplorer</a></li><li><a href="EOS Clearing House (ECHO">EOS Clearing House (ECHO) / Reverb</a> / Reverb)</li><li><a href="http://giovanni.gsfc.nasa.gov/giovanni/" target="_blank" rel="external">Giovanni</a> 或 <a href="http://disc.sci.gsfc.nasa.gov/giovanni/overview" target="_blank" rel="external">http://disc.sci.gsfc.nasa.gov/giovanni/overview</a></li><li><a href="http://gcmd.gsfc.nasa.gov/" target="_blank" rel="external">Global Change Master Directory (GCMD)</a></li><li><a href="http://hdfeos.org/software/heg.php" target="_blank" rel="external">HDF-EOS to GeoTIFF converter (HEG)</a></li><li><a href="http://www.space-research.org/" target="_blank" rel="external">HDFExplorer</a> &amp; <a href="http://www-loa.univ-lille1.fr/informatique/index.php?lang=us&amp;p=about&amp;app=HDFLook" target="_blank" rel="external">HDFLook</a></li><li><a href="http://www.hdfgroup.org/products/" target="_blank" rel="external">HDF Technologies</a></li><li><a href="https://lpdaac.usgs.gov/data_access/data_pool" target="_blank" rel="external">LP DAAC2Disk Download Manager</a></li><li><a href="http://www.ssec.wisc.edu/mcidas/software/mclite/" target="_blank" rel="external">McIDAS</a></li><li><a href="http://modis-atmos.gsfc.nasa.gov/IMAGES/" target="_blank" rel="external">MODIS Atmosphere Global Browse Images</a></li><li><a href="http://nsidc.org/data/mist/index.html" target="_blank" rel="external">MODIS Interactive Subsetting Tool (MIST)</a></li><li><a href="http://landweb.nascom.nasa.gov/cgi-bin/browse/browse.cgi" target="_blank" rel="external">MODIS Land Global Browse Images</a></li><li><a href="https://lpdaac.usgs.gov/products/modis_products_table" target="_blank" rel="external">MODIS Land QA tutorials</a></li><li><a href="https://ladsweb.nascom.nasa.gov/" target="_blank" rel="external">MODIS Level 1 Atmosphere Archive and Distribution System (LAADS Web)</a></li><li><a href="https://lpdaac.usgs.gov/tools/ldope_tools" target="_blank" rel="external">MODIS LDOPE QA Tools</a></li><li><a href="https://nsidc.org/data/modis/ms2gt/index.html" target="_blank" rel="external">MODIS Swath-to-Grid Toolbox (MS2GT)</a></li><li><a href="https://lpdaac.usgs.gov/tools/modis_reprojection_tool_swath" target="_blank" rel="external">MODIS Swath Reprojection Tool (MRT Swath) and MODIS Reprojection Tool (MRT)</a><br><a href="https://lpdaac.usgs.gov/tools/modis_reprojection_tool" target="_blank" rel="external">https://lpdaac.usgs.gov/tools/modis_reprojection_tool</a></li><li><a href="https://daac.ornl.gov/MODIS/MODIS-menu/modis_webservice.html" target="_blank" rel="external">MODIS Web Service</a></li><li><a href="http://daac.ornl.gov/modisglobal" target="_blank" rel="external">ORNL DAAC MODIS Land Products Subsetting and Visualization Tools</a></li><li><a href="https://earthdata.nasa.gov/labs/worldview/" target="_blank" rel="external">WorldView</a></li></ul><h2 id="Geospatial-Platform"><a href="#Geospatial-Platform" class="headerlink" title="Geospatial Platform"></a>Geospatial Platform</h2><p><a href="https://www.geoplatform.gov/" target="_blank" rel="external">https://www.geoplatform.gov/</a></p><p>The GeoPlatform provides shared and trusted geospatial data, services, and applications for use by the public and by government agencies and partners to meet their mission needs.</p><h2 id="NEO"><a href="#NEO" class="headerlink" title="NEO"></a>NEO</h2><p>NASA Earth Observation</p><p><a href="https://neo.sci.gsfc.nasa.gov/" target="_blank" rel="external">https://neo.sci.gsfc.nasa.gov/</a></p><p>Atmosphere/Energy/Land/Life/Ocean</p><h2 id="NASA-Earth-Observation-Data"><a href="#NASA-Earth-Observation-Data" class="headerlink" title="NASA Earth Observation Data"></a>NASA Earth Observation Data</h2><p><a href="https://earthdata.nasa.gov/earth-observation-data" target="_blank" rel="external">https://earthdata.nasa.gov/earth-observation-data</a></p><p>##NOAA Geospatial Data and Services</p><p><a href="https://maps.ngdc.noaa.gov/" target="_blank" rel="external">https://maps.ngdc.noaa.gov/</a></p><blockquote><p>提供REST、WMS服务</p></blockquote><p>###NOAA CLASS</p><p><a href="https://www.class.ngdc.noaa.gov/saa/products/welcome" target="_blank" rel="external">https://www.class.ngdc.noaa.gov/saa/products/welcome</a></p><p>The Comprehensive Large Array-data Stewardship System (CLASS) is an electronic library of NOAA environmental data. This web site provides capabilities for finding and obtaining those data.</p><p>CLASS is NOAA’s premiere on-line facility for the distribution of NOAA and US Department of Defense (DoD) Polar-orbiting Operational Environmental Satellite (POES) data, NOAA’s Geostationary Operational Environmental Satellite (GOES) data, and derived data.</p><p>###NEODAAS</p><p><a href="https://www.neodaas.ac.uk/" target="_blank" rel="external">https://www.neodaas.ac.uk/</a></p><p>NEODAAS is a unique service providing Earth observation data to support and inform a wide range of scientific sectors, including water quality, meteorology, habitat monitoring, volcano research and monitoring, aquaculture, transport, and recreation.</p><p>###IPUMS Terra</p><p><a href="https://www.terrapop.org/" target="_blank" rel="external">https://www.terrapop.org/</a></p><p>IPUMS Terra integrates population and environmental data across disciplinary scientific domains, enabling research into dramatic transformations of human populations, the environment, and their interactions.</p><p>IPUMS stands for data integrated across time, space and scientific domains. IPUMS makes it easy to study change and conduct comparative research–by imposing consistent codes, supplying detailed documentation, and creating customized datasets. Data and services are available free of charge</p><p>###DataONE</p><p><a href="https://www.dataone.org/" target="_blank" rel="external">https://www.dataone.org/</a></p><p>Data Observation Network for Earth (DataONE) is the foundation of new innovative environmental science through a distributed framework and sustainable cyberinfrastructure that meets the needs of science and society for open, persistent, robust, and secure access to well-described and easily discovered Earth observational data.</p><p>Supported by the U.S. National Science Foundation (Phase 1 Grant <a href="http://nsf.gov/awardsearch/showAward.do?AwardNumber=0830944" target="_blank" rel="external">#ACI-0830944</a>, Phase 2 Grant <a href="http://www.nsf.gov/awardsearch/showAward?AWD_ID=1430508" target="_blank" rel="external">#ACI-1430508</a>) as one of the initial DataNets, DataONE will ensure the preservation, access, use and reuse of multi-scale, multi-discipline, and multi-national science data via three primary cyberinfrastucture elements and a broad education and outreach program.</p><h2 id="GeoNetwork-nodes"><a href="#GeoNetwork-nodes" class="headerlink" title="GeoNetwork nodes"></a>GeoNetwork nodes</h2><p>List of known GeoNetwork opensource based catalogues.</p><p><a href="https://geonetwork-opensource.org/gallery/gallery.html" target="_blank" rel="external">https://geonetwork-opensource.org/gallery/gallery.html</a></p><h1 id="2-GIS-RS-空间数据类"><a href="#2-GIS-RS-空间数据类" class="headerlink" title="2. GIS/RS 空间数据类"></a>2. GIS/RS 空间数据类</h1><h2 id="全国地理信息资源目录服务系统"><a href="#全国地理信息资源目录服务系统" class="headerlink" title="全国地理信息资源目录服务系统"></a>全国地理信息资源目录服务系统</h2><p><a href="http://www.webmap.cn/main.do?method=index" target="_blank" rel="external">http://www.webmap.cn/main.do?method=index</a></p><h3 id="国家测绘地理信息局标准地图服务"><a href="#国家测绘地理信息局标准地图服务" class="headerlink" title="国家测绘地理信息局标准地图服务"></a>国家测绘地理信息局标准地图服务</h3><p><a href="http://bzdt.nasg.gov.cn/index.jsp" target="_blank" rel="external">http://bzdt.nasg.gov.cn/index.jsp</a></p><p>标准地图依据中国和世界各国国界线画法标准编制而成，可用于新闻宣传用图、书刊报纸插图、广告展示背景图、工艺品设计底图等，也可作为编制公开版地图的参考底图。社会公众可以免费浏览、下载标准地图，直接使用标准地图时需要标注审图号。</p><p>标准地图有JPG、EPS两种数据格式，地图幅面分为64开、32开、16开、8开等。需要编辑EPS格式地图时，建议使用Adobe Illustra软件。对地图内容编辑(包括放大、缩小和裁切)改动的，公开使用前需要送测绘地理信息行政主管部门审核。</p><p>目前发布的标准地图包括中国地图83幅，世界地图51幅，专题13幅，中国地图和世界地图自助数据各1幅。</p><h3 id="Global-Data-Explorer"><a href="#Global-Data-Explorer" class="headerlink" title="Global Data Explorer"></a>Global Data Explorer</h3><p><a href="https://gdex.cr.usgs.gov/gdex/" target="_blank" rel="external">https://gdex.cr.usgs.gov/gdex/</a></p><h3 id="GEOSS"><a href="#GEOSS" class="headerlink" title="GEOSS"></a>GEOSS</h3><p><a href="http://www.geoportal.org/" target="_blank" rel="external">http://www.geoportal.org/</a></p><h3 id="National-Geoscience-Data-Centre"><a href="#National-Geoscience-Data-Centre" class="headerlink" title="National Geoscience Data Centre"></a>National Geoscience Data Centre</h3><p><a href="http://www.bgs.ac.uk/services/ngdc/home.html" target="_blank" rel="external">http://www.bgs.ac.uk/services/ngdc/home.html</a></p><h2 id="USGS-Geo-Data-Portal"><a href="#USGS-Geo-Data-Portal" class="headerlink" title="USGS Geo Data Portal"></a>USGS Geo Data Portal</h2><p><a href="https://cida.usgs.gov/gdp/" target="_blank" rel="external">https://cida.usgs.gov/gdp/</a></p><p>The Geo Data Portal (GDP) provides access to numerous datasets, including <strong>gridded data for climate and land use</strong>. Datasets can be subsetted or sumarized before download using several algorithms, and these algorithms can also be applied to other datasets hosted elsewhere.</p><p>Users can interact with the GDP through the tools listed below.</p><p>pyGDP/GDP web/geonife</p><blockquote><p><a href="https://github.com/USGS-CIDA/pyGDP" target="_blank" rel="external">pyGDP</a> provides a fast and efficient way of making calls to the USGS GeoData Portal.</p><p>pyGDP has the following algorithms: - FeatureCategoricalGridCoverage - FeatureWeightedGridStatistics - FeatureCoverageOPenDap - FeatureCoverageWCSIntersection</p><p>Blodgett, David L., Nathaniel L. Booth, Thomas C. Kunicki, Jordan I. Walker, and Roland J. Viger. Description and testing of the Geo Data Portal: Data integration framework and Web processing services for environmental science collaboration. No. 2011-1157. US Geological Survey, 2011.</p></blockquote><h3 id="INSPIRE-GEOPORTAL"><a href="#INSPIRE-GEOPORTAL" class="headerlink" title="INSPIRE GEOPORTAL"></a>INSPIRE GEOPORTAL</h3><p><a href="http://inspire-geoportal.ec.europa.eu/" target="_blank" rel="external">http://inspire-geoportal.ec.europa.eu/</a></p><h2 id="地理空间数据云"><a href="#地理空间数据云" class="headerlink" title="地理空间数据云"></a>地理空间数据云</h2><p><a href="http://www.gscloud.cn/" target="_blank" rel="external">http://www.gscloud.cn/</a></p><p>免费数据包括：</p><ul><li>Landsat系列</li><li>modis陆地标准产品、modis中国合成产品、modis 1b 标准产品</li><li><a href="http://www.gscloud.cn/sources/?cdataid=302&amp;pdataid=10" target="_blank" rel="external">DEM数字高程数据</a></li><li>NOAAA VHRR数据产品</li><li>大气污染插值数据</li><li>Sentinel 数据</li><li>TRMM系列数据</li></ul><h3 id="ASTER-GDEM"><a href="#ASTER-GDEM" class="headerlink" title="ASTER GDEM"></a>ASTER GDEM</h3><p><a href="https://gdex.cr.usgs.gov/gdex/" target="_blank" rel="external">https://gdex.cr.usgs.gov/gdex/</a></p><blockquote><p>也包括SRTM</p></blockquote><h3 id="SRTM"><a href="#SRTM" class="headerlink" title="SRTM"></a>SRTM</h3><p><a href="http://srtm.csi.cgiar.org/" target="_blank" rel="external">http://srtm.csi.cgiar.org/</a></p><p><a href="https://lta.cr.usgs.gov/SRTM" target="_blank" rel="external">https://lta.cr.usgs.gov/SRTM</a></p><h3 id="OpenTopography"><a href="#OpenTopography" class="headerlink" title="OpenTopography"></a>OpenTopography</h3><p><a href="http://www.opentopography.org/developers" target="_blank" rel="external">http://www.opentopography.org/developers</a></p><p><strong>RESTful Web service</strong> for global raster data（SRTM） access</p><h3 id="cgiar-csi-Consortium-for-Spatial-Information"><a href="#cgiar-csi-Consortium-for-Spatial-Information" class="headerlink" title="cgiar-csi |Consortium for Spatial Information"></a>cgiar-csi |<strong>Consortium for Spatial Information</strong></h3><p><a href="http://www.cgiar-csi.org/" target="_blank" rel="external">http://www.cgiar-csi.org/</a></p><p>包含 SRTM 90m</p><p>###Virtual Terrain Project</p><p><a href="http://vterrain.org/" target="_blank" rel="external">http://vterrain.org/</a></p><p>###WFS Geodata Catalog</p><p><a href="https://geoclub.de/wfs/index.php" target="_blank" rel="external">https://geoclub.de/wfs/index.php</a></p><p>Crowdsourced WFS Geodata Catalog</p><h3 id="Google-Maps-API-Elevation-API"><a href="#Google-Maps-API-Elevation-API" class="headerlink" title="Google Maps API - Elevation API"></a>Google Maps API - Elevation API</h3><p><a href="https://developers.google.com/maps/documentation/elevation/intro" target="_blank" rel="external">https://developers.google.com/maps/documentation/elevation/intro</a></p><p>通过一个简单的接口查询地球上各个位置的海拔高度数据。此外，还可以请求路径沿途的抽样海拔高度数据，以便计算路线沿途的海拔高度变化。</p><blockquote><h3 id="Bing-Map-Elevations-API"><a href="#Bing-Map-Elevations-API" class="headerlink" title="Bing Map Elevations API"></a>Bing Map Elevations API</h3><p><a href="https://msdn.microsoft.com/en-us/library/jj158959.aspx" target="_blank" rel="external">https://msdn.microsoft.com/en-us/library/jj158959.aspx</a></p><h3 id="Natural-Resources-Canada-Elevation-API"><a href="#Natural-Resources-Canada-Elevation-API" class="headerlink" title="Natural Resources Canada Elevation API"></a>Natural Resources Canada Elevation API</h3><p><a href="http://geogratis.gc.ca/site/eng/elevation" target="_blank" rel="external">http://geogratis.gc.ca/site/eng/elevation</a></p><p>###MapQuest Open Elevation API</p><p><a href="https://developer.mapquest.com/documentation/open/elevation-api" target="_blank" rel="external">https://developer.mapquest.com/documentation/open/elevation-api</a></p></blockquote><h2 id="MSDIS"><a href="#MSDIS" class="headerlink" title="MSDIS"></a>MSDIS</h2><p><a href="http://msdis.missouri.edu/" target="_blank" rel="external">http://msdis.missouri.edu/</a></p><p><a href="https://modis.ornl.gov/" target="_blank" rel="external">https://modis.ornl.gov/</a></p><p><strong>MSDIS</strong> is responsible for data storage and access, standardization of both digital and tabular data, creation of the data dictionary, compilation of metadata, and statewide GIS user information networks.</p><h4 id="MODIS-WebService"><a href="#MODIS-WebService" class="headerlink" title="MODIS WebService"></a>MODIS WebService</h4><p><a href="https://modis.ornl.gov/data/modis_webservice.html" target="_blank" rel="external">https://modis.ornl.gov/data/modis_webservice.html</a></p><h3 id="WorldDEM"><a href="#WorldDEM" class="headerlink" title="WorldDEM"></a>WorldDEM</h3><p><a href="http://www.intelligence-airbusds.com/worlddem/" target="_blank" rel="external">http://www.intelligence-airbusds.com/worlddem/</a></p><blockquote><p>高精度商业数据</p></blockquote><h2 id="遥感数据"><a href="#遥感数据" class="headerlink" title="遥感数据"></a>遥感数据</h2><p>###Copernicus Open Access Hub</p><p><a href="https://scihub.copernicus.eu/dhus/#/home" target="_blank" rel="external">https://scihub.copernicus.eu/dhus/#/home</a></p><h1 id="3-水文数据"><a href="#3-水文数据" class="headerlink" title="3. 水文数据"></a>3. 水文数据</h1><p>###水利部信息中心（监测数据）</p><p><a href="http://xxzx.mwr.gov.cn/" target="_blank" rel="external">http://xxzx.mwr.gov.cn/</a></p><h3 id="CUAHSI"><a href="#CUAHSI" class="headerlink" title="CUAHSI"></a>CUAHSI</h3><p><a href="http://data.cuahsi.org/" target="_blank" rel="external">http://data.cuahsi.org/</a></p><blockquote><p>提供地图检索、数据WebService</p><p>All Registered Data Services <a href="http://hiscentral.cuahsi.org/pub_services.aspx" target="_blank" rel="external">http://hiscentral.cuahsi.org/pub_services.aspx</a></p></blockquote><h3 id="National-Snow-and-Ice-Data-Center-NSIDC"><a href="#National-Snow-and-Ice-Data-Center-NSIDC" class="headerlink" title="National Snow and Ice Data Center (NSIDC)"></a>National Snow and Ice Data Center (NSIDC)</h3><p><a href="http://nsidc.org" target="_blank" rel="external">http://nsidc.org</a></p><p>The National Snow and Ice Data Center (NSIDC) supports research into our world’s frozen realms: the snow, ice, glaciers, frozen ground, and climate interactions that make up Earth’s cryosphere. NSIDC manages and distributes scientific data, creates tools for data access, supports data users, performs scientific research, and educates the public about the cryosphere.</p><h2 id="great-lakes-observing-system"><a href="#great-lakes-observing-system" class="headerlink" title="great lakes observing system"></a>great lakes observing system</h2><p><a href="https://www.glos.us/" target="_blank" rel="external">https://www.glos.us/</a></p><p>GLOS works to make real-time and historical data publicly available to the larger Great Lakes community, benefiting data users and decision makers</p><h2 id="water-data-portal"><a href="#water-data-portal" class="headerlink" title="water data portal"></a>water data portal</h2><p><a href="http://waterdata.iwmi.org/" target="_blank" rel="external">http://waterdata.iwmi.org/</a></p><p>The International Water Management Institute (IWMI) has been doing research on water for the last 30 years. Being a non-profit research organization all the research outputs and data used for the research are shared with researchers across the globe as a global public goods (GPGs).</p><p>The Water Data Portal (WDP), following “one-stop shop” approach, provides access to a large amount of data related to <strong>water and agriculture</strong>. WDP contains <strong>meteorological, hydrological, socio-economic, spatial data layer, satellite images as well as hydrological model setups.</strong> The data in the WDP, both spatial &amp; non-spatial, are supported by the standardized metadata and are available for download by user including academia, scientists, researchers and decision makers. However, access is provided in compliance with copyrights, intellectual property rights and data agreements with our partners.</p><p>The portal is maintained by GIS, RS and Data Management (GRandD) Unit to facilitate sharing and reuse of data.</p><h3 id="USGS-Water-Services"><a href="#USGS-Water-Services" class="headerlink" title="USGS Water Services"></a>USGS Water Services</h3><p><a href="https://waterservices.usgs.gov/" target="_blank" rel="external">https://waterservices.usgs.gov/</a></p><p>This site serves <a href="http://waterdata.usgs.gov/" target="_blank" rel="external">USGS water data</a> <img src="https://waterservices.usgs.gov/images/extlink.jpeg" alt="External Link"> via automated means using web services and extensible markup language (XML) , as well as other popular media types. Services are invoked with the <strong>REST</strong> protocol. These services designed for high fault tolerance and very high availability.</p><h1 id="4-气象-天气数据"><a href="#4-气象-天气数据" class="headerlink" title="4. 气象/天气数据"></a>4. 气象/天气数据</h1><h3 id="中国气象数据网"><a href="#中国气象数据网" class="headerlink" title="中国气象数据网"></a>中国气象数据网</h3><p><a href="http://data.cma.cn/" target="_blank" rel="external">http://data.cma.cn/</a></p><h3 id="National-Weather-Service"><a href="#National-Weather-Service" class="headerlink" title="National Weather Service"></a>National Weather Service</h3><p><a href="https://www.weather.gov/gis/" target="_blank" rel="external">https://www.weather.gov/gis/</a></p><p>###Climate Data Online</p><p><a href="https://www.ncdc.noaa.gov/cdo-web/" target="_blank" rel="external">https://www.ncdc.noaa.gov/cdo-web/</a></p><h1 id="5-土壤数据"><a href="#5-土壤数据" class="headerlink" title="5. 土壤数据"></a>5. 土壤数据</h1><p>###中国土壤科学数据库</p><p><a href="http://vdb3.soil.csdb.cn/" target="_blank" rel="external">http://vdb3.soil.csdb.cn/</a></p><blockquote><p>开放在线查询或离线申请</p></blockquote><p>土壤资源数据库、肥力数据库、环境数据库、生物数据库、典型地域土壤数据库、重大项目专题数据库</p><p><a href="http://vdb3.soil.csdb.cn/extend/jsp/integrated_database_search" target="_blank" rel="external">中国土种数据库检索</a></p><h3 id="Harmonized-World-Soil-Database"><a href="#Harmonized-World-Soil-Database" class="headerlink" title="Harmonized World Soil Database"></a>Harmonized World Soil Database</h3><p><a href="http://www.fao.org/soils-portal/soil-survey/soil-maps-and-databases/harmonized-world-soil-database-v12/en/" target="_blank" rel="external">http://www.fao.org/soils-portal/soil-survey/soil-maps-and-databases/harmonized-world-soil-database-v12/en/</a></p><p>世界土壤数据库，可直接下载</p><p>###Web Soil Survey</p><p><a href="https://websoilsurvey.sc.egov.usda.gov/App/HomePage.htm" target="_blank" rel="external">https://websoilsurvey.sc.egov.usda.gov/App/HomePage.htm</a></p><p>###UK Soil Observatory (UKSO)</p><p>英国土壤数据检索入口。可以免费下载或通过数据Web服务获取数据</p><p><a href="http://www.ukso.org/home.html" target="_blank" rel="external">http://www.ukso.org/home.html</a></p><h1 id="6-土地覆被"><a href="#6-土地覆被" class="headerlink" title="6. 土地覆被"></a>6. 土地覆被</h1><h3 id="全球30米地表覆盖数据（GlobeLand30）"><a href="#全球30米地表覆盖数据（GlobeLand30）" class="headerlink" title="全球30米地表覆盖数据（GlobeLand30）"></a>全球30米地表覆盖数据（GlobeLand30）</h3><p><a href="http://www.globallandcover.com/GLC30Download/index.aspx" target="_blank" rel="external">http://www.globallandcover.com/GLC30Download/index.aspx</a></p><h3 id="马里兰大学土地覆被数据"><a href="#马里兰大学土地覆被数据" class="headerlink" title="马里兰大学土地覆被数据"></a>马里兰大学土地覆被数据</h3><p><a href="http://glcfapp.glcf.umd.edu:8080/esdi/index.jsp" target="_blank" rel="external">http://glcfapp.glcf.umd.edu:8080/esdi/index.jsp</a></p><h3 id="欧空局-GlobCover"><a href="#欧空局-GlobCover" class="headerlink" title="欧空局 GlobCover"></a>欧空局 <strong>GlobCover</strong></h3><p><a href="http://due.esrin.esa.int/page_globcover.php" target="_blank" rel="external">http://due.esrin.esa.int/page_globcover.php</a></p><h2 id="7-数据处理服务"><a href="#7-数据处理服务" class="headerlink" title="7. 数据处理服务"></a>7. 数据处理服务</h2><h3 id="TerraClip"><a href="#TerraClip" class="headerlink" title="TerraClip"></a>TerraClip</h3><p><a href="https://data.terrapop.org/terraclip" target="_blank" rel="external">https://data.terrapop.org/terraclip</a></p><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      各类空间数据平台收集、整理
    
    </summary>
    
    
      <category term="空间数据" scheme="houzw.github.io.git/tags/%E7%A9%BA%E9%97%B4%E6%95%B0%E6%8D%AE/"/>
    
  </entry>
  
  <entry>
    <title>GIS / RS   主要学术期刊</title>
    <link href="houzw.github.io.git/2017/12/10/GIS%20RS%20%20%E5%AD%A6%E6%9C%AF%E6%9C%9F%E5%88%8A/"/>
    <id>houzw.github.io.git/2017/12/10/GIS RS  学术期刊/</id>
    <published>2017-12-09T16:00:00.000Z</published>
    <updated>2018-03-18T03:21:25.816Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Sun Mar 18 2018 11:22:28 GMT+0800 (中国标准时间) --><h1 id="GIS-RS-主要学术期刊"><a href="#GIS-RS-主要学术期刊" class="headerlink" title="GIS / RS   主要学术期刊"></a>GIS / RS 主要学术期刊</h1><blockquote><p>除特殊说明，影响因子与（中科院）分区都为2016年数据</p><p>（15）表示2015年IF。OA 表示 Open Access，Top 表示 Top 期刊。</p><p>分区指中科院JCR期刊分区，以地学为主，部分属于生态学或环境科学等分区</p></blockquote><table><thead><tr><th>领域</th><th>期刊名称</th><th>SCI/SSCI</th><th>影响因子</th><th>分区</th></tr></thead><tbody><tr><td>地理</td><td>Nature Geosciences</td><td>是 Top</td><td>13.941</td><td>1</td></tr><tr><td>地学</td><td>Earth-Science Reviews</td><td>是 Top</td><td>7.051</td><td>1</td></tr><tr><td>RS</td><td>Remote Sensing of Environment</td><td>是 Top</td><td>6.265</td><td>1</td></tr><tr><td>环境</td><td>Environmental Science &amp; Technology</td><td>是 Top</td><td>6.198</td><td>1</td></tr><tr><td>GIS</td><td>Environmental Modelling &amp; Software <a href="计算机1区，环境科学2区">^1</a></td><td>是 Top</td><td>4.404</td><td>1</td></tr><tr><td>地学</td><td>Geoscience Frontiers [^2]</td><td>是 Top</td><td>4.256</td><td>1</td></tr><tr><td>地学</td><td>Geophysical Research Letters</td><td>是 Top</td><td>4.253</td><td>1</td></tr><tr><td>GIS</td><td>ISPRS Journal of Photogrammetry and Remote Sensing</td><td>是 Top</td><td>6.387</td><td>1</td></tr><tr><td>土壤</td><td>Geoderma<a href="农林科学1区，土壤科学2区">^3</a></td><td>是 Top</td><td>4.036</td><td>1</td></tr><tr><td>GIS</td><td>International Journal of Applied Earth Observation and GeoInformation</td><td>是</td><td>3.930</td><td>2</td></tr><tr><td>GIS</td><td>IEEE Transactions on Geoscience and Remote Sensing</td><td>是</td><td>4.942</td><td>2</td></tr><tr><td>地学</td><td>Geoscientific Model Development</td><td>是</td><td>3.458</td><td>2</td></tr><tr><td>地学</td><td>Journal of Geophysical Research</td><td>是</td><td>3.318（15）</td><td></td></tr><tr><td>RS</td><td>Remote Sensing</td><td>是 / OA</td><td>3.244</td><td>2</td></tr><tr><td>GIS/RS</td><td>GIScience &amp; Remote Sensing</td><td>是</td><td>3.049</td><td>3</td></tr><tr><td>水文</td><td>Hydrological Processes</td><td>是</td><td>3.014</td><td>2</td></tr><tr><td>地理</td><td>Journal of Geographical Sciences<a href="《地理学报》英文版">^4</a></td><td>是</td><td>2.364</td><td>3</td></tr><tr><td>GIS</td><td>International Journal of Digital Earth</td><td>是</td><td>2.292</td><td>2</td></tr><tr><td>地理</td><td>Annals of the Association of American Geographers</td><td>是</td><td>2.756（15）</td><td></td></tr><tr><td>地学</td><td>Progress in Physical Geography</td><td>是</td><td>3.375</td><td>2</td></tr><tr><td>地学</td><td>IEEE Geoscience and Remote Sensing Letters</td><td>是</td><td>2.761</td><td>3</td></tr><tr><td>地理</td><td>Applied Geography</td><td>是</td><td>2.687</td><td></td></tr><tr><td>GIS</td><td>Computers &amp; Geosciences</td><td>是</td><td>2.533</td><td>3</td></tr><tr><td>GIS</td><td>Geoinformatica</td><td>是</td><td>2.392</td><td>4</td></tr><tr><td>生态</td><td>Ecological Modelling</td><td>是</td><td>2.363</td><td>3</td></tr><tr><td>GIS</td><td>Cartography and Geographic Information Science</td><td>是</td><td>2.224（15）</td><td></td></tr><tr><td>GIS</td><td>Computers, Environment and Urban Systems</td><td>是</td><td>2.092（15）</td><td></td></tr><tr><td>GIS</td><td>International Journal of Geographical Information Science</td><td>是</td><td>2.502</td><td>3</td></tr><tr><td>地学</td><td>Science China-Earth Sciences</td><td>是</td><td>1.989</td><td>3</td></tr><tr><td>RS</td><td>International Journal of Remote Sensing</td><td>是</td><td>1.724</td><td>4</td></tr><tr><td>地理</td><td>Geographical Analysis</td><td>是</td><td>1.571（15）</td><td></td></tr><tr><td>GIS</td><td>Transactions in GIS</td><td>是</td><td>2.252</td><td></td></tr><tr><td>GIS</td><td>ISPRS International Journal of Geo-Information</td><td>是 / OA</td><td>1.502</td><td>4</td></tr><tr><td>GIS</td><td>Earth Science Informatics</td><td>是</td><td>1.495</td><td>4</td></tr><tr><td>环境</td><td>Environment and Planning A</td><td>是</td><td>1.460（15）</td><td></td></tr><tr><td>GIS</td><td>Photogrammetric Engineering &amp; Remote Sensing</td><td>是</td><td>1.288（15）</td><td></td></tr><tr><td>GIS</td><td>IEEE Computer Graphics and Applications</td><td>是</td><td>1.367</td><td>3</td></tr><tr><td>环境</td><td>Environment and Planning B</td><td>是</td><td>1.195（15）</td><td></td></tr><tr><td>地学</td><td>Spatial Statistics</td><td>是</td><td>1.176</td><td>4</td></tr><tr><td>地理</td><td>Chinese Geographical Science</td><td>是</td><td>1.154</td><td>4</td></tr><tr><td>RS</td><td>Journal of Applied Remote Sensing</td><td>是</td><td>1.107</td><td>4</td></tr><tr><td>地学</td><td>Journal of Earth System Sciencee</td><td>是</td><td>0.955</td><td>4</td></tr><tr><td>地理</td><td>地理学报</td><td>否</td><td></td><td>—</td></tr><tr><td>地理</td><td>地理科学进展</td><td>否</td><td>3.213</td><td>—</td></tr><tr><td>地理</td><td>地理科学</td><td>否</td><td>2.768</td><td>—</td></tr><tr><td>地理</td><td>地理研究</td><td>否</td><td>2.781</td><td>—</td></tr><tr><td>地学</td><td>测绘学报</td><td>否</td><td>1.581</td><td>—</td></tr><tr><td>地理</td><td>地理与地理信息科学</td><td>否</td><td>0.912</td><td>—</td></tr><tr><td>GIS</td><td>地球信息科学学报</td><td>否</td><td>0.911</td><td>—</td></tr><tr><td>GIS</td><td>武汉大学学报（信息科学版）</td><td>否\</td><td>EI</td><td>0.811</td><td>—</td></tr></tbody></table><blockquote><p>参考：秦承志, 陈旻. 地理信息科学领域国际学术期刊等级的调查分析[J]. 地理学报, 2014, 69(4):566-572.</p></blockquote><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      总结了地理、GIS 和 RS 等相关领域的一些SCI期刊和中文期刊，标注了其16年IF以及JCR分区
    
    </summary>
    
    
      <category term="GIS" scheme="houzw.github.io.git/tags/GIS/"/>
    
      <category term="地理信息系统" scheme="houzw.github.io.git/tags/%E5%9C%B0%E7%90%86%E4%BF%A1%E6%81%AF%E7%B3%BB%E7%BB%9F/"/>
    
  </entry>
  
  <entry>
    <title>Spring MVC 接受的请求参数</title>
    <link href="houzw.github.io.git/2017/11/24/Spring%20MVC%20%E6%8E%A5%E5%8F%97%E7%9A%84%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0/"/>
    <id>houzw.github.io.git/2017/11/24/Spring MVC 接受的请求参数/</id>
    <published>2017-11-24T09:35:04.023Z</published>
    <updated>2017-11-24T09:37:10.332Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Sun Mar 18 2018 11:22:28 GMT+0800 (中国标准时间) --><h1 id="Spring-MVC-接受的请求参数"><a href="#Spring-MVC-接受的请求参数" class="headerlink" title="Spring MVC 接受的请求参数"></a>Spring MVC 接受的请求参数</h1><p>[TOC]</p><h2 id="1-概述"><a href="#1-概述" class="headerlink" title="1. 概述"></a>1. 概述</h2><p>Spring MVC 允许以多种方式将客户端的数据传送到控制器的处理方法中：</p><ul><li>查询参数（Query Parameter）</li><li>表单参数（Form Parameter）</li><li>路径变量（Path Variable）<h2 id="2-详解"><a href="#2-详解" class="headerlink" title="2. 详解"></a>2. 详解</h2><h3 id="2-1-处理查询参数"><a href="#2-1-处理查询参数" class="headerlink" title="2.1 处理查询参数"></a>2.1 处理查询参数</h3><blockquote><p>查询参数都是String类型的，但当绑定到方法参数时会转换为相应的类型</p></blockquote></li></ul><p>在方法中使用 <code>@RequestParam</code>注解，同时可通过<code>defaultValue</code>属性设置当参数不存在时的默认值，如<br></p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">public List&lt;Spittle&gt; spittles( @RequestParam(value=&quot;max&quot;,defaultValue=MAX_LONG_AS_STRING) long max,@RequestParam(value=&quot;count&quot;,defaultValue=&quot;20&quot;) int count )</div><div class="line">// 不设置默认值时</div><div class="line">public List&lt;Spittle&gt; spittles( @RequestParam(&quot;max&quot;) long max,@RequestParam(&quot;count&quot;) int count )</div></pre></td></tr></table></figure><p></p><h3 id="2-2-处理路径参数接受输入"><a href="#2-2-处理路径参数接受输入" class="headerlink" title="2.2 处理路径参数接受输入"></a>2.2 处理路径参数接受输入</h3><ol><li>在<code>@RequestMapping</code>中添加占位符（用{}括起来）表示变量部分，如 <code>@RequestMapping(value=&quot;/{spittleId}&quot;)</code>,这样就能够处理针对“/spittles/123454”的请求。</li><li>在方法参数上添加<code>@PathVariable(&quot;spittleId&quot;)</code> 注解，如<code>public String spittle(@PathVariable(&quot;spittleId&quot;) long spittleId, Model model)</code></li><li>若方法参数名与占位符名称<strong>相同</strong>（都是spittleId），则可去掉<code>@PathVariable</code>的 value 属性：<code>public String spittle(@PathVariable long spittleId, Model model)</code><blockquote><p>此时若修改参数名，需要同步修改占位符名称</p></blockquote></li></ol><h3 id="2-3-处理表单"><a href="#2-3-处理表单" class="headerlink" title="2.3 处理表单"></a>2.3 处理表单</h3><p>使用HTML的<code>&lt;form&gt;</code>标签。</p><blockquote><p>如果form所在视图是通过return 视图名的形式渲染的，那么，form中可以没有action属性。此时，其将提交到与展现是相同的URL路径上。如，访问“/register”得到带form的<code>“/registerForm”</code>视图，则提交form时会提交到“/register”</p></blockquote><p>处理表单提交时，相应的方法参数可以使用<strong>包含与请求参数同名属性的对象</strong>（即对象属性与form中的input的<strong>name</strong>同名。若Spitter对象有属性username，则某个表单域中的name需要为username）<br>若需要对参数进行校验时，可使用Spring对Java Validation API的支持。即对参数使用<code>@Valid</code>注解，并紧跟Errors参数，以便对错误进行处理。<br>具体的校验规则在参数对象中设置，如<br></p><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Spitter</span></span>&#123;</div><div class="line">    <span class="meta">@NotNull</span>   <span class="comment">//所有的注解位于 javax.validation.constraints 包中</span></div><div class="line">    <span class="meta">@Size</span>(min=<span class="number">5</span>,max=<span class="number">16</span>)</div><div class="line">    <span class="keyword">private</span> String username;<span class="comment">//非空，5-16个字符</span></div><div class="line">&#125;</div></pre></td></tr></table></figure><p></p><p>则：<br></p><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> String <span class="title">processRegistration</span><span class="params">(@Valid Spitter spitter, Errors errs)</span></span></div><div class="line">&#123;</div><div class="line">   <span class="keyword">if</span>(errs.hasErrors)&#123;</div><div class="line">       <span class="keyword">return</span> <span class="string">"registerForm"</span>;<span class="comment">//如果校验失败，重新返回表单，避免重复提交</span></div><div class="line">   &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p></p><hr><h2 id="3-补充内容"><a href="#3-补充内容" class="headerlink" title="3. 补充内容"></a>3. 补充内容</h2><blockquote><p>此部分非《Spring 实战》内容</p><h3 id="3-1-Ajax-JSON-输入"><a href="#3-1-Ajax-JSON-输入" class="headerlink" title="3.1 Ajax/JSON 输入"></a>3.1 Ajax/JSON 输入</h3><p><a href="http://blog.csdn.net/oTengYue/article/details/51598277" target="_blank" rel="external">http://blog.csdn.net/oTengYue/article/details/51598277</a><br>请求的<code>Content-Type</code>为<code>application/json</code>，请求数据在request的body中</p><ul><li>不能使用<code>String xxx</code>形式</li><li>不能使用<code>@RequestParam</code></li></ul></blockquote><p><code>@RequestBody</code>注释进行参数传递</p><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="meta">@RequestMapping</span>(value = <span class="string">"buAuth/save1"</span>)</div><div class="line"><span class="meta">@ResponseBody</span></div><div class="line"><span class="function"><span class="keyword">public</span> String <span class="title">save1</span><span class="params">(@RequestBody BuAuth buAuth)</span></span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="string">"SUCCESS"</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>采用<code>@RequestBody</code>标注的参数，SpringMVC 框架底层能够自动完成JSON字符串转对应的Bean并注入到方法参数中，主要是通过使用<code>HandlerAdapter</code> 配置的<code>HttpMessageConverters</code>来解析post data body，然后绑定到相应的bean上的。此时Ajax发送的data值必须为Json字符串，如果Controller中需要映射到自定义Bean对象上上，则必须设置Ajax的contentType为<code>application/json</code>（或<code>application/xml</code>）。这种方式完整举例如下：</p><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line">$.ajax(&#123;</div><div class="line">    <span class="attr">type</span>: <span class="string">"POST"</span>,</div><div class="line">    <span class="attr">url</span>: <span class="string">"$!&#123;_index&#125;/buAuth/save1"</span>,</div><div class="line">    <span class="attr">data</span>:<span class="built_in">JSON</span>.stringify(dataObj) ,<span class="comment">//传递参数必须是Json字符串</span></div><div class="line">    contentType: <span class="string">"application/json; charset=utf-8"</span>,<span class="comment">//必须声明contentType为application/json,否则后台使用@RequestBody标注的话无法解析参数</span></div><div class="line">    dataType: <span class="string">"json"</span>,</div><div class="line">    <span class="attr">success</span>: <span class="function"><span class="keyword">function</span> (<span class="params">response, info</span>) </span>&#123;&#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="meta">@RequestMapping</span>(value = <span class="string">"buAuth/save1"</span>)</div><div class="line"><span class="meta">@ResponseBody</span></div><div class="line"><span class="function"><span class="keyword">public</span> String <span class="title">save1</span><span class="params">(@RequestBody BuAuth buAuth)</span></span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="string">"SUCCESS"</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>注：（1）此时前端直接用<code>$.post()直接请求会有问题，ContentType默认是application/x-www-form-urlencoded</code>。需要使用<code>$.ajaxSetup()</code>标示下ContentType为<code>application/json</code>（或<code>application/xml</code>）。<br></p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">$.ajaxSetup(&#123;ContentType:&quot; application/json&quot;&#125;);</div><div class="line"></div><div class="line">$.post(&quot;$!&#123;_index&#125;/buAuth/save&quot;,&#123;buAuth:JSON.stringify(dataObj),menuIds:menu_ids&#125;,function(result)&#123;&#125;);</div></pre></td></tr></table></figure><p></p><p>（2）可以使用<code>@ResponseBody</code>传递数组，如下举例（做为整理直接引用其他博客例子）</p><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">var</span> saveDataAry=[];</div><div class="line"><span class="keyword">var</span> data1=&#123;<span class="string">"userName"</span>:<span class="string">"test"</span>,<span class="string">"address"</span>:<span class="string">"gz"</span>&#125;;</div><div class="line"><span class="keyword">var</span> data2=&#123;<span class="string">"userName"</span>:<span class="string">"ququ"</span>,<span class="string">"address"</span>:<span class="string">"gr"</span>&#125;;</div><div class="line">saveDataAry.push(data1);</div><div class="line">saveDataAry.push(data2);</div><div class="line">$.ajax(&#123;</div><div class="line">    <span class="attr">type</span>:<span class="string">"POST"</span>,</div><div class="line">    <span class="attr">url</span>:<span class="string">"user/saveUser"</span>,</div><div class="line">    <span class="attr">dataType</span>:<span class="string">"json"</span>,</div><div class="line">    <span class="attr">contentType</span>:<span class="string">"application/json"</span>,</div><div class="line">    <span class="attr">data</span>:<span class="built_in">JSON</span>.stringify(saveData),</div><div class="line">    <span class="attr">success</span>:<span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123; &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="meta">@RequestMapping</span>(value = <span class="string">"saveUser"</span>, method = &#123;RequestMethod.POST &#125;&#125;) </div><div class="line"><span class="meta">@ResponseBody</span>  </div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">saveUser</span><span class="params">(@RequestBody List&lt;User&gt; users)</span> </span>&#123; </div><div class="line">    userService.batchSave(users); </div><div class="line">&#125;</div></pre></td></tr></table></figure><p>（3）Controller中的同一个方法只能使用<code>@ResponseBody</code>标记一个参数。也即是说无法直接通过该方法同时传递多个对象，不过可以间接通过设置一个中间pojo对象（设置不同的属性）来达到传递多个对象的效果。举例如下：<br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> buAuthPage = &#123;</div><div class="line">    <span class="attr">buAuth</span> :   data,</div><div class="line">    <span class="attr">menuInfo</span> : &#123;<span class="attr">code</span>:<span class="string">"100"</span>&#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">$.ajax(&#123;</div><div class="line">    <span class="attr">type</span>: <span class="string">"POST"</span>,</div><div class="line">    <span class="attr">url</span>: <span class="string">"$!&#123;_index&#125;/buAuth/save5"</span>,</div><div class="line">    <span class="attr">data</span>: <span class="built_in">JSON</span>.stringify(buAuthPage),</div><div class="line">    <span class="attr">contentType</span>: <span class="string">"application/json; charset=utf-8"</span>,</div><div class="line">    <span class="attr">dataType</span>: <span class="string">"json"</span>,</div><div class="line">    <span class="attr">success</span>: <span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure><p></p><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BuAuthPage</span> </span>&#123;</div><div class="line">    BuAuth buAuth;</div><div class="line">    <span class="function"><span class="keyword">public</span> BuAuth <span class="title">getBuAuth</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> buAuth;</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setBuAuth</span><span class="params">(BuAuth buAuth)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.buAuth = buAuth;</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">public</span> MenuInfo <span class="title">getMenuInfo</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> menuInfo;</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMenuInfo</span><span class="params">(MenuInfo menuInfo)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.menuInfo = menuInfo;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="meta">@RequestMapping</span>(value = <span class="string">"buAuth/save5"</span>)</div><div class="line"><span class="meta">@ResponseBody</span></div><div class="line"><span class="function"><span class="keyword">public</span> String <span class="title">save5</span><span class="params">(@RequestBody BuAuthPage buAuthPage)</span></span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="string">"SUCCESS"</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>（4）Axios默认的请求数据类型就是<code>application/json</code></p><h3 id="3-2-multipart参数"><a href="#3-2-multipart参数" class="headerlink" title="3.2 multipart参数"></a>3.2 multipart参数</h3><h3 id="3-3-接收-header-数据"><a href="#3-3-接收-header-数据" class="headerlink" title="3.3 接收 header 数据"></a>3.3 接收 header 数据</h3><blockquote><p><a href="http://www.logicbig.com/tutorials/spring-framework/spring-web-mvc/spring-mvc-request-header/" target="_blank" rel="external">http://www.logicbig.com/tutorials/spring-framework/spring-web-mvc/spring-mvc-request-header/</a><br>有时候，需要接收并处理请求头中的数据，此时使用<code>@RequestHeader</code>注解（Controller方法参数）</p></blockquote><p>几种形式：</p><ul><li><code>@RequestHeader(&quot;User-Agent&quot;) String userAgent</code>、 <code>@RequestHeader(&quot;If-Modified-Since&quot;) Date date</code></li><li><code>@RequestHeader(value=&quot;User-Agent&quot;, defaultValue=&quot;foo&quot;) String userAgent</code></li><li><code>@RequestHeader HttpHeaders headers</code></li><li><code>@RequestHeader Map&lt;String, String&gt; header</code></li></ul><blockquote><p>也可以使用<code>HttpServletRequest</code>， <code>request.getHeader(&quot;code&quot;)</code></p></blockquote><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      Spring MVC 开发中控制器接受的请求参数
    
    </summary>
    
    
      <category term="Spring MVC" scheme="houzw.github.io.git/tags/Spring-MVC/"/>
    
  </entry>
  
  <entry>
    <title>Mybatis分页插件PageHelper使用</title>
    <link href="houzw.github.io.git/2017/11/24/Mybatis%E5%88%86%E9%A1%B5%E6%8F%92%E4%BB%B6PageHelper%E4%BD%BF%E7%94%A8/"/>
    <id>houzw.github.io.git/2017/11/24/Mybatis分页插件PageHelper使用/</id>
    <published>2017-11-24T09:35:03.948Z</published>
    <updated>2017-11-24T09:45:53.925Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Sun Mar 18 2018 11:22:28 GMT+0800 (中国标准时间) --><h2 id="Mybatis分页插件PageHelper使用"><a href="#Mybatis分页插件PageHelper使用" class="headerlink" title="Mybatis分页插件PageHelper使用"></a>Mybatis分页插件PageHelper使用</h2><h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><figure class="highlight xml"><table><tr><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"sqlSessionFactory"</span> <span class="attr">class</span>=<span class="string">"org.mybatis.spring.SqlSessionFactoryBean"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"druidDataSource"</span>/&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"configLocation"</span> <span class="attr">value</span>=<span class="string">"classpath:config/mybatis.xml"</span>/&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"mapperLocations"</span> <span class="attr">value</span>=<span class="string">"classpath*:org/egc/cybersolim/xml/*.xml"</span>/&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"typeAliasesPackage"</span> <span class="attr">value</span>=<span class="string">"org.egc.cybersolim.domain"</span>/&gt;</span></div><div class="line">    <span class="comment">&lt;!-- Mybatis_PageHelper 分页插件配置 --&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"plugins"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">array</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"com.github.pagehelper.PageHelper"</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"properties"</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">value</span>&gt;</span></div><div class="line">                        dialect=postgresql</div><div class="line">                        offsetAsPageNum=true</div><div class="line">                        rowBoundsWithCount=true</div><div class="line">                        reasonable=true</div><div class="line">                    <span class="tag">&lt;/<span class="name">value</span>&gt;</span></div><div class="line">                <span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">array</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div></pre></td></tr></table></figure><h2 id="使用实例"><a href="#使用实例" class="headerlink" title="使用实例"></a>使用实例</h2><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="meta">@RequestMapping</span>(<span class="string">"queryByType"</span>)</div><div class="line"><span class="function"><span class="keyword">public</span> Map&lt;String, Object&gt; <span class="title">queryByType</span><span class="params">(@RequestParam(<span class="string">"types[]"</span>)</span> String[] types, Integer limit, Integer offset, String order)</span></div><div class="line">    &#123;</div><div class="line">        String querytype = <span class="string">""</span>;</div><div class="line">        <span class="keyword">for</span> (String type : types) &#123;</div><div class="line">            <span class="keyword">if</span> (Strings.isNullOrEmpty(type))</div><div class="line">                <span class="keyword">continue</span>;</div><div class="line">            <span class="keyword">else</span></div><div class="line">                querytype = type;</div><div class="line">        &#125;</div><div class="line">        PageHelper.startPage(offset / limit + <span class="number">1</span>, limit);</div><div class="line">        List&lt;Res&gt; list = resService.queryByParentCode(querytype);</div><div class="line">        PageInfo pageInfo = <span class="keyword">new</span> PageInfo(list);<span class="comment">//分页信息</span></div><div class="line">        DataTable dt = <span class="keyword">new</span> DataTable(list, pageInfo.getTotal());</div><div class="line">        dt.setPageNumber(pageInfo.getPageNum());</div><div class="line">        dt.setPageSize(pageInfo.getPageSize());</div><div class="line">        dt.setSortOrder(order);</div><div class="line">        Map&lt;String, Object&gt; result = dt.getDataMap();</div><div class="line">        <span class="keyword">return</span> result;</div><div class="line">    &#125;</div></pre></td></tr></table></figure><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      简单介绍Mybatis分页插件PageHelper的使用 
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>52°North-WPS-学习-发布处理服务-01</title>
    <link href="houzw.github.io.git/2017/08/21/52%C2%B0North-WPS-%E5%AD%A6%E4%B9%A0-%E5%8F%91%E5%B8%83%E5%A4%84%E7%90%86%E6%9C%8D%E5%8A%A1-01/"/>
    <id>houzw.github.io.git/2017/08/21/52°North-WPS-学习-发布处理服务-01/</id>
    <published>2017-08-21T02:03:02.000Z</published>
    <updated>2017-09-15T01:01:07.802Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Sun Mar 18 2018 11:22:27 GMT+0800 (中国标准时间) --><h1 id="52°North-WPS-学习-发布处理服务-01"><a href="#52°North-WPS-学习-发布处理服务-01" class="headerlink" title="52°North-WPS-学习-发布处理服务-01"></a>52°North-WPS-学习-发布处理服务-01</h1><blockquote><p><a href="https://wiki.52north.org/Geoprocessing/TutorialProcessDevelopmentKit" target="_blank" rel="external">使用 52°North WPS-Extension-Skeleton开发自定义处理过程</a></p><p>WPS-Extension-Skeleton 项目的 <a href="https://github.com/52North/WPS-Extension-Skeleton" target="_blank" rel="external">GitHub</a></p></blockquote><h3 id="使用Maven"><a href="#使用Maven" class="headerlink" title="使用Maven"></a>使用Maven</h3><p>项目POM文件</p><figure class="highlight xml"><table><tr><td class="code"><pre><div class="line"> <span class="tag">&lt;<span class="name">properties</span>&gt;</span></div><div class="line">     <span class="tag">&lt;<span class="name">n52-wps.version</span>&gt;</span>3.6.1<span class="tag">&lt;/<span class="name">n52-wps.version</span>&gt;</span></div><div class="line">     <span class="tag">&lt;<span class="name">slf4j.version</span>&gt;</span>1.7.25<span class="tag">&lt;/<span class="name">slf4j.version</span>&gt;</span></div><div class="line"> <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></div><div class="line"> <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></div><div class="line">     <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">         <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>ch.qos.logback<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">         <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>logback-classic<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">         <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">         <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></div><div class="line">     <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line">     <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">         <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">         <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">         <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">         <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></div><div class="line">     <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line">     <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">         <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">         <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>slf4j-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">         <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;slf4j.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">         <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></div><div class="line">     <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line">     <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">         <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">         <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j-over-slf4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">         <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;slf4j.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">         <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></div><div class="line">     <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line">     <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">         <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">         <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jul-to-slf4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">         <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;slf4j.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">         <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></div><div class="line">     <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line">     <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">         <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">         <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jcl-over-slf4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">         <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;slf4j.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">         <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></div><div class="line">     <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line">     <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">         <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.n52.wps<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">         <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>52n-wps-io<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">         <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;n52-wps.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">     <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line">   	<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">         <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.n52.wps<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">         <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>52n-wps-io-geotools<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">         <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;n52-wps.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">     <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line">     <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">         <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.n52.wps<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">         <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>52n-wps-algorithm<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">         <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;n52-wps.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">     <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line"> <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">repositories</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">repository</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">id</span>&gt;</span>n52-releases<span class="tag">&lt;/<span class="name">id</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">name</span>&gt;</span>n52-releases<span class="tag">&lt;/<span class="name">name</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://52north.org/maven/repo/releases/<span class="tag">&lt;/<span class="name">url</span>&gt;</span></div><div class="line">   <span class="tag">&lt;/<span class="name">repository</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">repositories</span>&gt;</span></div></pre></td></tr></table></figure><h3 id="要求"><a href="#要求" class="headerlink" title="要求"></a>要求</h3><p>确保项目pom文件中WPS模块的版本与需要使用的WPS版本相匹配</p><h2 id="扩展WPS-扩展抽象自描述算法"><a href="#扩展WPS-扩展抽象自描述算法" class="headerlink" title="扩展WPS-扩展抽象自描述算法"></a>扩展WPS-扩展抽象自描述算法</h2><blockquote><p><a href="https://wiki.52north.org/Geoprocessing/ExtendAbstractSelfDescribingAlgorithm" target="_blank" rel="external">Extend AbstractSelfDescribingAlgorithm</a></p></blockquote><p>此部分内容说明如何在52°North WPS中使用一个java文件开发和部署一个自定义处理过程。此过程将会生成一个 ProcessDescription 文件。注意，支持所选定的DataBinding 的所有Parsers/Generators的格式将会被添加到 ProcessDescription 文件中。如果你需要控制你的算法所支持的格式类型，你需要选择使用 <a href="https://wiki.52north.org/Geoprocessing/ExtendAbstractAlgorithm" target="_blank" rel="external">AbstractAlgorithm</a>，AbstractSelfDescribingAlgorithm 对ProcessDescription的某些特定元素有所限制。例如，你不能指定处理（process）的标题和摘要。如果需要更多的控制，可以 <a href="https://wiki.52north.org/Geoprocessing/ExtendAbstractAnnotatedAlgorithm" target="_blank" rel="external">继承 AbstractAnnotatedAlgorithm</a>.</p><h2 id="开发"><a href="#开发" class="headerlink" title="开发"></a>开发</h2><h3 id="创建自定义处理文件"><a href="#创建自定义处理文件" class="headerlink" title="创建自定义处理文件"></a>创建自定义处理文件</h3><ol><li>新建 package: <code>org.n52.wps.demo</code></li><li>新建Class <code>ConvexHullDemo</code></li><li>使新类继承 <code>AbstractSelfDescribingAlgorithm</code></li></ol><h3 id="实现处理"><a href="#实现处理" class="headerlink" title="实现处理"></a>实现处理</h3><p>继承 <code>AbstractSelfDescribingAlgorithm</code>之后，需要实现5个方法</p><ol><li><code>public List getInputIdentifiers()</code></li></ol><p>此方法给出所有<strong>输入数据</strong>的标识符列表。因为我们实现的是ConvexHull 算法，因此只需要 几何要素类型的数据。定义标识符为“<em>FEATURES</em>”</p><figure class="highlight java"><table><tr><td class="code"><pre><div class="line">List&lt;String&gt; list = <span class="keyword">new</span> ArrayList();</div><div class="line">list.add(<span class="string">"FEATURES"</span>);</div><div class="line"><span class="keyword">return</span> list;</div></pre></td></tr></table></figure><ol><li><code>public List getOutputIdentifiers()</code></li></ol><p>此方法给出所有产生的<strong>输出数据</strong>的标识符列表。ConvexHull 算法生成多边形，因此命名数据标识符为“polygons”</p><figure class="highlight java"><table><tr><td class="code"><pre><div class="line">List&lt;String&gt; list = <span class="keyword">new</span> ArrayList();</div><div class="line">list.add(<span class="string">"polygons"</span>);</div><div class="line"><span class="keyword">return</span> list;</div></pre></td></tr></table></figure><ol><li><code>public Class getInputDataType(String identifier)</code></li></ol><p>此方法列出指定输入数据标识符的所有输入数据类型。此例中，输入数据为<em>FEATURES</em>，输出类型必须是特定的绑定<em>binding</em>。</p><p>由于我们想使用 JTS 中支持Geotools 特性的算法, 因而使用 GTVectorDataBinding 并返回:</p><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="keyword">if</span> (identifier.equalsIgnoreCase(<span class="string">"FEATURES"</span>)) &#123;</div><div class="line">        <span class="keyword">return</span> GTVectorDataBinding.class;</div><div class="line">&#125;</div><div class="line"><span class="keyword">return</span> <span class="keyword">null</span>;</div></pre></td></tr></table></figure><ol><li><code>public Class getOutputDataType(String identifier)</code></li></ol><p>此方法列出给定输出数据标识符的所有输出数据类型。在本例中，输出数据为<em>polygons</em>，此外亦知JTS输出GeoTools要素，因此</p><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="keyword">if</span> (identifier.equalsIgnoreCase(<span class="string">"polygons"</span>)) &#123;</div><div class="line">        <span class="keyword">return</span> GTVectorDataBinding.class;</div><div class="line">&#125; </div><div class="line"><span class="keyword">return</span> <span class="keyword">null</span>;</div></pre></td></tr></table></figure><ol><li><p><code>public Map&lt;String, IData&gt; run(Map&lt;String, List&lt;IData&gt;&gt; inputData)</code></p><p>此方法处理业务逻辑。首先检查所有输入数据是否已准备：</p><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="keyword">if</span> (inputData == <span class="keyword">null</span> || !inputData.containsKey(<span class="string">"FEATURES"</span>)) &#123;</div><div class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"Error while allocating input parameters"</span>);</div><div class="line">&#125;</div><div class="line">List&lt;IData&gt; dataList = inputData.get(<span class="string">"FEATURES"</span>);</div><div class="line"><span class="keyword">if</span> (dataList == <span class="keyword">null</span> || dataList.size() != <span class="number">1</span>) &#123;</div><div class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"Error while allocating input parameters"</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>然后获取Geotools 要素集合：</p><figure class="highlight java"><table><tr><td class="code"><pre><div class="line">IData firstInputData = dataList.get(<span class="number">0</span>);</div><div class="line">FeatureCollection featureCollection = ((GTVectorDataBinding) firstInputData).getPayload();</div></pre></td></tr></table></figure><p>迭代所有要素以获取所有的坐标信息，存储在coordinateList列表中</p><figure class="highlight java"><table><tr><td class="code"><pre><div class="line">FeatureIterator iter = featureCollection.features();</div><div class="line">List&lt;Coordinate&gt; coordinateList = <span class="keyword">new</span> ArrayList&lt;Coordinate&gt;();</div><div class="line"><span class="keyword">int</span> counter = <span class="number">0</span>;</div><div class="line"><span class="keyword">while</span> (iter.hasNext()) &#123;</div><div class="line">      SimpleFeature feature = (SimpleFeature) iter.next();</div><div class="line">      <span class="keyword">if</span> (feature.getDefaultGeometry() == <span class="keyword">null</span>) &#123;</div><div class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> NullPointerException(<span class="string">"defaultGeometry is null in feature id: "</span>+ feature.getID());</div><div class="line">          &#125;</div><div class="line">        Geometry geom = (Geometry) feature.getDefaultGeometry();</div><div class="line">        Coordinate[] coordinateArray = geom.getCoordinates();</div><div class="line">        <span class="keyword">for</span>(Coordinate coordinate : coordinateArray)&#123;</div><div class="line">              coordinateList.add(coordinate);</div><div class="line">         &#125;</div><div class="line">&#125;</div><div class="line">iter.close();</div></pre></td></tr></table></figure><p>下一步，将coordinateList转为数组，以作为JTS中函数的输入</p><figure class="highlight java"><table><tr><td class="code"><pre><div class="line">Coordinate[] coordinateArray = <span class="keyword">new</span> Coordinate[coordinateList.size()];</div><div class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;coordinateList.size(); i++)&#123;</div><div class="line">        coordinateArray[i] = coordinateList.get(i);</div><div class="line">&#125;</div><div class="line">com.vividsolutions.jts.algorithm.ConvexHull convexHull = <span class="keyword">new</span> com.vividsolutions.jts.algorithm.ConvexHull(coordinateArray, <span class="keyword">new</span> GeometryFactory());</div><div class="line">Geometry geometry = convexHull.getConvexHull();</div></pre></td></tr></table></figure><p>同时使用生成的geometry新建Geotools要素</p><figure class="highlight java"><table><tr><td class="code"><pre><div class="line">String uuid = UUID.randomUUID().toString();</div><div class="line">SimpleFeatureType featureType = GTHelper.createFeatureType(geometry, uuid, featureCollection.getSchema().getCoordinateReferenceSystem());</div><div class="line">GTHelper.createGML3SchemaForFeatureType(featureType);</div><div class="line">Feature feature = GTHelper.createFeature(<span class="string">"0"</span>, geometry, featureType);</div></pre></td></tr></table></figure><p>然后新建要素集合，并将上面的结果添加到里面</p><figure class="highlight java"><table><tr><td class="code"><pre><div class="line">SimpleFeatureCollection fOut = DefaultFeatureCollections.newCollection();</div><div class="line">fOut.add((SimpleFeature) feature);</div></pre></td></tr></table></figure><p>最后的步骤是创建一个标准的输出hashmap，以输出标识符为key，以一个IData对象（此例中为GTVectordataBinding）为value。</p><figure class="highlight java"><table><tr><td class="code"><pre><div class="line">HashMap&lt;String, IData&gt; result = <span class="keyword">new</span> HashMap&lt;String, IData&gt;();</div><div class="line">result.put(<span class="string">"polygons"</span>, <span class="keyword">new</span> GTVectorDataBinding(fOut));</div><div class="line"><span class="keyword">return</span> result;</div></pre></td></tr></table></figure></li></ol><h2 id="发布处理服务"><a href="#发布处理服务" class="headerlink" title="发布处理服务"></a>发布处理服务</h2><h2 id="1-使用管理控制台发布处理服务"><a href="#1-使用管理控制台发布处理服务" class="headerlink" title="1. 使用管理控制台发布处理服务"></a>1. 使用管理控制台发布处理服务</h2><blockquote><p>原文中包含图片说明</p><p><a href="https://wiki.52north.org/Geoprocessing/DeployProcessViaAdminConsole" target="_blank" rel="external">https://wiki.52north.org/Geoprocessing/DeployProcessViaAdminConsole</a></p></blockquote><h4 id="打开管理控制台"><a href="#打开管理控制台" class="headerlink" title="打开管理控制台"></a>打开管理控制台</h4><ul><li>确认servlet容器（如tomcat）已经运行</li><li>浏览器中打开<a href="http://localhost:8080/wps/" target="_blank" rel="external">http://localhost:8080/wps/</a></li><li>点击52°North <strong>WPS Web Admin Console</strong> 或 直接 <a href="http://localhost:8080/wps/webAdmin/index.jsp" target="_blank" rel="external">http://localhost:8080/wps/webAdmin/index.jsp</a></li><li>以用户名 <em>wps</em> 和密码 <em>wps</em> 登录</li></ul><h4 id="上传处理文件"><a href="#上传处理文件" class="headerlink" title="上传处理文件"></a>上传处理文件</h4><ul><li>单击<strong>Upload Process</strong></li><li>在弹出的对话框中，在第一个文本框中输入开发的java处理程序的完整限定名, e.g.: <code>org.n52.wps.demo.AbstractAlgorithmExample</code></li><li>根据说明选择实现类 java 文件</li><li>若实现类继承自 AbstractAlgorithm，那么还需要指定ProcessDescription 文件的路径</li><li>点击 <strong>Send files</strong>.</li><li>源码文件将会在服务后台编译，并成为一个新的WPS服务. 注意，jdk需要为6或7</li></ul><h4 id="激活处理服务"><a href="#激活处理服务" class="headerlink" title="激活处理服务"></a>激活处理服务</h4><ul><li>切换到 <strong>Algorithm Repositories</strong> 选项卡</li><li>滚动到LocalAlgorithmReporitory</li><li>点击算法仓库中最后一个算法下面的<strong>加号</strong></li><li>添加key 为<strong>Algorithm</strong> ，值为处理类的全限定名，如<code>org.n52.wps.demo.AbstractAlgorithmExample</code></li><li>点击<strong>save</strong></li><li>点击<strong>Save and Activate Configuration</strong></li><li>新建的处理服务将会出现在<a href="http://localhost:8080/wps/WebProcessingService?Request=GetCapabilities&amp;Service=WPS" target="_blank" rel="external">http://localhost:8080/wps/WebProcessingService?Request=GetCapabilities&amp;Service=WPS</a> 列表中</li></ul><h3 id="2-使用打包的jar文件发布一个或多个服务"><a href="#2-使用打包的jar文件发布一个或多个服务" class="headerlink" title="2. 使用打包的jar文件发布一个或多个服务"></a>2. 使用打包的jar文件发布一个或多个服务</h3><blockquote><p><a href="https://wiki.52north.org/Geoprocessing/DeployProcessesViaJarFile" target="_blank" rel="external">https://wiki.52north.org/Geoprocessing/DeployProcessesViaJarFile</a></p></blockquote><h4 id="将jar文件添加到WPS库"><a href="#将jar文件添加到WPS库" class="headerlink" title="将jar文件添加到WPS库"></a>将jar文件添加到WPS库</h4><p>定位到 <code>%PATH_TO_WPS_WEBAPP%/WEB-INF/lib</code>，然后将jar文件拷贝进去</p><h4 id="在WPS中激活处理服务"><a href="#在WPS中激活处理服务" class="headerlink" title="在WPS中激活处理服务"></a>在WPS中激活处理服务</h4><p>若你将处理服务的实现类的全限定名添加到了<code>org.n52.wps.server.IAlgorithm</code>文件中， 那么不需要额外的操作，处理服务会自动添加到WPS中。</p><p>若需要使处理服务失效，需要disable <code>ServiceLoaderAlgorithmRepository</code> 或者直接从<code>lib</code>中移除对应的jar文件。</p><p>若没有使用ServiceLoaderAlgorithmRepository，那么你需要手动添加处理服务到WPS配置：</p><ul><li>登录到管理控制台<a href="http://localhost:8080/wps/webAdmin/index.jsp" target="_blank" rel="external">http://localhost:8080/wps/webAdmin/index.jsp</a></li><li>按照上面的<strong>激活处理服务</strong>操作</li></ul><h2 id="执行发布的服务"><a href="#执行发布的服务" class="headerlink" title="执行发布的服务"></a>执行发布的服务</h2><ul><li>使用内置的 XML 客户端</li><li>使用<a href="https://wiki.52north.org/Geoprocessing/TutorialClientAPI" target="_blank" rel="external">客户端 API</a></li><li>使用 ArcMap 客户端</li></ul><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
       
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>52°North-WPS-学习-客户端API教程</title>
    <link href="houzw.github.io.git/2017/08/20/52%C2%B0North-WPS-%E5%AD%A6%E4%B9%A0-%E5%AE%A2%E6%88%B7%E7%AB%AFAPI%E6%95%99%E7%A8%8B/"/>
    <id>houzw.github.io.git/2017/08/20/52°North-WPS-学习-客户端API教程/</id>
    <published>2017-08-20T08:40:01.000Z</published>
    <updated>2017-08-21T14:47:45.508Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Sun Mar 18 2018 11:22:28 GMT+0800 (中国标准时间) --><h1 id="52°North-WPS-学习-客户端API教程"><a href="#52°North-WPS-学习-客户端API教程" class="headerlink" title="52°North-WPS-学习-客户端API教程"></a>52°North-WPS-学习-客户端API教程</h1><blockquote><p><a href="https://wiki.52north.org/Geoprocessing/TutorialClientAPI" target="_blank" rel="external">https://wiki.52north.org/Geoprocessing/TutorialClientAPI</a></p></blockquote><h2 id="1-获取SDK-maven"><a href="#1-获取SDK-maven" class="headerlink" title="1. 获取SDK (maven)"></a>1. 获取SDK (maven)</h2><p>在maven的配置文件的相关profile中，或者项目的pom文件中添加组件仓库</p><figure class="highlight xml"><table><tr><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">repository</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">id</span>&gt;</span>n52-releases<span class="tag">&lt;/<span class="name">id</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">name</span>&gt;</span>52n Releases<span class="tag">&lt;/<span class="name">name</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://52north.org/maven/repo/releases<span class="tag">&lt;/<span class="name">url</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">releases</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">enabled</span>&gt;</span>true<span class="tag">&lt;/<span class="name">enabled</span>&gt;</span></div><div class="line">   <span class="tag">&lt;/<span class="name">releases</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">snapshots</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">enabled</span>&gt;</span>true<span class="tag">&lt;/<span class="name">enabled</span>&gt;</span></div><div class="line">   <span class="tag">&lt;/<span class="name">snapshots</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">repository</span>&gt;</span></div></pre></td></tr></table></figure><p>添加项目依赖<br></p><figure class="highlight xml"><table><tr><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.n52.wps<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>52n-wps-client-lib<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.6.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div></pre></td></tr></table></figure><p></p><p>从github获取<a href="https://github.com/52North/WPS/blob/master/52n-wps-webapp/src/main/webapp/config/wps_config.xml" target="_blank" rel="external">wps_config.xml</a>文件，将其放置到 classpath 目录（resources下面？），或者在第一次调用代码时使用它：</p><figure class="highlight java"><table><tr><td class="code"><pre><div class="line">WPSConfig.getInstance(<span class="string">"path to your wps_config.xml"</span>);</div></pre></td></tr></table></figure><h2 id="2-GetCapabilities"><a href="#2-GetCapabilities" class="headerlink" title="2. GetCapabilities"></a>2. GetCapabilities</h2><p>此部分说明如何请求 WPS Capabilities文档并处理响应。示例：</p><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> CapabilitiesDocument <span class="title">requestGetCapabilities</span><span class="params">(String url)</span> <span class="keyword">throws</span> WPSClientException </span>&#123;</div><div class="line">        WPSClientSession wpsClient = WPSClientSession.getInstance(); <span class="comment">// 初始化WPSClient session</span></div><div class="line">        <span class="keyword">boolean</span> connected = wpsClient.connect(url);<span class="comment">//注册WPS URL</span></div><div class="line"></div><div class="line">        CapabilitiesDocument capabilities = wpsClient.getWPSCaps(url);<span class="comment">// 发生capabilities 请求</span></div><div class="line"></div><div class="line">        ProcessBriefType[] processList = capabilities.getCapabilities()             .getProcessOfferings().getProcessArray();</div><div class="line"></div><div class="line">        <span class="keyword">for</span> (ProcessBriefType process : processList) &#123;</div><div class="line">            System.out.println(process.getIdentifier().getStringValue());</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> capabilities;</div><div class="line">    &#125;</div></pre></td></tr></table></figure><p>请求获得的Capabilities Document 结构与WPS规范中的一样。要获取详细信息，例如处理列表（ list of processes），需要通过ProcessOfferings ：</p><figure class="highlight java"><table><tr><td class="code"><pre><div class="line">capabilities.getCapabilities().getProcessOfferings().getProcessArray();</div></pre></td></tr></table></figure><p>每个处理都是遵循WPS规范的ProcessBriefType 类型。获取处理过程实例标识符的方法：</p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">process.getIdentifier().getStringValue());</div></pre></td></tr></table></figure><h2 id="3-DescribeProcess"><a href="#3-DescribeProcess" class="headerlink" title="3. DescribeProcess"></a>3. DescribeProcess</h2><p>此部分说明如何请求 WPS DescribeProcess 文档并处理响应。示例：</p><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> ProcessDescriptionType <span class="title">requestDescribeProcess</span><span class="params">(String url, String processID)</span> <span class="keyword">throws</span> IOException </span>&#123;</div><div class="line"></div><div class="line">        WPSClientSession wpsClient = WPSClientSession.getInstance();</div><div class="line"></div><div class="line">        ProcessDescriptionType processDescription = wpsClient.getProcessDescription(url, processID); <span class="comment">// 获取处理方法描述 ProcessDescription ，processID 是上面获得的实例标识符</span></div><div class="line">44System.out.println(<span class="string">"Process description:\n"</span> + processDescription.xmlText() + <span class="string">"\n"</span>);</div><div class="line">        </div><div class="line">  		InputDescriptionType[] inputList = processDescription.getDataInputs().getInputArray(); <span class="comment">// 获取处理过程的所有的输入数据描述</span></div><div class="line"></div><div class="line">        <span class="keyword">for</span> (InputDescriptionType input : inputList) &#123;</div><div class="line">            System.out.println(input.getIdentifier().getStringValue());</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> processDescription;</div><div class="line">    &#125;</div></pre></td></tr></table></figure><h2 id="4-Execute"><a href="#4-Execute" class="headerlink" title="4. Execute"></a>4. Execute</h2><p>此部分说明如何执行 WPS 处理并处理响应。示例：</p><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="comment">// create the request, add literal input</span></div><div class="line"><span class="function"><span class="keyword">public</span> IData <span class="title">executeProcess</span><span class="params">(String url, String processID, ProcessDescriptionType processDescription, HashMap&lt;String, Object&gt; inputs)</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">        ExecuteRequestBuilder executeBuilder = <span class="keyword">new</span> ExecuteRequestBuilder(processDescription);</div><div class="line"></div><div class="line">        <span class="keyword">for</span> (InputDescriptionType input : processDescription.getDataInputs().getInputArray()) &#123;</div><div class="line">            String inputName = input.getIdentifier().getStringValue();</div><div class="line">            Object inputValue = inputs.get(inputName);</div><div class="line">            <span class="keyword">if</span> (input.getLiteralData() != <span class="keyword">null</span>) &#123;</div><div class="line">                <span class="keyword">if</span> (inputValue <span class="keyword">instanceof</span> String) &#123;</div><div class="line">                    executeBuilder.addLiteralData(inputName,(String) inputValue);</div><div class="line">                &#125;</div><div class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (input.getComplexData() != <span class="keyword">null</span>) &#123;</div><div class="line">                <span class="comment">// Complexdata by value</span></div><div class="line">                <span class="keyword">if</span> (inputValue <span class="keyword">instanceof</span> FeatureCollection) &#123;</div><div class="line">                    IData data = <span class="keyword">new</span> GTVectorDataBinding((FeatureCollection) inputValue);</div><div class="line">                    executeBuilder.addComplexData(inputName,data,</div><div class="line">                                    <span class="string">"http://schemas.opengis.net/gml/3.1.1/base/feature.xsd"</span>,</div><div class="line">                                    <span class="keyword">null</span>, <span class="string">"text/xml"</span>);</div><div class="line">                &#125;</div><div class="line">                <span class="comment">// Complexdata Reference</span></div><div class="line">                <span class="keyword">if</span> (inputValue <span class="keyword">instanceof</span> String) &#123;</div><div class="line">                    executeBuilder.addComplexDataReference(inputName, (String) inputValue,</div><div class="line">                                    <span class="string">"http://schemas.opengis.net/gml/3.1.1/base/feature.xsd"</span>,</div><div class="line">                                    <span class="keyword">null</span>, <span class="string">"text/xml"</span>);</div><div class="line">                &#125;</div><div class="line"></div><div class="line">                <span class="keyword">if</span> (inputValue == <span class="keyword">null</span> &amp;&amp; input.getMinOccurs().intValue() &gt; <span class="number">0</span>) &#123;</div><div class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> IOException(<span class="string">"Property not set, but mandatory: "</span>+ inputName);</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        executeBuilder.setMimeTypeForOutput(<span class="string">"text/xml"</span>, <span class="string">"result"</span>);</div><div class="line">        executeBuilder.setSchemaForOutput(</div><div class="line">                <span class="string">"http://schemas.opengis.net/gml/3.1.1/base/feature.xsd"</span>,<span class="string">"result"</span>);</div><div class="line">        <span class="comment">// build and send the request document</span></div><div class="line">  		ExecuteDocument execute = executeBuilder.getExecute();</div><div class="line">        execute.getExecute().setService(<span class="string">"WPS"</span>);</div><div class="line">        WPSClientSession wpsClient = WPSClientSession.getInstance();</div><div class="line">        Object response = wpsClient.execute(url, execute);</div><div class="line"> 		</div><div class="line">        <span class="keyword">if</span> (response <span class="keyword">instanceof</span> ExecuteResponseDocument) &#123;</div><div class="line">            ExecuteResponseDocument responseDoc = (ExecuteResponseDocument) responseObject;</div><div class="line">            ExecuteResponseAnalyser analyser = <span class="keyword">new</span> ExecuteResponseAnalyser(</div><div class="line">                    execute, responseDoc, processDescription);</div><div class="line">            IData data = (IData) analyser.getComplexDataByIndex(<span class="number">0</span>,GTVectorDataBinding.class);</div><div class="line">            <span class="keyword">return</span> data;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> Exception(<span class="string">"Exception: "</span> + response.toString());</div><div class="line">    &#125;</div></pre></td></tr></table></figure><p>首先需要初始化一个 ExecuteRequestBuilder 对象，用于构建一个真正的WPS Execute请求。其需要的 ProcessDescriptionType 对象可通过第3部分的DescribeProcess 获取。</p><p>然后，需要设置输入数据，有3种方式：</p><h4 id="Literaldata-input"><a href="#Literaldata-input" class="headerlink" title="Literaldata input"></a>Literaldata input</h4><p>字符型数据，如数字、字符串等。</p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">executeBuilder.addLiteralData(inputName, (String)inputValue);</div></pre></td></tr></table></figure><p>输入数据的标识符（inputName）可通过ProcessDescription获取。</p><h4 id="Complexdata-input-by-value"><a href="#Complexdata-input-by-value" class="headerlink" title="Complexdata input by value"></a>Complexdata input by value</h4><p>复合型数据，如GML Features，使用</p><figure class="highlight java"><table><tr><td class="code"><pre><div class="line">IData data = <span class="keyword">new</span> GTVectorDataBinding((FeatureCollection) inputValue);</div><div class="line">executeBuilder.addComplexData(inputName, data, <span class="string">"http://schemas.opengis.net/gml/3.1.1/base/feature.xsd"</span>, <span class="keyword">null</span>,<span class="string">"text/xml"</span>);</div></pre></td></tr></table></figure><p>需要一个输入数据标识符和一个IData类型的实际数据。<code>IData</code> 是一个接口，常用的实现类有：</p><ul><li>Geotools 中用于矢量数据的 <strong>GTVectorDataBinding</strong></li><li>用于任意文件数据的 <strong>GenericFileDataBinding</strong> . 同样需要数据模式（ schema）, 编码（encoding） 和输入数据类型的 mimetype. 支持的数据格式可通过 ProcessDescription查看。</li></ul><h4 id="Complexdata-input-by-reference"><a href="#Complexdata-input-by-reference" class="headerlink" title="Complexdata input by reference"></a>Complexdata input by reference</h4><p>复合型数据，如只通过<strong>URL</strong>获取的 GML Features，使用</p><figure class="highlight java"><table><tr><td class="code"><pre><div class="line">executeBuilder.addComplexDataReference(inputName, (String) inputValue, <span class="string">"http://schemas.opengis.net/gml/3.1.1/base/feature.xsd"</span>, <span class="keyword">null</span>,<span class="string">"text/xml"</span>);</div></pre></td></tr></table></figure><p>需要输入数据标识符以及一个指向地理数据资源的<strong>URL</strong>的<strong>字符串</strong>，如 WFS Getlayers 请求（URL）. 此外还需要In schema, encoding 和mimetype.</p><p>当设置完所有输入数据之后，必须设置输出数据的格式，包括<strong>mimetype</strong>和 可选的schema（用于矢量数据），例如</p><figure class="highlight java"><table><tr><td class="code"><pre><div class="line">executeBuilder.setMimeTypeForOutput(<span class="string">"text/xml"</span>, <span class="string">"result"</span>);</div><div class="line">executeBuilder.setSchemaForOutput(<span class="string">"http://schemas.opengis.net/gml/3.1.1/base/feature.xsd"</span>, <span class="string">"result"</span>);</div></pre></td></tr></table></figure><p>此方法为标识符为“result”的输出数据设置了schema。支持的schema列表可在ProcessDescription 中查询得到。</p><p><strong>Note</strong>: 编码（encoding）只有在与默认的编码不一致时才需要设置。如果需要参数二进制数据值，可以设置编码为 “<strong>base64</strong>“ 。</p><h3 id="完整示例代码"><a href="#完整示例代码" class="headerlink" title="完整示例代码"></a>完整示例代码</h3><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="keyword">import</span> net.opengis.wps.x100.CapabilitiesDocument;</div><div class="line"><span class="keyword">import</span> net.opengis.wps.x100.ExecuteDocument;</div><div class="line"><span class="keyword">import</span> net.opengis.wps.x100.ExecuteResponseDocument;</div><div class="line"><span class="keyword">import</span> net.opengis.wps.x100.InputDescriptionType;</div><div class="line"><span class="keyword">import</span> net.opengis.wps.x100.ProcessBriefType;</div><div class="line"><span class="keyword">import</span> net.opengis.wps.x100.ProcessDescriptionType;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.geotools.feature.FeatureCollection;</div><div class="line"><span class="keyword">import</span> org.n52.wps.client.ExecuteResponseAnalyser;</div><div class="line"><span class="keyword">import</span> org.n52.wps.client.WPSClientException;</div><div class="line"><span class="keyword">import</span> org.n52.wps.client.WPSClientSession;</div><div class="line"><span class="keyword">import</span> org.n52.wps.io.data.IData;</div><div class="line"><span class="keyword">import</span> org.n52.wps.io.data.binding.complex.GTVectorDataBinding;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WPSClientExample</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testExecute</span><span class="params">()</span> </span>&#123;</div><div class="line"></div><div class="line">        String wpsURL = <span class="string">"http://localhost:8080/wps/WebProcessingService"</span>;</div><div class="line"></div><div class="line">        String processID = <span class="string">"org.n52.wps.server.algorithm.SimpleBufferAlgorithm"</span>;</div><div class="line"></div><div class="line">        <span class="keyword">try</span> &#123;</div><div class="line">            ProcessDescriptionType describeProcessDocument = requestDescribeProcess(</div><div class="line">                    wpsURL, processID);</div><div class="line">            System.out.println(describeProcessDocument);</div><div class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</div><div class="line">            <span class="comment">// TODO Auto-generated catch block</span></div><div class="line">            e.printStackTrace();</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">try</span> &#123;</div><div class="line">            CapabilitiesDocument capabilitiesDocument = requestGetCapabilities(wpsURL);</div><div class="line">            ProcessDescriptionType describeProcessDocument = requestDescribeProcess(</div><div class="line">                    wpsURL, processID);</div><div class="line">            <span class="comment">// define inputs</span></div><div class="line">            HashMap&lt;String, Object&gt; inputs = <span class="keyword">new</span> HashMap&lt;String, Object&gt;();</div><div class="line">            <span class="comment">// complex data by reference</span></div><div class="line">            inputs.put(</div><div class="line">                    <span class="string">"data"</span>,</div><div class="line">                    <span class="string">"http://geoprocessing.demo.52north.org:8080/geoserver/ows?service=WFS&amp;version=1.0.0&amp;request=GetFeature&amp;typeName=topp:tasmania_roads&amp;outputFormat=GML3"</span>);</div><div class="line">            <span class="comment">// literal data</span></div><div class="line">            inputs.put(<span class="string">"width"</span>, <span class="string">"0.05"</span>);</div><div class="line">            IData data = executeProcess(wpsURL, processID,</div><div class="line">                    describeProcessDocument, inputs);</div><div class="line"></div><div class="line">            <span class="keyword">if</span> (data <span class="keyword">instanceof</span> GTVectorDataBinding) &#123;</div><div class="line">                FeatureCollection featureCollection = ((GTVectorDataBinding) data)</div><div class="line">                        .getPayload();</div><div class="line">                System.out.println(featureCollection.size());</div><div class="line">            &#125;</div><div class="line">        &#125; <span class="keyword">catch</span> (WPSClientException e) &#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> CapabilitiesDocument <span class="title">requestGetCapabilities</span><span class="params">(String url)</span></span></div><div class="line">            <span class="keyword">throws</span> WPSClientException &#123;</div><div class="line"></div><div class="line">        WPSClientSession wpsClient = WPSClientSession.getInstance();</div><div class="line"></div><div class="line">        wpsClient.connect(url);</div><div class="line"></div><div class="line">        CapabilitiesDocument capabilities = wpsClient.getWPSCaps(url);</div><div class="line"></div><div class="line">        ProcessBriefType[] processList = capabilities.getCapabilities()</div><div class="line">                .getProcessOfferings().getProcessArray();</div><div class="line"></div><div class="line">        <span class="keyword">for</span> (ProcessBriefType process : processList) &#123;</div><div class="line">            System.out.println(process.getIdentifier().getStringValue());</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> capabilities;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> ProcessDescriptionType <span class="title">requestDescribeProcess</span><span class="params">(String url,</span></span></div><div class="line">            String processID) <span class="keyword">throws</span> IOException &#123;</div><div class="line"></div><div class="line">        WPSClientSession wpsClient = WPSClientSession.getInstance();</div><div class="line"></div><div class="line">        ProcessDescriptionType processDescription = wpsClient.getProcessDescription(url, processID);</div><div class="line"></div><div class="line">        InputDescriptionType[] inputList = processDescription.getDataInputs()</div><div class="line">                .getInputArray();</div><div class="line"></div><div class="line">        <span class="keyword">for</span> (InputDescriptionType input : inputList) &#123;</div><div class="line">            System.out.println(input.getIdentifier().getStringValue());</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> processDescription;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> IData <span class="title">executeProcess</span><span class="params">(String url, String processID,</span></span></div><div class="line">            ProcessDescriptionType processDescription,</div><div class="line">            HashMap&lt;String, Object&gt; inputs) <span class="keyword">throws</span> Exception &#123;</div><div class="line">        org.n52.wps.client.ExecuteRequestBuilder executeBuilder = <span class="keyword">new</span> org.n52.wps.client.ExecuteRequestBuilder(processDescription);</div><div class="line"></div><div class="line">        <span class="keyword">for</span> (InputDescriptionType input : processDescription.getDataInputs()</div><div class="line">                .getInputArray()) &#123;</div><div class="line">            String inputName = input.getIdentifier().getStringValue();</div><div class="line">            Object inputValue = inputs.get(inputName);</div><div class="line">            <span class="keyword">if</span> (input.getLiteralData() != <span class="keyword">null</span>) &#123;</div><div class="line">                <span class="keyword">if</span> (inputValue <span class="keyword">instanceof</span> String) &#123;</div><div class="line">                    executeBuilder.addLiteralData(inputName,</div><div class="line">                            (String) inputValue);</div><div class="line">                &#125;</div><div class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (input.getComplexData() != <span class="keyword">null</span>) &#123;</div><div class="line">                <span class="comment">// Complexdata by value</span></div><div class="line">                <span class="keyword">if</span> (inputValue <span class="keyword">instanceof</span> FeatureCollection) &#123;</div><div class="line">                    IData data = <span class="keyword">new</span> GTVectorDataBinding(</div><div class="line">                            (FeatureCollection) inputValue);</div><div class="line">                    executeBuilder</div><div class="line">                            .addComplexData(</div><div class="line">                                    inputName,</div><div class="line">                                    data,</div><div class="line">                                    <span class="string">"http://schemas.opengis.net/gml/3.1.1/base/feature.xsd"</span>,</div><div class="line">                                    <span class="keyword">null</span>, <span class="string">"text/xml"</span>);</div><div class="line">                &#125;</div><div class="line">                <span class="comment">// Complexdata Reference</span></div><div class="line">                <span class="keyword">if</span> (inputValue <span class="keyword">instanceof</span> String) &#123;</div><div class="line">                    executeBuilder</div><div class="line">                            .addComplexDataReference(</div><div class="line">                                    inputName,</div><div class="line">                                    (String) inputValue,</div><div class="line">                                    <span class="string">"http://schemas.opengis.net/gml/3.1.1/base/feature.xsd"</span>,</div><div class="line">                                    <span class="keyword">null</span>, <span class="string">"text/xml"</span>);</div><div class="line">                &#125;</div><div class="line"></div><div class="line">                <span class="keyword">if</span> (inputValue == <span class="keyword">null</span> &amp;&amp; input.getMinOccurs().intValue() &gt; <span class="number">0</span>) &#123;</div><div class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> IOException(<span class="string">"Property not set, but mandatory: "</span></div><div class="line">                            + inputName);</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        executeBuilder.setMimeTypeForOutput(<span class="string">"text/xml"</span>, <span class="string">"result"</span>);</div><div class="line">        executeBuilder.setSchemaForOutput(</div><div class="line">                <span class="string">"http://schemas.opengis.net/gml/3.1.1/base/feature.xsd"</span>,</div><div class="line">                <span class="string">"result"</span>);</div><div class="line">        ExecuteDocument execute = executeBuilder.getExecute();</div><div class="line">        execute.getExecute().setService(<span class="string">"WPS"</span>);</div><div class="line">        WPSClientSession wpsClient = WPSClientSession.getInstance();</div><div class="line">        Object responseObject = wpsClient.execute(url, execute);</div><div class="line">        <span class="keyword">if</span> (responseObject <span class="keyword">instanceof</span> ExecuteResponseDocument) &#123;</div><div class="line">            ExecuteResponseDocument response = (ExecuteResponseDocument) responseObject;</div><div class="line">            ExecuteResponseAnalyser analyser = <span class="keyword">new</span> ExecuteResponseAnalyser(</div><div class="line">                    execute, response, processDescription);</div><div class="line">            IData data = (IData) analyser.getComplexDataByIndex(<span class="number">0</span>,</div><div class="line">                    GTVectorDataBinding.class);</div><div class="line">            <span class="keyword">return</span> data;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> Exception(<span class="string">"Exception: "</span> + responseObject.toString());</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">        WPSClientExample client = <span class="keyword">new</span> WPSClientExample();</div><div class="line">        client.testExecute();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
       
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>GeoTools 读取 Geotiff 文件</title>
    <link href="houzw.github.io.git/2017/07/27/GeoTools-%E8%AF%BB%E5%8F%96-Geotiff-%E6%96%87%E4%BB%B6/"/>
    <id>houzw.github.io.git/2017/07/27/GeoTools-读取-Geotiff-文件/</id>
    <published>2017-07-27T12:30:59.000Z</published>
    <updated>2017-07-28T00:32:26.722Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Sun Mar 18 2018 11:22:28 GMT+0800 (中国标准时间) --><h1 id="GeoTools-读取-Geotiff-文件"><a href="#GeoTools-读取-Geotiff-文件" class="headerlink" title="GeoTools 读取 Geotiff 文件"></a>GeoTools 读取 Geotiff 文件</h1><h2 id="maven-相关配置"><a href="#maven-相关配置" class="headerlink" title="maven 相关配置"></a>maven 相关配置</h2><figure class="highlight xml"><table><tr><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></div><div class="line">4<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">   		<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.geotools<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">   		<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>gt-geotiff<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">4<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.geotools<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>gt-epsg-hsql<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line">    <span class="comment">&lt;!-- ... --&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">repositories</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">repository</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">id</span>&gt;</span>osgeo<span class="tag">&lt;/<span class="name">id</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">name</span>&gt;</span>Open Source Geospatial Foundation Repository<span class="tag">&lt;/<span class="name">name</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://download.osgeo.org/webdav/geotools/<span class="tag">&lt;/<span class="name">url</span>&gt;</span></div><div class="line">   <span class="tag">&lt;/<span class="name">repository</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">repositories</span>&gt;</span></div></pre></td></tr></table></figure><h2 id="参考代码"><a href="#参考代码" class="headerlink" title="参考代码"></a>参考代码</h2><blockquote><p><a href="https://gis.stackexchange.com/questions/106882/reading-each-pixel-of-each-band-of-multiband-geotiff-with-geotools-java" target="_blank" rel="external">Reading each pixel of each band of multiband GeoTiff with GeoTools</a></p></blockquote><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">(java.io.File file)</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line"></div><div class="line">        ParameterValue&lt;OverviewPolicy&gt; policy = AbstractGridFormat.OVERVIEW_POLICY.createValue();</div><div class="line">        policy.setValue(OverviewPolicy.IGNORE);</div><div class="line"></div><div class="line">        <span class="comment">//this will basically read 4 tiles worth of data at once from the disk...</span></div><div class="line">        ParameterValue&lt;String&gt; gridsize = AbstractGridFormat.SUGGESTED_TILE_SIZE.createValue();</div><div class="line"></div><div class="line">        <span class="comment">//Setting read type: use JAI ImageRead (true) or ImageReaders read methods (false)</span></div><div class="line">        ParameterValue&lt;Boolean&gt; useJaiRead = AbstractGridFormat.USE_JAI_IMAGEREAD.createValue();</div><div class="line">        useJaiRead.setValue(<span class="keyword">true</span>);</div><div class="line"></div><div class="line">        GridCoverage2DReader reader = <span class="keyword">new</span> GeoTiffReader(file);</div><div class="line">        GridEnvelope dimensions = reader.getOriginalGridRange();</div><div class="line">        GridCoordinates maxDimensions = dimensions.getHigh();</div><div class="line">        <span class="keyword">int</span> w = maxDimensions.getCoordinateValue(<span class="number">0</span>)+<span class="number">1</span>;</div><div class="line">        <span class="keyword">int</span> h = maxDimensions.getCoordinateValue(<span class="number">1</span>)+<span class="number">1</span>;</div><div class="line">        <span class="keyword">int</span> numBands = reader.getGridCoverageCount();</div><div class="line"></div><div class="line">        GridCoverage2D coverage = reader.read(</div><div class="line">            <span class="keyword">new</span> GeneralParameterValue[]&#123;policy, gridsize, useJaiRead&#125;</div><div class="line">        );</div><div class="line">        GridGeometry2D geometry = coverage.getGridGeometry();</div><div class="line"></div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;w; i++) &#123;</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j=<span class="number">0</span>; j&lt;h; j++) &#123;</div><div class="line">                org.geotools.geometry.Envelope2D pixelEnvelop =</div><div class="line">                geometry.gridToWorld(<span class="keyword">new</span> GridEnvelope2D(i, j, <span class="number">1</span>, <span class="number">1</span>));</div><div class="line"></div><div class="line">                <span class="keyword">double</span> lat = pixelEnvelop.getCenterY();</div><div class="line">                <span class="keyword">double</span> lon = pixelEnvelop.getCenterX();</div><div class="line">              </div><div class="line">                <span class="keyword">double</span>[] vals = <span class="keyword">new</span> <span class="keyword">double</span>[numBands];</div><div class="line">                coverage.evaluate(<span class="keyword">new</span> GridCoordinates2D(i, j), vals);</div><div class="line">                <span class="comment">//Do something!</span></div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><blockquote><p><a href="https://dzone.com/articles/access-information-geotiff" target="_blank" rel="external">Access Information from GeoTIFF using Java</a></p></blockquote><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GeoTIFFTest</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> String url = <span class="string">"jdbc:postgresql://localhost/bag"</span>;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> GridCoverage2D grid;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Raster gridData; <span class="comment">// java.awt.image.Raster;</span></div><div class="line"> </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">        initTif();</div><div class="line">        loadData();</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">initTif</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">        File tiffFile = <span class="keyword">new</span> File(<span class="string">"/Volumes/Iomega_HDD/mac/data/r44hn1.tif"</span>);</div><div class="line">        GeoTiffReader reader = <span class="keyword">new</span> GeoTiffReader(tiffFile);</div><div class="line">        grid =reader.read(<span class="keyword">null</span>);</div><div class="line">        gridData = grid.getRenderedImage().getData();</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">double</span> <span class="title">getValue</span><span class="params">(<span class="keyword">double</span> x, <span class="keyword">double</span> y)</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">        GridGeometry2D gg = grid.getGridGeometry();</div><div class="line">        DirectPosition2D posWorld = <span class="keyword">new</span> DirectPosition2D(x,y);</div><div class="line">        GridCoordinates2D posGrid = gg.worldToGrid(posWorld);</div><div class="line"> </div><div class="line">        <span class="comment">// envelope is the size in the target projection</span></div><div class="line">        <span class="keyword">double</span>[] pixel=<span class="keyword">new</span> <span class="keyword">double</span>[<span class="number">1</span>];</div><div class="line">        <span class="keyword">double</span>[] data = gridData.getPixel(posGrid.x, posGrid.y, pixel);</div><div class="line">        <span class="keyword">return</span> data[<span class="number">0</span>];</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">loadData</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">        Connection conn = DriverManager.getConnection(url);</div><div class="line">        QueryRunner runner = <span class="keyword">new</span> QueryRunner(); <span class="comment">// org.apache.commons.dbutils.QueryRunner;</span></div><div class="line">        <span class="keyword">final</span> Map&lt;Long, Double&gt; map = <span class="keyword">new</span> HashMap&lt;Long, Double&gt;();</div><div class="line">        ResultSetHandler handler = <span class="keyword">new</span> ResultSetHandler() &#123;</div><div class="line"> </div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> Object <span class="title">handle</span><span class="params">(ResultSet resultSet)</span> <span class="keyword">throws</span> SQLException </span>&#123;</div><div class="line">                <span class="keyword">while</span> (resultSet.next()) &#123;</div><div class="line">                    String point = resultSet.getString(<span class="string">"point"</span>);</div><div class="line">                    <span class="keyword">double</span> x = Double.parseDouble(point.substring(</div><div class="line">                            point.indexOf(<span class="string">'('</span>) + <span class="number">1</span>,</div><div class="line">                            point.indexOf(<span class="string">' '</span>)</div><div class="line">                    ));</div><div class="line"> </div><div class="line">                    <span class="keyword">double</span> y = Double.parseDouble(point.substring(</div><div class="line">                            point.indexOf(<span class="string">' '</span>) + <span class="number">1</span>,</div><div class="line">                            point.indexOf(<span class="string">')'</span>)</div><div class="line">                    ));</div><div class="line"> </div><div class="line">                    <span class="keyword">try</span> &#123;</div><div class="line">                        <span class="keyword">double</span> hoogte = getValue(x, y);</div><div class="line">                        map.put(resultSet.getLong(<span class="string">"gid"</span>),hoogte);</div><div class="line">                    &#125; <span class="keyword">catch</span> (Exception e) &#123;</div><div class="line">                        e.printStackTrace();  </div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">                <span class="keyword">return</span> <span class="keyword">null</span>;  </div><div class="line">            &#125;</div><div class="line">        &#125;;</div><div class="line">        runner.query(conn, <span class="string">"SELECT gid, ST_AsText(ST_Centroid(geovlak)) as point \n"</span> +</div><div class="line">                <span class="string">"FROM bag8mrt2014.pand\n"</span> +</div><div class="line">                <span class="string">"WHERE geovlak &amp;&amp; ST_MakeEnvelope(130153, 408769,132896, 410774, 28992) ORDER by gid ;"</span>, handler);</div><div class="line">        <span class="keyword">int</span> count = <span class="number">0</span>;</div><div class="line">        <span class="keyword">for</span> (Long key : map.keySet()) &#123;</div><div class="line">            System.out.println(<span class="string">"Inserting for key = "</span> + key + <span class="string">" value: "</span> + map.get(key));</div><div class="line">            <span class="keyword">int</span> col = runner.update(conn, <span class="string">"UPDATE bag8mrt2014.pand SET hoogte= ? where gid = ?"</span>,</div><div class="line">            map.get(key), key);</div><div class="line">            count++;</div><div class="line">            <span class="keyword">if</span> (count%<span class="number">100</span> == <span class="number">0</span>) &#123;</div><div class="line">                System.out.println(<span class="string">"count = "</span> + count);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><blockquote><p><a href="http://docs.geotools.org/latest/userguide/tutorial/raster/image.html" target="_blank" rel="external">http://docs.geotools.org/latest/userguide/tutorial/raster/image.html</a></p></blockquote><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
       
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>BAT 批处理程序学习</title>
    <link href="houzw.github.io.git/2017/05/30/BAT-%E6%89%B9%E5%A4%84%E7%90%86%E7%A8%8B%E5%BA%8F%E5%AD%A6%E4%B9%A0/"/>
    <id>houzw.github.io.git/2017/05/30/BAT-批处理程序学习/</id>
    <published>2017-05-30T08:09:25.000Z</published>
    <updated>2017-05-31T01:08:47.007Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Sun Mar 18 2018 11:22:28 GMT+0800 (中国标准时间) --><h1 id="批处理文件编写与使用"><a href="#批处理文件编写与使用" class="headerlink" title="批处理文件编写与使用"></a>批处理文件编写与使用</h1><blockquote><p><a href="http://www.cnblogs.com/mq0036/p/3412171.html" target="_blank" rel="external">BAT 批处理脚本教程</a></p><p><a href="http://xstarcd.github.io/wiki/windows/windows_cmd_summary_commands.html" target="_blank" rel="external">批处理常用命令总结 - 批处理命令简介</a></p></blockquote><p><strong>批处理</strong>（Batch）是一种简化的脚本语言，它应用于DOS和Windows系统中，它是由DOS或者Windows系统内嵌的命令解释器（通常是COMMAND.COM或者CMD.EXE）解释运行。</p><p>批处理文件具有<code>.bat</code>或者<code>.cmd</code>的扩展名 ，这个文件的每一行都是一条DOS命令。</p><p>批处理文件也是一种简单的程序，可以通过条件语句(if)和流程控制语句(goto)来控制命令运行的流程，在批处理中也可以使用循环语句(for)来循环执行一条命令。</p><h3 id="入门示例"><a href="#入门示例" class="headerlink" title="入门示例"></a>入门示例</h3><p>新建<code>bat</code>文件之后，输入内容</p><ul><li><p>打开文本编辑器</p><p><code>notepad.exe</code></p></li><li><p>把屏幕上的内容拷贝进文本文件中</p><p><code>copy con 1.txt</code> 回车后输入内容，ctrl+z 结束输入</p></li></ul><h3 id="基本语法"><a href="#基本语法" class="headerlink" title="基本语法"></a>基本语法</h3><blockquote><p>查看使用说明： <code>命令 /?</code>, 如 <code>start /?</code></p></blockquote><ol><li><p><strong><code>echo [{on|off}][message]</code>：用于在屏幕显示文字信息。</strong></p><p>on：允许批处理文件在执行的过程中显示命令。</p><p>off：禁止…。即只执行命令但是不显示在屏幕上面</p><p><code>echo. echo, echo] echo[ echo; echo: echo/ echo\ echo+ echo=</code> 等都可以实现换行，但<code>echo.</code>最常用</p></li><li><p><strong><code>rem</code> 表示此命令后的字符为解释行（注释），不执行</strong>，只是给自己今后参考用的（相当于程序中的注释）。</p></li><li><p><strong><code>@[command]</code>：用于屏蔽执行的命令显示在屏幕上。</strong></p><p>屏蔽单条命令</p></li><li><p><strong><code>goto label</code> 跳转到指定标号处</strong></p><p>以<code>:label</code>来构建一个标号，然后<code>GOTO label</code> 跳转到标号<code>:label</code> 处，执行标号后的命令。</p></li><li><p><strong><code>pause</code>：用于暂停。</strong></p></li><li><p><strong><code>call [绝对路径] Filename 或者 [:label]</code> 在一个批处理文件中调用另外一个批处理文件</strong></p><p><code>[绝对路径]Filename</code>：另一个批处理文件。</p><p><code>[:label]</code> ：像goto一样，call也可以跳到某个标签之后执行</p></li><li><p><strong>start：用于启动一个单独的命令行窗口。</strong></p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">START [&quot;title&quot;] [/D path] [/I] [/MIN] [/MAX] [/SEPARATE | /SHARED]</div><div class="line">      [/LOW | /NORMAL | /HIGH | /REALTIME | /ABOVENORMAL | /BELOWNORMAL]</div><div class="line">      [/NODE &lt;NUMA node&gt;] [/AFFINITY &lt;hex affinity mask&gt;] [/WAIT] [/B]</div><div class="line">      [command/program] [parameters]</div><div class="line">      </div><div class="line">    &quot;title&quot;     在窗口标题栏中显示的标题。</div><div class="line">    path        启动目录。</div><div class="line">    B           启动应用程序，但不创建新窗口。</div><div class="line">                应用程序已忽略 ^C 处理。除非应用程序</div><div class="line">                启用 ^C 处理，否则 ^Break 是唯一可以中断</div><div class="line">                该应用程序的方式。</div><div class="line">    I           新的环境将是传递</div><div class="line">                给 cmd.exe 的原始环境，而不是当前环境。</div><div class="line">    MIN         以最小化方式启动窗口。</div><div class="line">    MAX         以最大化方式启动窗口。</div><div class="line">    SEPARATE    在单独的内存空间中启动 16 位 Windows 程序。</div><div class="line">    SHARED      在共享内存空间中启动 16 位 Windows 程序。</div><div class="line">    LOW         在 IDLE 优先级类中启动应用程序。</div><div class="line">    NORMAL      在 NORMAL 优先级类中启动应用程序。</div><div class="line">    HIGH        在 HIGH 优先级类中启动应用程序。</div><div class="line">    REALTIME    在 REALTIME 优先级类中启动应用程序。</div><div class="line">    ABOVENORMAL 在 ABOVENORMAL 优先级类中启动应用程序。</div><div class="line">    BELOWNORMAL 在 BELOWNORMAL 优先级类中启动应用程序。</div><div class="line">    NODE        将首选非一致性内存结构(NUMA)节点指定为</div><div class="line">                十进制整数。</div><div class="line">    AFFINITY    将处理器关联掩码指定为十六进制数字。</div><div class="line">                进程被限制在这些处理器上运行。</div><div class="line"></div><div class="line">                将 /AFFINITY 和 /NODE 结合使用时，会对关联掩码</div><div class="line">                进行不同的解释。指定关联掩码，以便将零位作为起始位置(就如将 NUMA</div><div class="line">                节点的处理器掩码向右移位一样)。</div><div class="line">                进程被限制在指定关联掩码和 NUMA 节点之间的</div><div class="line">                那些通用处理器上运行。</div><div class="line">                如果没有通用处理器，则进程被限制在</div><div class="line">                指定的 NUMA 节点上运行。</div><div class="line">    WAIT        启动应用程序并等待它终止。</div><div class="line">    command/program</div><div class="line">                如果它是内部 cmd 命令或批文件，则</div><div class="line">                该命令处理器是使用 cmd.exe 的 /K 开关运行的。</div><div class="line">                这表示运行该命令之后，该窗口</div><div class="line">                将仍然存在。</div><div class="line"></div><div class="line">                如果它不是内部 cmd 命令或批文件，则</div><div class="line">                它就是一个程序，并将作为一个窗口化应用程序或</div><div class="line">                控制台应用程序运行。</div><div class="line"></div><div class="line">    parameters  这些是传递给 command/program 的参数。</div><div class="line"></div><div class="line">注意: 在 64 位平台上不支持 SEPARATE 和 SHARED 选项。</div></pre></td></tr></table></figure></li><li><p><strong>set [variable=[string]]：定义变量和设置环境。</strong></p><p>variable 指定环境变量名。string 指定要指派给变量的一系列字符串。</p><p>SET 命令不允许变量名含有等号。</p><p>SET 命令中添加了两个新命令行开关:</p><ul><li><code>SET /A expression</code> 指定等号右边的字符串为被评估的<strong>数字表达式</strong>（用 , 分割）。</li><li><code>SET /P variable=[promptString]</code> 允许<strong>将变量数值设成用户输入的一行输入</strong>。读取输入行之前，显示指定的 promptString（提示字符串）。promptString 可以是空的。</li></ul></li><li><p><strong>条件语句 if…else…</strong></p></li><li><p><strong>循环语句</strong></p></li><li><p><strong>子程序</strong></p></li></ol><h3 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h3><p>批处理中存在两种类型变量，一类可称为<strong>系统变量</strong>，即系统已经给这些变量定义了值，我们只需要调用；另一类可称为<strong>用户变量</strong>或<strong>自定义变量</strong>，即由用户来赋予变量值。</p><h4 id="系统变量"><a href="#系统变量" class="headerlink" title="系统变量"></a>系统变量</h4><blockquote><p>举例</p></blockquote><ul><li><p><code>%APPDATA%</code> 本地 返回默认情况下<strong>应用程序存储数据的位置</strong>。</p></li><li><p><code>%CMDCMDLINE%</code> 本地 返回用来启动当前的 Cmd.exe 的准确命令行。</p></li><li><p><code>%COMPUTERNAME%</code> 系统 返回<strong>计算机的名称</strong>。</p></li><li><p><code>%DATE%</code> 系统 返回<strong>当前日期</strong>。 <code>%TIME%</code></p></li><li><p><code>%HOMEPATH%</code> 系统 返回<strong>用户主目录</strong>的完整路径。基于主目录值而设置。用户主目录是在“本地用户和组”中指定的。</p></li><li><p><code>%PATH%</code> 系统 指定<strong>可执行文件的搜索路径</strong></p></li><li><p><code>%PATHEXT%</code> 系统 返回操作系统认为可执行的文件扩展名的列表。</p></li><li><p><code>%NUMBER_OF_PROCESSORS%</code> 系统 指定安装在计算机上的<strong>处理器的数目</strong>。类似的还有<code>%PROCESSOR_ARCHITECTURE%</code>、<code>%PROCESSOR_IDENTFIER%</code>、<code>%PROCESSOR_LEVEL%</code> 、<code>%PROCESSOR_REVISION%</code></p></li><li><p><code>%SYSTEMROOT%</code> 系统 返回 Windows server operating system 根目录的位置。 <code>%SYSTEMDRIVE%</code> <code>%WINDIR%</code></p></li><li><p><code>%ERRORLEVEL%</code> 系统 返回<strong>上一条命令的错误代码</strong>。通常用非零值表示错误。</p></li><li><p><code>%RANDOM%</code> 系统 返回 0 到 32767 之间的<strong>任意十进制数字</strong>。由 Cmd.exe 生成。</p></li><li><p><code>%USERNAME%</code> 本地 返回当前登录的用户的名称。</p><h5 id="参数变量"><a href="#参数变量" class="headerlink" title="参数变量"></a>参数变量</h5><p><code>%0 %1 %2 %3 %4 %5 %6 %7 %8 %9 %*</code></p><p><code>%1 %2 %3 %4 %5 %6 %7 %8 %9</code> 表示执行bat时输入的第1个、第2个。。。第9个参数，可以在后面的命令中使用</p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">:: 若本文件名为test.bat。执行时输入参数：test.bat paramA paramB</div><div class="line">echo %1 %2</div><div class="line">:: 输出第1个变量值：paramA</div><div class="line">echo %1</div></pre></td></tr></table></figure><p><code>%*</code>是一次返回所有参数</p><p><code>%0</code> 这个不是返回参数的值，其作用有两种：</p><ul><li>返回批处理所在绝对路径（<code>echo %0</code> ）</li><li>无限循环执行BAT</li></ul></li></ul><h4 id="用户变量"><a href="#用户变量" class="headerlink" title="用户变量"></a>用户变量</h4><blockquote><p>使用set命令赋值</p></blockquote><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">:: 注意set中的 “=” 两侧不能有空格！</div><div class="line">set var=值 </div><div class="line">echo %var%</div></pre></td></tr></table></figure><p>如果想让<strong>用户手工输入变量的值</strong>,而不是在代码里指定,可以用用set命令的<code>/p</code> 参数：</p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">@echo off</div><div class="line">set /p var=请输入变量的值</div><div class="line">echo %var%</div><div class="line">pause</div></pre></td></tr></table></figure><h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><p>1、<strong><code>:: 注释内容</code></strong>（第一个冒号后也可以跟任何一个非字母数字的字符）<br>2、<strong><code>rem 注释内容</code> </strong>（不能出现重定向符号和管道符号）<br>3、<code>echo 注释内容</code> （不能出现重定向符号和管道符号）〉nul<br>4、if not exist nul 注释内容（不能出现重定向符号和管道符号）<br>5、<code>:注释内容</code> （注释文本不能与已有标签重名）<br>6、<strong><code>%注释内容%</code></strong> （可以用作行间注释，不能出现重定向符号和管道符号）<br>7、goto 标签 注释内容（可以用作说明goto的条件和执行内容）<br>8、:标签 注释内容（可以用作标签下方段的执行内容）</p><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
       
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>使用Jena执行SPARQL的Select和Ask查询</title>
    <link href="houzw.github.io.git/2017/05/10/%E4%BD%BF%E7%94%A8Jena%E6%89%A7%E8%A1%8CSPARQL%E7%9A%84Select%E5%92%8CAsk%E6%9F%A5%E8%AF%A2/"/>
    <id>houzw.github.io.git/2017/05/10/使用Jena执行SPARQL的Select和Ask查询/</id>
    <published>2017-05-10T13:22:38.000Z</published>
    <updated>2017-05-10T13:34:07.695Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Sun Mar 18 2018 11:22:28 GMT+0800 (中国标准时间) --><h1 id="使用Jena执行SPARQL的Select和ask查询"><a href="#使用Jena执行SPARQL的Select和ask查询" class="headerlink" title="使用Jena执行SPARQL的Select和ask查询"></a>使用Jena执行SPARQL的Select和ask查询</h1><p>提供基本的接口和实现类，可在其他代码中直接调用</p><h2 id="Select查询"><a href="#Select查询" class="headerlink" title="Select查询"></a>Select查询</h2><h3 id="接口"><a href="#接口" class="headerlink" title="接口"></a>接口</h3><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * The interface Select dao.</div><div class="line"> * 本体模型数据操作 ：Sparql的Select查询</div><div class="line"> *</div><div class="line"> * <span class="doctag">@author</span> houzhiwei</div><div class="line"> * <span class="doctag">@date</span> 2016年4月18日 下午5:16:26</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">SelectDao</span> </span>&#123;</div><div class="line">    <span class="comment">/**</span></div><div class="line">     * 执行select查询 同一个resultset只能被使用一次</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> sparqlStr the sparql string</div><div class="line">     * <span class="doctag">@param</span> model     the model</div><div class="line">     * <span class="doctag">@return</span> Json格式结果 string</div><div class="line">     */</div><div class="line">    <span class="function">String <span class="title">execSelectJSON</span><span class="params">(String sparqlStr, Model model)</span></span>;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * 执行select查询</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> sparqlStr the sparql string</div><div class="line">     * <span class="doctag">@param</span> model     the model</div><div class="line">     * <span class="doctag">@return</span> result set</div><div class="line">     * <span class="doctag">@author</span> houzhiwei at 2016年4月28日下午9:42:48</div><div class="line">     */</div><div class="line">    <span class="function">ResultSet <span class="title">execSelect</span><span class="params">(String sparqlStr, Model model)</span></span>;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * 执行select查询</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> sparqlStr the sparql string</div><div class="line">     * <span class="doctag">@param</span> ds        the ds</div><div class="line">     * <span class="doctag">@return</span> result set</div><div class="line">     * <span class="doctag">@author</span> houzhiwei at 2016年4月28日下午9:42:48</div><div class="line">     */</div><div class="line">    <span class="function">ResultSet <span class="title">execSelect</span><span class="params">(String sparqlStr, Dataset ds)</span></span>;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * 获取查询语句中查询变量（subject等）</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> query the query</div><div class="line">     * <span class="doctag">@return</span> string [ ]</div><div class="line">     * <span class="doctag">@author</span> houzhiwei at 2016年1月15日上午11:43:51</div><div class="line">     */</div><div class="line">    String[] getQueryVars(Query query);</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * 内部类。为本接口的实现类提供公共代码</div><div class="line">     *</div><div class="line">     * <span class="doctag">@author</span> houzhiwei</div><div class="line">     */</div><div class="line">    <span class="class"><span class="keyword">class</span> <span class="title">BaseSelect</span> </span>&#123;</div><div class="line">        <span class="comment">/**</span></div><div class="line">         * Exec select json string.</div><div class="line">         *</div><div class="line">         * <span class="doctag">@param</span> sparqlStr the sparql string</div><div class="line">         * <span class="doctag">@param</span> model     the model</div><div class="line">         * <span class="doctag">@return</span> the string</div><div class="line">         */</div><div class="line">        <span class="function"><span class="keyword">public</span> String <span class="title">execSelectJSON</span><span class="params">(String sparqlStr, Model model)</span></span></div><div class="line">        &#123;</div><div class="line">            <span class="keyword">try</span> &#123;</div><div class="line">                ResultSet results = execSelect(sparqlStr, model);</div><div class="line">                ByteArrayOutputStream bout = <span class="keyword">new</span> ByteArrayOutputStream();</div><div class="line">                ResultSetFormatter.outputAsJSON(bout, results);<span class="comment">//将结果输出为Json格式</span></div><div class="line">                <span class="keyword">return</span> <span class="keyword">new</span> String(bout.toByteArray(), <span class="string">"UTF-8"</span>);<span class="comment">// 输出为Json字符串</span></div><div class="line">            &#125; <span class="keyword">catch</span> (Exception e) &#123;</div><div class="line">                e.printStackTrace();</div><div class="line">                <span class="keyword">return</span> e.getLocalizedMessage() + <span class="string">"\n 查询失败! 请检查SPARQL!"</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="comment">/**</span></div><div class="line">         * Exec select result set.</div><div class="line">         *</div><div class="line">         * <span class="doctag">@param</span> sparqlStr the sparql string</div><div class="line">         * <span class="doctag">@param</span> model     the model</div><div class="line">         * <span class="doctag">@return</span> the result set</div><div class="line">         */</div><div class="line">        <span class="function"><span class="keyword">public</span> ResultSet <span class="title">execSelect</span><span class="params">(String sparqlStr, Model model)</span></span></div><div class="line">        &#123;</div><div class="line">            Query query = QueryFactory.create(sparqlStr);</div><div class="line">            QueryExecution queryExec = QueryExecutionFactory.create(query, model);</div><div class="line">            ResultSet results = queryExec.execSelect();</div><div class="line">            <span class="keyword">return</span> results;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="comment">/**</span></div><div class="line">         * Exec select result set.</div><div class="line">         *</div><div class="line">         * <span class="doctag">@param</span> sparqlStr the sparql string</div><div class="line">         * <span class="doctag">@param</span> ds        the Dataset</div><div class="line">         * <span class="doctag">@return</span> the result set</div><div class="line">         */</div><div class="line">        <span class="function"><span class="keyword">public</span> ResultSet <span class="title">execSelect</span><span class="params">(String sparqlStr, Dataset ds)</span></span></div><div class="line">        &#123;</div><div class="line">            Query query = QueryFactory.create(sparqlStr);</div><div class="line">            QueryExecution queryExec = QueryExecutionFactory.create(query, ds);</div><div class="line">            ResultSet results = queryExec.execSelect();</div><div class="line">            <span class="keyword">return</span> results;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="comment">/**</span></div><div class="line">         * Get query vars.</div><div class="line">         * 获取查询变量，若sparql中使用了 ?subject, 则有变量 subject</div><div class="line">         *</div><div class="line">         * <span class="doctag">@param</span> query the query</div><div class="line">         * <span class="doctag">@return</span> the string [ ]</div><div class="line">         */</div><div class="line">        <span class="keyword">public</span> String[] getQueryVars(Query query)</div><div class="line">        &#123;</div><div class="line">            List&lt;Var&gt; vars = query.getProjectVars();</div><div class="line">            String[] varArr = <span class="keyword">new</span> String[vars.size()];</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>, len = vars.size(); i &lt; len; i++) &#123;</div><div class="line">                varArr[i] = vars.get(i).getVarName();</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">return</span> varArr;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><h2 id="实现类"><a href="#实现类" class="headerlink" title="实现类"></a>实现类</h2><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * <span class="doctag">@author</span> Houzw</div><div class="line"> * <span class="doctag">@Description</span>: 执行SPARQL的Select查询</div><div class="line"> */</div><div class="line"><span class="meta">@Service</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SelectDaoImpl</span> <span class="keyword">implements</span> <span class="title">SelectDao</span></span></div><div class="line">&#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">execSelectJSON</span><span class="params">(String sparqlStr, Model model)</span></span></div><div class="line">    &#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">new</span> BaseSelect().execSelectJSON(sparqlStr, model);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> ResultSet <span class="title">execSelect</span><span class="params">(String sparqlStr, Model model)</span></span></div><div class="line">    &#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">new</span> BaseSelect().execSelect(sparqlStr, model);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> ResultSet <span class="title">execSelect</span><span class="params">(String sparqlStr, Dataset ds)</span></span></div><div class="line">    &#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">new</span> BaseSelect().execSelect(sparqlStr, ds);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="keyword">public</span> String[] getQueryVars(Query query)</div><div class="line">    &#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">new</span> BaseSelect().getQueryVars(query);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><h2 id="Ask查询"><a href="#Ask查询" class="headerlink" title="Ask查询"></a>Ask查询</h2><h3 id="接口-1"><a href="#接口-1" class="headerlink" title="接口"></a>接口</h3><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * <span class="doctag">@author</span> Houzw</div><div class="line"> * <span class="doctag">@Description</span> 利用SPARQL的ASK操作查询数据</div><div class="line"> * <span class="doctag">@date</span> 2016年4月18日 下午4:57:16</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">AskDao</span> </span>&#123;</div><div class="line">    <span class="comment">/**</span></div><div class="line">     * 执行ASK查询</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> sparqlStr</div><div class="line">     * <span class="doctag">@param</span> model</div><div class="line">     * <span class="doctag">@return</span> T/F</div><div class="line">     * <span class="doctag">@Houzw</span> at 2016年4月18日下午5:03:54</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">execAsk</span><span class="params">(String sparqlStr, Model model)</span></span>;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * 执行ASK查询</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> sparqlStr</div><div class="line">     * <span class="doctag">@param</span> ds</div><div class="line">     * <span class="doctag">@return</span> T/F</div><div class="line">     * <span class="doctag">@Houzw</span> at 2016年4月18日下午5:03:54</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">execAsk</span><span class="params">(String sparqlStr, Dataset ds)</span></span>;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * 执行ASK查询</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> sub_uri</div><div class="line">     * <span class="doctag">@param</span> prop_uri</div><div class="line">     * <span class="doctag">@param</span> obj_uri</div><div class="line">     * <span class="doctag">@param</span> model</div><div class="line">     * <span class="doctag">@return</span> T/F</div><div class="line">     * <span class="doctag">@Houzw</span> at 2016年3月30日下午3:22:02</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">execAsk</span><span class="params">(String sub_uri, String prop_uri, String obj_uri, Model model)</span></span>;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * 实例是否存在</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> uri</div><div class="line">     * <span class="doctag">@param</span> model</div><div class="line">     * <span class="doctag">@return</span> T/F</div><div class="line">     * <span class="doctag">@Houzw</span> at 2016年4月1日下午10:18:23</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">isIndividual</span><span class="params">(String uri, Model model)</span></span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure><h3 id="实现类-1"><a href="#实现类-1" class="headerlink" title="实现类"></a>实现类</h3><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="meta">@Service</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AskDaoImpl</span> <span class="keyword">implements</span> <span class="title">AskDao</span> </span>&#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">execAsk</span><span class="params">(String sparqlStr, Model model)</span></span></div><div class="line">    &#123;</div><div class="line">        Query query = QueryFactory.create(sparqlStr);</div><div class="line">        QueryExecution queryExec = QueryExecutionFactory.create(query, model);</div><div class="line">        <span class="keyword">return</span> queryExec.execAsk();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">execAsk</span><span class="params">(String sparqlStr, Dataset ds)</span></span></div><div class="line">    &#123;</div><div class="line">        Query query = QueryFactory.create(sparqlStr);</div><div class="line">        QueryExecution queryExec = QueryExecutionFactory.create(query, ds);</div><div class="line">        <span class="keyword">return</span> queryExec.execAsk();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">execAsk</span><span class="params">(String sub_uri, String prop_uri, String obj_uri, Model model)</span></span></div><div class="line">    &#123;</div><div class="line">        StringBuilder s = <span class="keyword">new</span> StringBuilder(<span class="string">"ASK &#123; "</span>);</div><div class="line">        <span class="keyword">if</span> (StringUtils.isBlank(sub_uri))</div><div class="line">            s.append(<span class="string">"?s "</span>);</div><div class="line">        <span class="keyword">else</span></div><div class="line">            s.append(<span class="string">"&lt;"</span> + sub_uri + <span class="string">"&gt; "</span>);</div><div class="line">        <span class="keyword">if</span> (StringUtils.isBlank(prop_uri))</div><div class="line">            s.append(<span class="string">"?p "</span>);</div><div class="line">        <span class="keyword">else</span></div><div class="line">            s.append(<span class="string">"&lt;"</span> + prop_uri + <span class="string">"&gt; "</span>);</div><div class="line">        <span class="keyword">if</span> (StringUtils.isBlank(obj_uri))</div><div class="line">            s.append(<span class="string">"?o"</span>);</div><div class="line">        <span class="keyword">else</span></div><div class="line">            s.append(<span class="string">"&lt;"</span> + obj_uri + <span class="string">"&gt; "</span>);</div><div class="line">        s.append(<span class="string">" &#125;"</span>);</div><div class="line">        Query query = QueryFactory.create(s.toString());</div><div class="line">        QueryExecution queryExec = QueryExecutionFactory.create(query, model);</div><div class="line">        <span class="keyword">return</span> queryExec.execAsk();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isIndividual</span><span class="params">(String uri, Model model)</span></span></div><div class="line">    &#123;</div><div class="line">        <span class="keyword">return</span> execAsk(uri, RDF.type.getURI(), OWL2.NamedIndividual.getURI(), model);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      Jena执行本体SPARQL查询。提供基本的接口和实现类，可在其他代码中直接调用 
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>知识图谱-资源收集</title>
    <link href="houzw.github.io.git/2017/05/08/%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1-%E8%B5%84%E6%BA%90%E6%94%B6%E9%9B%86/"/>
    <id>houzw.github.io.git/2017/05/08/知识图谱-资源收集/</id>
    <published>2017-05-08T13:23:27.000Z</published>
    <updated>2017-05-25T00:40:54.642Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Sun Mar 18 2018 11:22:28 GMT+0800 (中国标准时间) --><h1 id="知识图谱-资源收集"><a href="#知识图谱-资源收集" class="headerlink" title="知识图谱-资源收集"></a>知识图谱-资源收集</h1><ol><li><a href="http://tie.istic.ac.cn/ch/reader/view_abstract.aspx?file_no=201701002" target="_blank" rel="external">漆桂林,高桓,吴天星.知识图谱研究进展[J].情报工程,2017,3(1):004-025</a></li><li><a href="http://www.xb.uestc.edu.cn/nature/index.php?p=pdfdownload&amp;file=public/uploadfiles/UESTC20160412.pdf&amp;item_id=1894" target="_blank" rel="external">徐增林, 盛泳潘, 贺丽荣, 等. 知识图谱技术综述[J]. 电子科技大学学报, 2016, 45(4): 590.</a></li><li><a href="https://www.google.com/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=3&amp;ved=0ahUKEwjjr7KnueDTAhUGtY8KHRPjDv4QFgguMAI&amp;url=%68%74%74%70%3a%2f%2f%62%6c%6f%67%2e%73%63%69%65%6e%63%65%6e%65%74%2e%63%6e%2f%68%6f%6d%65%2e%70%68%70%3f%6d%6f%64%3d%61%74%74%61%63%68%6d%65%6e%74%26%69%64%3d%35%32%38%31%37&amp;usg=AFQjCNFt-DSGY-fbA1P5Nv7qg-g8PZbT_g&amp;sig2=cIT8yX4p7cfGwxszQwNYKQ" target="_blank" rel="external">大规模知识图谱技术-PDF</a></li><li><a href="http://www.36dsj.com/archives/39306" target="_blank" rel="external">知识图谱技术原理介绍</a></li><li><a href="http://blog.sina.com.cn/s/blog_574a437f0102w2bk.html" target="_blank" rel="external">《大数据智能》第2章：知识图谱——刘知远THU</a></li><li><a href="http://www.infoq.com/cn/articles/Application-of-Knowledge-Graph?utm_source=articles_about_knowledge-map&amp;utm_medium=link&amp;utm_campaign=knowledge-map" target="_blank" rel="external">知识图谱在互联网金融中的应用</a></li><li><a href="http://www.infoq.com/cn/articles/constructing-linkedin-knowledge-map?utm_source=articles_about_knowledge-map&amp;utm_medium=link&amp;utm_campaign=knowledge-map" target="_blank" rel="external">构建LinkedIn知识图谱</a></li><li><a href="http://www.jiqizhixin.com/article/2510" target="_blank" rel="external">知识图谱研究进展</a></li><li><a href="http://jiqizhixin.com/article/1508" target="_blank" rel="external">东南大学漆桂林教授：知识图谱不仅是一项技术，更是一项工程</a></li><li><a href="https://wenku.baidu.com/view/c360027800f69e3143323968011ca300a6c3f620.html" target="_blank" rel="external">数据驱动的大规模知识图谱构建方法——百度文库</a></li><li><a href="http://tie.istic.ac.cn/ch/reader/create_pdf.aspx?file_no=201701003&amp;year_id=2017&amp;quarter_id=1&amp;falg=1" target="_blank" rel="external">规则增强的知识图谱表示学习方法-PDF</a></li><li><a href="http://blog.csdn.net/zjxiaolu/article/details/47434187" target="_blank" rel="external">王昊奋：大规模知识图谱技术</a></li><li><a href="http://blog.openkg.cn/hiknowledge-%E5%A4%A7%E8%A7%84%E6%A8%A1%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%E5%AE%9E%E6%88%98%E8%A7%A3%E6%9E%90/" target="_blank" rel="external">HiKnowledge | 大规模知识图谱数据存储实战解析</a></li></ol><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
       
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>GRASS GIS 下 TOPMODEL 运行</title>
    <link href="houzw.github.io.git/2017/04/19/GRASS-GIS%20%E4%B8%8B%20TOPMODEL%20%E8%BF%90%E8%A1%8C/"/>
    <id>houzw.github.io.git/2017/04/19/GRASS-GIS 下 TOPMODEL 运行/</id>
    <published>2017-04-19T09:25:57.000Z</published>
    <updated>2017-05-03T07:24:32.669Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Sun Mar 18 2018 11:22:28 GMT+0800 (中国标准时间) --><h1 id="GRASS-GIS-下-TOPMODEL-运行"><a href="#GRASS-GIS-下-TOPMODEL-运行" class="headerlink" title="GRASS GIS 下 TOPMODEL 运行"></a>GRASS GIS 下 TOPMODEL 运行</h1><blockquote><p><a href="https://grass.osgeo.org/grass72/manuals/r.topmodel.html" target="_blank" rel="external">https://grass.osgeo.org/grass72/manuals/r.topmodel.html</a></p></blockquote><h2 id="名称"><a href="#名称" class="headerlink" title="名称"></a>名称</h2><p><strong>r.topmodel</strong></p><p>模拟有物理基础的（分布式）水文模型 TOPMODEL</p><h2 id="命令概要"><a href="#命令概要" class="headerlink" title="命令概要"></a>命令概要</h2><p><strong><code>r.topmodel</code></strong></p><p><code>r.topmodel --help</code></p><p><strong>r.topmodel</strong> [-<strong>p</strong>] <strong>parameters</strong>=<em>name</em> <strong>topidxstats</strong>=<em>name</em> <strong>input</strong>=<em>name</em> <strong>output</strong>=<em>name</em> [<strong>timestep</strong>=<em>integer</em>][<strong>topidxclass</strong>=<em>integer</em>] [<strong>topidx</strong>=<em>name</em>][<strong>ntopidxclasses</strong>=<em>integer</em>] [<strong>outtopidxstats</strong>=<em>name</em>][–<strong>overwrite</strong>] [–<strong>help</strong>][–<strong>verbose</strong>] [–<strong>quiet</strong>][–<strong>ui</strong>]</p><h3 id="标记"><a href="#标记" class="headerlink" title="标记:"></a>标记:</h3><ul><li><strong>-p</strong> 只进行预处理，并在生成outtopidxstats之后停止</li><li><strong>–overwrite</strong> 允许输出文件覆盖已存在文件</li><li><strong>–help</strong> 输出使用帮助内容</li><li><strong>–verbose</strong> 打印详细的模块输出</li><li><strong>–quiet</strong> 安静模式得到模块输出</li><li><strong>–ui</strong> 强制启动GUI对话框</li></ul><h3 id="参数"><a href="#参数" class="headerlink" title="参数:"></a>参数:</h3><ul><li><p><strong>parameters</strong>=<em>name</em> <strong>[必须]</strong></p><p>输入的TOPMODEL参数文件名称</p></li><li><p><strong>topidxstats</strong>=<em>name</em> <strong>[必须]</strong></p><p>输入地形索引统计文件（topographic index statistics file）的名称</p></li><li><p><strong>input</strong>=<em>name</em> <strong>[必须]</strong><br>输入的降雨量和潜在蒸散发（potential evapotranspiration ）数据文件名称</p></li><li><strong>output</strong>=<em>name</em> <strong>[必须]</strong><br>输出文件名称</li><li><strong>timestep</strong>=<em>integer</em><br>时间步长。为此时间段生成输出</li><li><strong>topidxclass</strong>=<em>integer</em><br>地形索引类 Topographic index class<br>为此地形索引类生成输出</li><li><strong>topidx</strong>=<em>name</em><br>输入的地形索引栅格图的名称。必须剪切到集水边界。用于产生outtopidxstats</li><li><strong>ntopidxclasses</strong>=<em>integer</em><br>地形索引类的数量。用于产生outtopidxstats<br>默认: <em>30</em></li><li><strong>outtopidxstats</strong>=<em>name</em><br>输出的地形索引统计文件的名称。 需要topidx和ntopidxclasses<h2 id="描述"><a href="#描述" class="headerlink" title="描述"></a>描述</h2></li></ul><h3 id="参数描述"><a href="#参数描述" class="headerlink" title="参数描述"></a>参数描述</h3><ul><li><p><strong>parameters</strong></p><p>此文件包含描述研究区的 TOPMODEL 参数. 任何以<code>#</code>的行开始或空行被忽略。</p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">#  Subcatchment name 子流域名称 </div><div class="line">Subcatchment 1</div><div class="line"></div><div class="line">################################################################################</div><div class="line"># A [m^2]:  Total subcatchment area 总的子流域面积（平方米）</div><div class="line">3.31697E+07</div><div class="line"></div><div class="line">################################################################################</div><div class="line"># qs0 [m/h]: Initial subsurface flow per unit area 单位面积初始地下流量</div><div class="line">#		&quot;The first streamflow input is assumed to represent</div><div class="line">#		 only the subsurface flow contribution in the watershed.&quot;</div><div class="line">#								- Liaw (1988)</div><div class="line">#        </div><div class="line">0.000075</div><div class="line"></div><div class="line"># lnTe [ln(m^2/h)]: Areal average of the soil surface transmissivity</div><div class="line"># 土壤表面透射率的面积平均</div><div class="line">4.</div><div class="line"></div><div class="line"># m [m]: Scaling parameter 缩放参数</div><div class="line">0.0125</div><div class="line"></div><div class="line"># Sr0 [m]: Initial root zone storage deficit </div><div class="line">0.0025</div><div class="line"></div><div class="line"># Srmax [m]: Maximum root zone storage deficit</div><div class="line">0.041</div><div class="line"></div><div class="line"># td [h]: Unsaturated zone time delay per unit storage deficit if greater than 0</div><div class="line">#  OR</div><div class="line"># -alpha: Effective vertical hydraulic gradient if not greater than 0.</div><div class="line">#</div><div class="line"># For example, -10 means alpha=10.</div><div class="line">60.</div><div class="line"></div><div class="line"># vch [m/h]: Main channel routing velocity</div><div class="line">20000.</div><div class="line"></div><div class="line"># vr [m/h]: Internal subcatchment routing velocity</div><div class="line">10000.</div><div class="line"></div><div class="line">################################################################################</div><div class="line"># infex: Calculate infiltration excess if not zero (integer)</div><div class="line">0</div><div class="line"></div><div class="line"># K0 [m/h]: Surface hydraulic conductivity 表面水力传导率</div><div class="line">2.</div><div class="line"></div><div class="line"># psi [m]: Wetting front suction</div><div class="line">0.1</div><div class="line"></div><div class="line"># dtheta: Water content change across the wetting front</div><div class="line">0.1</div><div class="line"></div><div class="line">################################################################################</div><div class="line"># d [m]: Distance from the catchment outlet 距离集水口的距离</div><div class="line">#		The first value should be the mainstream distance from</div><div class="line">#		the subcatchment outlet to the catchment outlet.</div><div class="line"># 第一个值应该是主流到集水处出口的距离</div><div class="line"># Ad_r:  子流域的累积面积比 Cumulative area ratio of subcatchment (0.0 - 1.0)</div><div class="line">#		The first and last values should be 0 and 1, respectively. 第一个和最后一个值分别为0和1。</div><div class="line"></div><div class="line">#   d  Ad_r</div><div class="line">    0   0.0</div><div class="line"> 1000   0.2</div><div class="line"> 2000   0.4</div><div class="line"> 3000   0.6</div><div class="line"> 4000   0.8</div><div class="line"> 5000   1.0</div></pre></td></tr></table></figure></li><li><p><strong>input</strong></p><p>此文件包含天气观测数据.</p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line"># dt [h]: 时间步长</div><div class="line">24</div><div class="line"></div><div class="line">################################################################################</div><div class="line"># R [m/dt]:  Rainfall 降雨</div><div class="line"># Ep [m/dt]: Potential evapotranspiration 潜在蒸散发量</div><div class="line"></div><div class="line"># R             Ep</div><div class="line">0.000033        0.000000</div><div class="line">0.000053        0.011938</div><div class="line">0.004821        0.000000</div><div class="line">.</div><div class="line">.</div><div class="line">.</div></pre></td></tr></table></figure></li><li><p><strong>timestep</strong></p><p>如果指定了时间步长，则除了出口处的总结和总流量之外，还将为特定时间步长生成输出。该参数可以与<strong>topidxclass</strong>组合，以同时指定时间步长和地形索引类。如果没有<strong>topidxclass</strong>给出，输出会为所有的地形指数类生成。</p><p>If a time step is specified, output will be generated for the specific time step in addition to the summary and total flows at the outlet. This parameter can be combined with <strong>topidxclass</strong> to specify a time step and topographic index class at the same time. If no <strong>topidxclass</strong> is given, output will be generated for all the topographic index classes.</p></li><li><p><strong>toptopidxclass</strong></p><p>如果指定了地形索引类，将为给定的地形索引类生成输出。该参数可以与<strong>时间步长</strong>组合。如果没有给出<strong>时间步长</strong>，则将为所有<strong>时间步长生成</strong>输出。</p><p>If a topographic index class is specified, output will be generated for the given topographic index class. This parameter can be combined with <strong>timestep</strong>. If no <strong>timestep</strong> is given, output will be generated for all the time steps.</p></li><li><p><strong>topidx</strong>, <strong>ntoptopidxclasses</strong>, <strong>outtoptopidxstats</strong></p><p>该<strong>topidx</strong>地图可以选择用于创建一个新的地形指数统计文件。该地图必须已经剪切到流域边界。地形索引值的整个范围将分为<strong>ntoptopidx</strong>类，并且每个类的面积比将在<strong>outtoptopidxstats</strong>文件中报告 。除非需要创建新的<strong>topidxstats</strong>文件，否则可以省略这三个参数 。</p><p>The <strong>topidx</strong> map can optionally be used for creating a new topographic index statistics file. This map has to be already clipped to the catchment boundary. The entire range of topographic index values will be divided into <strong>ntoptopidxclasses</strong> and the area ratio of each class will be reported in the <strong>outtoptopidxstats</strong> file. These three parameters can be omitted unless a new <strong>topidxstats</strong> file needs to be created.</p></li></ul><h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><ul><li>Cho, H., 2000. GIS Hydrological Modeling System by Using Programming Interface of GRASS. Master’s Thesis, Department of Civil Engineering, Kyungpook National University, Korea.</li><li>Beven K., R. Lamb, P. Quinn, R. Romanowicz, and J. Freer, 1995. TOPMODEL, in V.P. Singh (Ed.). Computer Models of Watershed Hydrology. Water Resources Publications.</li><li>Liaw, S.C., 1988. Streamflow Simulation Using a Physically Based Hydrologic Model in Humid Forested Watersheds. Dissertation, Colorado State University, CO. p163.</li></ul><h2 id="其他内容"><a href="#其他内容" class="headerlink" title="其他内容"></a>其他内容</h2><p><a href="https://grass.osgeo.org/grass72/manuals/r.fill.dir.html" target="_blank" rel="external">r.fill.dir</a>, <a href="https://grass.osgeo.org/grass72/manuals/r.mapcalc.html" target="_blank" rel="external">r.mapcalc</a>, <a href="https://grass.osgeo.org/grass72/manuals/r.topidx.html" target="_blank" rel="external">r.topidx</a></p><p><a href="http://idea.isnew.info/r.topmodel.html" target="_blank" rel="external">如何运行 r.topmodel</a></p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">g.region raster=dem # set the region and resolution correctly</div><div class="line">r.watershed elevation=dem drainage=drain # Create a drainage(水系) map (drain).don’t need to fill sinks in the elevation map because r.watershed uses a least-cost algorithm. （流域分析）</div><div class="line">r.water.outlet input=drain output=basin coord=-109050.647255,1141527.27768 # a watershed boundary map (basin) to define the study area. （流域盆地生成）</div><div class="line">r.mask raster=basin # 可选。掩膜</div><div class="line">r.topidx input=dem output=topidx # Create a topographic index map (topidx) 地形指数</div><div class="line">r.topmodel -p topidx=topidx ntopidxclasses=30 outtopidxstats=topidxstats.txt # Create a topographic index statistics file （topidxstats.txt）</div><div class="line">r.topmodel param=params.txt topidxstats=topidxstats.txt input=input.txt output=output.txt # TOPMPDEL模拟。 input.txt contains observed weather data (Rainfall &amp; Potential evapotranspiration)</div></pre></td></tr></table></figure><h4 id="Calibrating-model-parameters-using-R"><a href="#Calibrating-model-parameters-using-R" class="headerlink" title="Calibrating model parameters using R"></a>Calibrating model parameters using R</h4><p>read and write the parameters file：write params.txt，read output.tx</p><h2 id="作者"><a href="#作者" class="headerlink" title="作者"></a>作者</h2><p>Huidae Cho, Hydro Laboratory, Kyungpook National University, South Korea</p><p>Based on TMOD9502.FOR by Keith Beven.</p><p><em>Last changed: $Date: 2017-03-01 03:45:44 -0800 (Wed, 01 Mar 2017) $</em></p><h2 id="源码"><a href="#源码" class="headerlink" title="源码"></a>源码</h2><p><a href="https://trac.osgeo.org/grass/browser/grass/branches/releasebranch_7_2/raster/r.topmodel" target="_blank" rel="external">r.topmodel source code</a> (<a href="https://trac.osgeo.org/grass/log/grass/branches/releasebranch_7_2/raster/r.topmodel" target="_blank" rel="external">history</a>)</p><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
       
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>52°North WPS 学习</title>
    <link href="houzw.github.io.git/2017/04/11/52%C2%B0North-WPS-%E5%AD%A6%E4%B9%A0/"/>
    <id>houzw.github.io.git/2017/04/11/52°North-WPS-学习/</id>
    <published>2017-04-11T06:18:57.000Z</published>
    <updated>2017-04-11T10:00:08.709Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Sun Mar 18 2018 11:22:28 GMT+0800 (中国标准时间) --><h1 id="52°North-WPS"><a href="#52°North-WPS" class="headerlink" title="52°North WPS"></a>52°North WPS</h1><blockquote><p><a href="http://52north.org/communities/geoprocessing/wps/index.html" target="_blank" rel="external">主页</a></p><p><a href="https://github.com/52North/WPS" target="_blank" rel="external">GitHub</a></p></blockquote><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>52°North Web Processing Service 以标准化的方式在网络上部署地理处理服务. 它具有用于处理和数据编码的可插拔架构. 该实现基于当前的OpenGIS 规范: 05-007r7 .</p><p>其专注于创建可扩展的框架来为网络提供泛化算法.</p><h3 id="当前功能特点"><a href="#当前功能特点" class="headerlink" title="当前功能特点"></a>当前功能特点</h3><ul><li><p>一般特性与使用规范</p><ul><li>全 Java开源实现.</li><li>支持所有的WPS 1.0.0 (05-007r7)规范功能与操作</li><li>用于算法和XML数据处理框架的可插拔框架</li><li>基于强键的库构建 (JTS, geotools, xmlBeans, servlet API, derby)</li><li>支持服务活动全纪录<ul><li>支持根据规范的异常处理</li><li>存储执行结果</li><li>全Maven支持</li></ul></li></ul></li><li><p>客户端</p><ul><li>访问WPS的基本客户端实现 （包括完整的XML编码)</li></ul></li><li>WPS 调用<ul><li>同步/异步调用</li><li>原始数据支持</li><li>支持HTTP-GET</li><li>支持HTTP-POST</li></ul></li><li><p>支持WPS 数据类型(选择)</p><ul><li>GeoTiff</li><li>ArcGrid</li><li>对ComplexData的完整GML2 支持</li><li>对ComplexData的完整GML3 支持</li><li>Shapefiles</li><li>KML</li><li>WKT</li></ul></li><li><p>扩展</p><ul><li><a href="https://wiki.52north.org/bin/view/Geostatistics/WPS4R" target="_blank" rel="external">WPS4R - R 后端</a></li><li><a href="http://52north.org/communities/geoprocessing/wps/backends/52n-wps-grass.html" target="_blank" rel="external">GRASS 开箱即用扩展</a></li><li><a href="http://52north.org/communities/geoprocessing/wps/backends/52n-wps-sextante.html" target="_blank" rel="external">220+ SEXTANTE 处理</a></li><li>Web GUI 服务维护</li><li><a href="http://52north.org/communities/geoprocessing/wps/backends/52n-wps-ags.html" target="_blank" rel="external">ArcGIS Server 连接</a></li></ul></li><li><p>结果存储</p><ul><li>全部结果可存储为简单地使用URL访问的网络资源</li><li>Raster/Vector 结果可直接存储为WMS 图层</li><li>Vector 可直接存储为 WFS 图层</li><li>Raster 可直接存储为 WCS 图层</li></ul></li></ul><h3 id="未来方向"><a href="#未来方向" class="headerlink" title="未来方向"></a>未来方向</h3><ul><li>流式 WPS</li><li>数据溯源</li></ul><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><h4 id="下载"><a href="#下载" class="headerlink" title="下载"></a><a href="http://52north.org/communities/geoprocessing/wps/download.html" target="_blank" rel="external">下载</a></h4><p><a href="http://52north.org/downloads/send/15-wps/504-52n-wps-webapp-3-6-1" target="_blank" rel="external">52°North WPS 3.6.1</a>, <a href="http://52north.org/downloads/send/15-wps/505-wps-3-6-1-geotools-package" target="_blank" rel="external">额外的GeoTools 包</a></p><p>源码： <code>git clone https://github.com/52North/WPS.git</code></p><h4 id="系统要求"><a href="#系统要求" class="headerlink" title="系统要求"></a>系统要求</h4><p>Java 7+，Tomcat 6 +</p><h4 id="安装-1"><a href="#安装-1" class="headerlink" title="安装"></a>安装</h4><ul><li>重命名下载的 downloaded .war 文件为 wps.war</li><li>将war包放到tomcat的webapp目录下</li></ul><h4 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h4><p><a href="https://wiki.52north.org/Geoprocessing/ConfiguringTheWPS" target="_blank" rel="external">https://wiki.52north.org/Geoprocessing/ConfiguringTheWPS</a></p><h4 id="教程"><a href="#教程" class="headerlink" title="教程"></a>教程</h4><p><a href="https://wiki.52north.org/Geoprocessing/GeoprocessingTutorials" target="_blank" rel="external">https://wiki.52north.org/Geoprocessing/GeoprocessingTutorials</a></p><h4 id="处理后台"><a href="#处理后台" class="headerlink" title="处理后台"></a>处理后台</h4><ul><li><a href="http://52north.org/communities/geoprocessing/wps/backends/52n-wps-grass.html" target="_blank" rel="external">GRASS Backend</a>.</li></ul><ul><li><a href="http://52north.org/communities/geoprocessing/wps/backends/52n-wps-ags.html" target="_blank" rel="external">ArcGIS Server Backend</a>.</li><li><a href="http://52north.org/communities/geoprocessing/wps/backends/52n-wps-sextante.html" target="_blank" rel="external">Sextante Backend</a>.</li><li><a href="https://wiki.52north.org/bin/view/Geostatistics/WPS4R" target="_blank" rel="external">WPS4R</a>.</li></ul><h3 id="GRASS-处理后台"><a href="#GRASS-处理后台" class="headerlink" title="GRASS 处理后台"></a>GRASS 处理后台</h3><ol><li>从<a href="http://52north.org/downloads/category/15-wps" target="_blank" rel="external">这里</a>下载最新的WPS release包.(需要源码的话查看 <a href="https://wiki.52north.org/Geoprocessing/TutorialWpsEclipseIndigoGit" target="_blank" rel="external">教程</a> )</li><li>重命名 downloaded .war（52n-wps-webapp-3.6.1.war） 文件为 wps.war ，并将其放到你的<code>tomcat/webapp</code>目录下.</li><li>从 <a href="http://grass.osgeo.org/grass70/binary/mswindows/native/" target="_blank" rel="external">这里</a>下载 GRASS 7.0 安装文件.</li><li>使用安装文件安装 GRASS 7.0</li><li>打开 <code>&lt;GRASS_INSTALL_PATH&gt;\demolocation</code> （如<code>D:\Program Files\GRASS GIS 7.2.0\demolocation</code> ）目录下的<code>.grassrc70</code> 文件. 修改 GISDBASE 参数为你的 GRASS 安装路径，e.g. <code>GISDBASE: C:/Programme/GRASS-70-SVN</code> (使用斜杠代替反斜杠).（<code>&quot;D:/Program Files/GRASS GIS 7.2.0&quot;</code> ?）</li><li>从 <a href="http://52north.org/files/geoprocessing/GRASS/wps-grass-bridge-patched.zip" target="_blank" rel="external">这里</a> 下载并解压 wps-grass-bridge，或使用 <a href="http://wps-grass-bridge.googlecode.com/svn/trunk/" target="_blank" rel="external">SVN</a>检出 . <img src="https://wiki.52north.org/pub/System/DocumentGraphics/warning.png" alt="ALERT!"> 注意，GRASS后台目前不能与bridge的trunk 版兼容 .</li><li>下载和安装 Python. 虽然 python 可执行文件与 GRASS 7.0 一起提供, 但GrassModuleStarter 需要一些额外的库. 因而，需要安装完整的 python.</li><li>启动 Apache Tomcat</li><li>访问 <a href="http://localhost:8080/wps/webAdmin/index.jsp" target="_blank" rel="external">http://localhost:8080/wps/webAdmin/index.jsp</a> 用户名: wps 密码: wps<ul><li>标签页 <code>&lt;Server Settings&gt;</code><ul><li>需要时，点击 edit 按钮并修改端口</li></ul></li><li>标签页<code>&lt;Algorithm Repositories&gt;</code><ul><li>启用 Grass Repository</li><li>点击edit 按钮并设置变量<ul><li><code>Grass_Home</code> 必须指向 GRASS 7.0 的安装目录</li><li><code>Python_Home</code> 必须指向 python 可执行文件(e.g. the extrabin directory of the GRASS 7.0 installation or the path to the python installation (see step 7.))</li><li><code>Python_Path</code> 必须指向 python 安装目录.</li><li><code>Addon_Dir</code> (可选) 必须指向包含GRASS扩展的目录 (同名的python 脚本和 .exe 文件).</li><li><code>ModuleStarter_Home</code> 变量必须指向wps-grass-bridge包含<code>GrassModuleStarter.py</code>文件的子目录.</li><li><code>GISRC_Dir</code> 必须指向 <code>.grassrc70</code> 文件. 父目录必须也包含PERMANENT 目录. 这一点在安装 GRASS 7.0时会自动创建,因而除非你知道自己在干啥，不然在此处填上 <code>&lt;GRASS_INSTALL_PATH&gt;\demolocation\.grassrc70</code> . 参考第5步.</li><li><code>TMP_Dir</code> 必须指向一个非只读目录. <strong>注意</strong>: 每次包含GRASS-backend 的WPS启动时，此临时目录内的文件会全部删除, 因此不要将其指向存有重要文件的目录!</li><li>所有的将被暴露为WPS 处理的 Grass 处理将展示在此仓库下的 algorithm-properties 列表中. 在这里，你可以根据你的需要添加、删除、激活或失效一个Grass 处理.</li></ul></li></ul></li><li>示例<img src="https://wiki.52north.org/pub/Geoprocessing/TutorialBackendGRASSWin/grass_settings_windows_cropped.png" alt=""></li><li>配置完成之后点击<code>Save and activate Configuration</code></li><li>WPS Admin Console 的用户名和密码可以在文件 <code>_TOMCAT_INSTALL_PATH_\webapps\wps\WEB-INF\classes\users.xml</code> 中修改</li></ul></li></ol><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
       
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Zoo Project学习 02</title>
    <link href="houzw.github.io.git/2017/04/10/Zoo-Project%E5%AD%A6%E4%B9%A0-02/"/>
    <id>houzw.github.io.git/2017/04/10/Zoo-Project学习-02/</id>
    <published>2017-04-10T06:56:29.000Z</published>
    <updated>2017-04-10T12:47:31.703Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Sun Mar 18 2018 11:22:28 GMT+0800 (中国标准时间) --><h1 id="ZOO-Kernel"><a href="#ZOO-Kernel" class="headerlink" title="ZOO-Kernel"></a>ZOO-Kernel</h1><p>ZOO-Kernel 是ZOO-Project WPS 平台的核心. 是WPS规范的C语言实现，提供强大、可扩展的 WPS 服务.<br>in C language which provides a powerful and extensible WPS server.</p><p>ZOO-Kernel 是一个可扩展的 WPS 服务器，可让您的系统更加强大. 它提供运行在Linux, Mac OSX ™ 和Windows ™ 系统上的全功能处理引擎. ZOO-Kernel 是一个运行中普通web服务器 (Apache 或 IIS ™)上的 CGI 程序. 其可以与新的或现存 的web平台无缝集成. ZOO-Kernel 让你能够使用符合语法规则的 WPS请求处理空间或非空间数据. WPS 服务器能够通过加载使用不同程序语言编写的动态库和源代码来实现管理和链接WPS Services (具体查看 ZOO-Services) 。</p><h3 id="规范支持"><a href="#规范支持" class="headerlink" title="规范支持"></a>规范支持</h3><p>ZOO-Kernel 符合并实现了 WPS 1.0.0和 WPS 2.0.0规范。其可执行的操作包括：</p><ul><li><strong><em>GetCapablities</em></strong>: 返回服务级的元数据信息. 它提供一个可使用的处理服务列表.</li><li><strong><em>DescribeProcess</em></strong>: 返回一个处理的描述信息，包括支持的输入和输出.</li><li><strong><em>Execute</em></strong>: 启动计算并返回一个特定过程产生的输出.</li><li><strong><em>GetStatus</em></strong>: 只有 WPS 2.0.0 支持, 使客户端能够获取运行中服务的运行状态。</li><li><strong><em>GetResult</em></strong>: 只有 WPS 2.0.0 支持, 使客户端能够获取运行中服务的最终结果.</li><li><strong><em>Dismiss</em></strong>: 只有 WPS 2.0.0 支持, 使客户端能够请求服务器停止一个运行中的服务并移除其产生的任何文件.</li></ul><p>ZOO-Kernel 支持的测试工具：</p><ul><li><a href="https://github.com/WPS-Benchmarking/cptesting" target="_blank" rel="external">cptesting</a></li><li>WPS Test Suite： 由 <a href="http://cite.opengeospatial.org/" target="_blank" rel="external">OGC compliancy program</a> 提供</li><li>XML 返回结果验证： <a href="http://xmlsoft.org/xmllint.html/" target="_blank" rel="external">XMLint</a>.</li></ul><h3 id="多语言支持（Polyglot）"><a href="#多语言支持（Polyglot）" class="headerlink" title="多语言支持（Polyglot）"></a>多语言支持（Polyglot）</h3><table><thead><tr><th>语言</th><th>服务提供</th><th>数据结构</th><th>返回值类型</th></tr></thead><tbody><tr><td>C /C++</td><td>SharedLibrary</td><td>maps* M</td><td>integer</td></tr><tr><td>Java</td><td>类（Class）</td><td>HashMap</td><td>integer</td></tr><tr><td>Python</td><td>Module File</td><td>Dictionary</td><td>integer</td></tr><tr><td>PHP</td><td>脚本文件</td><td>Array</td><td>integer</td></tr><tr><td>Perl</td><td>脚本文件</td><td></td><td>integer</td></tr><tr><td>Ruby</td><td>脚本文件</td><td>Hash</td><td>integer</td></tr><tr><td>Fortran</td><td>Shared Library</td><td>CHARACTER*(1024) M(10,30)</td><td>integer</td></tr><tr><td>JavaScript</td><td>脚本文件</td><td>Object or Array</td><td>Object/Array</td></tr></tbody></table><h3 id="ZOO-Kernel-配置"><a href="#ZOO-Kernel-配置" class="headerlink" title="ZOO-Kernel 配置"></a>ZOO-Kernel 配置</h3><h4 id="主配置文件"><a href="#主配置文件" class="headerlink" title="主配置文件"></a>主配置文件</h4><p>ZOO-Kernel的主配置文件为<code>main.cfg</code> ，其与Zoo-Kernel在同一目录下（一般为<code>usr/lib/cgi-bin/</code> 或 <code>C:\inetpub\cgi-bin</code> ）</p><blockquote><p>ZOO-Kernel (<code>/usr/lib/cgi-bin/zoo_loader.cgi</code>) 与其配置文件 (<code>/usr/lib/cgi-bin/main.cfg</code>) 必须位于同一目录.</p></blockquote><figure class="highlight yaml"><table><tr><td class="code"><pre><div class="line"><span class="comment"># main.cfg</span></div><div class="line"></div><div class="line"><span class="comment"># define a specific HTTP Response header</span></div><div class="line">[headers]</div><div class="line">X-Powered-By=ZOO@ZOO-Project</div><div class="line"><span class="comment"># if allow CORS support for POST requests coming from myhost.net</span></div><div class="line">Access-Control-Allow-Origin=myhost.net</div><div class="line">Access-Control-Allow-Methods=POST</div><div class="line">Access-Control-Allow-Headers=content-type</div><div class="line"></div><div class="line">[main]</div><div class="line">version=<span class="number">1.0</span><span class="number">.0</span>  <span class="comment"># Supported WPS version.</span></div><div class="line">encoding=utf<span class="bullet">-8</span></div><div class="line">dataPath=/var/data <span class="comment"># directory where data files are stored (used to store mapfiles and data when MapServer support is activated).</span></div><div class="line">tmpPath=/var/www/temp <span class="comment"># directory where temporary files are stored (such as ExecuteResponse when store-ExecuteResponse is set to true).</span></div><div class="line"><span class="attr">tmpUrl:</span> <span class="comment"># temporary files directory (cf. tmpPath).</span></div><div class="line">cacheDir=/var/www/cache <span class="comment"># directory where cached request files are stored (optional).</span></div><div class="line">sessPath=/tmp <span class="comment"># </span></div><div class="line">serverAddress=http://localhost/cgi-bin/zoo_loader.cgi <span class="comment"># URL to the ZOO-Kernel instance</span></div><div class="line">lang=en-US,zh-CN <span class="comment"># Supported natural languages</span></div><div class="line">language=en-US <span class="comment">#</span></div><div class="line">mapserverAddress=http://localhost/cgi-bin/mapserv.cgi <span class="comment"># URL to the MapServer instance (optional).</span></div><div class="line">msOgcVersion=<span class="number">1.0</span><span class="number">.0</span> <span class="comment"># Version of all supported OGC Web Services output (optional).</span></div><div class="line"><span class="attr">servicePath:</span> <span class="comment"># Define a specific location to search for services rather than using the ZOO-Kernel directory. If this parameter is not defined, then the ZOO-Kernel will search for services using its directory.</span></div><div class="line">tmpUrl=http:/localhost/temp/ <span class="comment">#</span></div><div class="line">cors=<span class="literal">false</span> <span class="comment"># Define if support Cross-Origin Resource Sharing. If not, then the ZOO-Kernel won’t support CORS. 跨域支持</span></div><div class="line"><span class="attr">libPath:</span> <span class="comment"># (Optional) Path to a directory where the ZOO-kernel should search for service providers, e.g., shared libraries with service implementations (the serviceProvider parameter in the service configuration (.zcfg) file). only C/C++ or PHP</span></div><div class="line"></div><div class="line"><span class="comment"># not ZOO-Project specific</span></div><div class="line"><span class="comment"># for service metadata XML document</span></div><div class="line">[identification]</div><div class="line">keywords=t,ZOO-Project, ZOO-Kernel,WPS,GIS</div><div class="line">title=ZOO-Project demo instance</div><div class="line">abstract= This is ZOO-Project, the Open WPS platform.</div><div class="line">accessConstraints=none</div><div class="line">fees=None</div><div class="line"></div><div class="line">[provider]</div><div class="line">positionName=Developer</div><div class="line">providerName=GeoLabs SARL</div><div class="line">addressAdministrativeArea=<span class="literal">False</span></div><div class="line">addressDeliveryPoint=<span class="number">1280</span>, avenue des Platanes</div><div class="line">addressCountry=fr</div><div class="line">phoneVoice=+<span class="number">33467430995</span></div><div class="line">addressPostalCode=<span class="number">34970</span></div><div class="line">role=Dev</div><div class="line">providerSite=http://geolabs.fr</div><div class="line">phoneFacsimile=<span class="literal">False</span></div><div class="line">addressElectronicMailAddress=gerald@geolabs.fr</div><div class="line">addressCity=Lattes</div><div class="line">individualName=Gerald FENOY</div><div class="line"></div><div class="line"><span class="comment"># specific environment variables to be set prior the loading of Services Provider and Service execution.</span></div><div class="line">[env]</div><div class="line">DISPLAY=:<span class="number">1</span> <span class="comment"># Service requires the access to a X server running on framebuffer</span></div><div class="line"></div><div class="line">[security]</div><div class="line">attributes=Authorization,Cookie,User-Agent</div><div class="line">hosts=localhost,<span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span> <span class="comment"># *</span></div><div class="line"></div><div class="line">[database]</div><div class="line">dbname=zoo_project</div><div class="line">port=<span class="number">5432</span></div><div class="line">user=username</div><div class="line">host=<span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span></div><div class="line">type=PG <span class="comment"># postgresql?</span></div><div class="line">schema=public</div><div class="line"></div><div class="line"><span class="comment"># optional</span></div><div class="line"><span class="comment"># lists explicitely a set of service configuration files the the ZOO-Kernel should parse</span></div><div class="line">[include]</div><div class="line">servicename1 = /my/service/repository/service1.zcfg</div><div class="line">servicename2 = /my/service/repository/service2.zcfg</div></pre></td></tr></table></figure><p>如果一个包含的服务位于当前目录（CWD ）（或子目录）, 它将以其在 [include] 部分的名称作为发布后的名称。</p><figure class="highlight yaml"><table><tr><td class="code"><pre><div class="line">[include]</div><div class="line">myService = /[CWD]/name/space/myService.zcfg <span class="comment"># myService</span></div><div class="line"></div><div class="line"><span class="comment"># 如果还存在下列配置，则上面的发布为 name.space.myService</span></div><div class="line"><span class="comment"># 下面的发布为 myService</span></div><div class="line">[include]</div><div class="line">myService = /some/other/dir/myService.zcfg</div></pre></td></tr></table></figure><h5 id="其他可选配置还包括："><a href="#其他可选配置还包括：" class="headerlink" title="其他可选配置还包括："></a>其他可选配置还包括：</h5><figure class="highlight yaml"><table><tr><td class="code"><pre><div class="line"><span class="comment"># used by the ZOO-Kernel to store runtime informations before the execution of a WPS service</span></div><div class="line"></div><div class="line">[lenv]</div><div class="line"><span class="attr">sid:</span> <span class="comment"># The WPS Service unique identifier ，(r),</span></div><div class="line"><span class="attr">status:</span> <span class="comment"># The current progress value ( a value between 0 and 100 in percent (%) )， (rw),</span></div><div class="line"><span class="attr">cwd:</span> <span class="comment"># The current working directory of ZOO-Kernel,(r)</span></div><div class="line"><span class="attr">message:</span> <span class="comment"># An error message used when SERVICE_FAILED is returned (optional),  (rw)</span></div><div class="line"><span class="attr">cookie:</span> <span class="comment">#The cookie to be returned to the client (for example for authentication purpose).  (rw)</span></div><div class="line">file.pid: <span class="comment">#The file used by the ZOO-Kernel to store process identifier. (r)</span></div><div class="line">file.sid: <span class="comment">#The file used by the ZOO-Kernel to store service identifier. (r)</span></div><div class="line">file.responseInit: <span class="comment">#The file used by the ZOO-Kernel to store the initial (then final) WPS response. (r)</span></div><div class="line">file.responseFinal: <span class="comment"># The file used by the ZOO-Kernel to temporary store the final WPS response. (r)</span></div><div class="line"></div><div class="line"><span class="comment"># automatically created by the ZOO-Kernel before the execution of a WPS service, contains all the environment variables available at runtime</span></div><div class="line">[renv]</div><div class="line"></div><div class="line"><span class="comment"># store sessions information on the server side.</span></div><div class="line">[senv]</div><div class="line"><span class="comment"># must contain the following parameter at least</span></div><div class="line"><span class="attr">XXX:</span> <span class="comment"># The session unique identifier where XXX is the name included in the cookie which is returned.</span></div></pre></td></tr></table></figure><h2 id="MapServer支持"><a href="#MapServer支持" class="headerlink" title="MapServer支持"></a>MapServer支持</h2><p>利用可选的MapServer支持，可以直接将WPS结果自动发布为WMS、WFS或WCS。</p><h3 id="工作原理"><a href="#工作原理" class="headerlink" title="工作原理"></a>工作原理</h3><p>当一个包含<code>mimeType=image/png</code>的请求被发送给Zoo-Kernel时，后者会检测<code>useMapServer</code> 选项是否为<code>true</code>， （为true）然后自动地：</p><ul><li>利用<code>&lt;Default&gt;</code>块的定义，执行服务</li><li>保存结果到硬盘（[main]-&gt;dataPath配置的目录）</li><li>使用MapServer的C-API生成一个mapfile文件（在[main]-&gt;dataPath配置的目录）</li></ul><h3 id="安装与配置"><a href="#安装与配置" class="headerlink" title="安装与配置"></a>安装与配置</h3><h4 id="编译安装"><a href="#编译安装" class="headerlink" title="编译安装"></a>编译安装</h4><ul><li>最新的ZOO-Kernel trunk版本</li><li>MapServer &gt;= 6.0.1</li></ul><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">cd &lt;PREV_SVN_CO&gt;</div><div class="line">svn checkout http://svn.zoo-project.org/svn/trunk/zoo-kernel zoo-kernel-ms</div><div class="line"></div><div class="line"># 解压 mapserver-6.0.1.tar.bz2 并编译</div><div class="line">cd /tmp/zoo-ms-src/mapserver-6.0.1</div><div class="line">./configure --with-ogr=/usr/bin/gdal-config --with-gdal=/usr/bin/gdal-config \</div><div class="line">--with-proj --with-curl --with-sos --with-wfsclient --with-wmsclient \</div><div class="line">--with-wcs --with-wfs --with-postgis --with-kml=yes --with-geos \</div><div class="line">--with-xml --with-xslt --with-threads --with-cairo</div><div class="line">make</div><div class="line">cp mapserv /usr/lib/cgi-bin</div><div class="line"></div><div class="line"># 编译 ZOO-Kernel with MapServer support</div><div class="line">cd zoo-kernel-ms</div><div class="line">autoconf</div><div class="line">./configure --with-python --with-mapserver=/tmp/zoo-ms-src/mapserver-6.0.1</div><div class="line">make</div><div class="line">cp zoo_loader.cgi /usr/lib/cgi-bin</div></pre></td></tr></table></figure><h4 id="主配置文件-1"><a href="#主配置文件-1" class="headerlink" title="主配置文件"></a>主配置文件</h4><p><code>/usr/lib/cgi-bin/main.cfg</code>中在<code>[main]</code> 部分添加</p><figure class="highlight yaml"><table><tr><td class="code"><pre><div class="line">dataPath = /var/www/temp/ </div><div class="line">mapserverAddress=http://localhost/cgi-bin/mapserv</div></pre></td></tr></table></figure><p>dataPath必须设置，并且必须属于 Apache 用户<br></p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">mkdir /var/www/temp/</div><div class="line">chown -r apache:apache /var/www/temp/</div></pre></td></tr></table></figure><p></p><p>此目录下（仅）需要一个<code>symbols.sym</code> 文件，其内容为</p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">SYMBOLSET</div><div class="line">  SYMBOL</div><div class="line">      NAME &quot;circle&quot;</div><div class="line">      TYPE ellipse</div><div class="line">      FILLED true</div><div class="line">      POINTS</div><div class="line">          1 1</div><div class="line">      END</div><div class="line">  END</div><div class="line">END</div></pre></td></tr></table></figure><p>至此，MapServer至此已经激活，别忘了在主配置文件中添加mapserverAddress 和 msOgcVersion 参数</p><h3 id="服务配置文件"><a href="#服务配置文件" class="headerlink" title="服务配置文件"></a>服务配置文件</h3><h4 id="useMapserver"><a href="#useMapserver" class="headerlink" title="useMapserver"></a>useMapserver</h4><p>为了激活特定服务的 MapServer WMS/WFS/WCS输出，<strong>必须</strong>在<code>services-zcfg</code> 文件的<code>&lt;Default&gt;</code> 或<code>&lt;Supported&gt;</code>部分配置useMapserver 参数。</p><p><code>useMapserver=true</code>意味着输出结果是兼容gdal的数据源，可以利用MapServer自动发布为WMS,WFS 或 WCS.。</p><p>相关的mimeType：</p><ul><li><code>text/xml</code> : 说明输出数据可以通过 WFS GetFeature请求获取 (默认 版本1.1.0)</li><li><code>image/tiff</code>: 通过 WCS GetCoverage 请求 （默认版本2.0.0）</li><li>其他 mimeType（有useMapserver 选项）：WMS GetMap （1.3.0）</li></ul><h4 id="样式"><a href="#样式" class="headerlink" title="样式"></a>样式</h4><p>可选的<code>msStyle</code>参数可被用于自定义MapServer样式块（只针对矢量数据）</p><p><code>msStyle = STYLE COLOR 125 0 105 OUTLINECOLOR 0 0 0 WIDTH 3 END</code></p><p>配置了MapServer支持的 ZOO-Service 配置文件示例：</p><figure class="highlight xml"><table><tr><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">Default</span>&gt;</span></div><div class="line">  mimeType = text/xml</div><div class="line">  encoding = UTF-8</div><div class="line">  schema = http://schemas.opengis.net/gml/3.1.0/base/feature.xsd</div><div class="line">  useMapserver = true</div><div class="line"><span class="tag">&lt;/<span class="name">Default</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">Supported</span>&gt;</span></div><div class="line">  mimeType = image/png</div><div class="line">  useMapserver = true</div><div class="line">  asReference = true</div><div class="line">  msStyle = STYLE COLOR 125 0 105 OUTLINECOLOR 0 0 0 WIDTH 3 END</div><div class="line"><span class="tag">&lt;/<span class="name">Supported</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">Supported</span>&gt;</span></div><div class="line">  mimeType = application/vnd.google-earth.kmz</div><div class="line">  useMapserver = true</div><div class="line">  asReference = true</div><div class="line">  msStyle = STYLE COLOR 125 0 105 OUTLINECOLOR 0 0 0 WIDTH 3 END</div><div class="line"><span class="tag">&lt;/<span class="name">Supported</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">Supported</span>&gt;</span></div><div class="line">  mimeType = image/tif</div><div class="line">  useMapserver = true</div><div class="line">  asReference = true</div><div class="line">  <span class="comment">&lt;!-- 单波段栅格文件时，可设为true，以便利用ZOO-Kernel默认样式将栅格文件进行等间距分类 --&gt;</span></div><div class="line">  msClassify = .... </div><div class="line"><span class="tag">&lt;/<span class="name">Supported</span>&gt;</span></div></pre></td></tr></table></figure><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
       
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>CentOS 7 GDAL 源码安装</title>
    <link href="houzw.github.io.git/2017/04/10/CentOS-7-GDAL-%E6%BA%90%E7%A0%81%E5%AE%89%E8%A3%85/"/>
    <id>houzw.github.io.git/2017/04/10/CentOS-7-GDAL-源码安装/</id>
    <published>2017-04-10T04:55:04.000Z</published>
    <updated>2017-04-10T12:47:36.324Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Sun Mar 18 2018 11:22:28 GMT+0800 (中国标准时间) --><blockquote><p><a href="http://scigeo.org/articles/howto-install-latest-geospatial-software-on-linux.html" target="_blank" rel="external">HOW TO: Install latest geospatial &amp; scientific software on Linux</a> 2012</p><p>RPM安装包列表 <a href="http://dl.fedoraproject.org/pub/epel/7/x86_64/" target="_blank" rel="external">http://dl.fedoraproject.org/pub/epel/7/x86_64/</a></p></blockquote><h3 id="GDAL源码"><a href="#GDAL源码" class="headerlink" title="GDAL源码"></a>GDAL源码</h3><p>GDAL源码 <a href="http://download.osgeo.org/gdal/2.1.2/gdal-2.1.2.tar.gz" target="_blank" rel="external">http://download.osgeo.org/gdal/2.1.2/gdal-2.1.2.tar.gz</a></p><p>或使用SVN</p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">svn checkout https://svn.osgeo.org/gdal/trunk/gdal gdal-trunk</div></pre></td></tr></table></figure><h3 id="关联组件源码-安装包"><a href="#关联组件源码-安装包" class="headerlink" title="关联组件源码/安装包"></a>关联组件源码/安装包</h3><p><a href="https://trac.osgeo.org/geos/" target="_blank" rel="external">GEOS</a>（Geometry Engine, Open Source）</p><p><a href="http://download.osgeo.org/geos/geos-3.6.1.tar.bz2" target="_blank" rel="external">http://download.osgeo.org/geos/geos-3.6.1.tar.bz2</a></p><p>或 <a href="http://dl.fedoraproject.org/pub/epel/7/x86_64/g/geos-3.4.2-2.el7.x86_64.rpm" target="_blank" rel="external">GEOS3.4</a> / <a href="http://dl.fedoraproject.org/pub/epel/7/x86_64/g/geos-devel-3.4.2-2.el7.x86_64.rpm" target="_blank" rel="external">GEOS3.4-devel</a></p><p><a href="http://dl.fedoraproject.org/pub/epel/7/x86_64/p/proj-4.8.0-4.el7.x86_64.rpm" target="_blank" rel="external">Proj 4.8 RPM</a></p><p><a href="http://download.osgeo.org/proj/proj-4.9.3.tar.gz" target="_blank" rel="external">Proj 4.9 tar</a></p><p><a href="https://support.hdfgroup.org/ftp/HDF/releases/HDF4.2.12/src/hdf-4.2.12.tar" target="_blank" rel="external">HDF 4.2.12</a></p><p><a href="https://support.hdfgroup.org/ftp/HDF5/current18/bin/linux-centos7-x86_64-gcc485/hdf5-1.8.18-linux-centos7-x86_64-gcc485-shared.tar.gz" target="_blank" rel="external">HDF5 1.8.18</a></p><p><a href="http://dl.fedoraproject.org/pub/epel/7/x86_64/p/postgis-2.0.7-1.el7.x86_64.rpm" target="_blank" rel="external">PostGIS 2 RPM</a></p><p><a href="https://download.postgresql.org/pub/repos/yum/9.5/redhat/rhel-7-x86_64/pgdg-centos95-9.5-3.noarch.rpm" target="_blank" rel="external">PostgreSQL 9.5 RPM</a></p><p><a href="https://sourceforge.net/projects/swig/files/swig/swig-3.0.12/swig-3.0.12.tar.gz/download?use_mirror=nchc" target="_blank" rel="external">swig 3 (java python)</a></p><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
       
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Linux 目录结构</title>
    <link href="houzw.github.io.git/2017/04/08/Linux-%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84/"/>
    <id>houzw.github.io.git/2017/04/08/Linux-目录结构/</id>
    <published>2017-04-08T07:39:41.000Z</published>
    <updated>2017-04-08T08:17:38.509Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Sun Mar 18 2018 11:22:28 GMT+0800 (中国标准时间) --><h1 id="linux-目录结构"><a href="#linux-目录结构" class="headerlink" title="linux 目录结构"></a>linux 目录结构</h1><blockquote><p>参考地址:</p><p><a href="http://www.178linux.com/9736" target="_blank" rel="external">http://www.178linux.com/9736</a></p><p><a href="http://www.iteye.com/topic/1125162" target="_blank" rel="external">http://www.iteye.com/topic/1125162</a></p><p><a href="http://yangrong.blog.51cto.com/6945369/1288072" target="_blank" rel="external">http://yangrong.blog.51cto.com/6945369/1288072</a></p><p><a href="http://itlab.idcquan.com/linux/administer/939529_1.html" target="_blank" rel="external">http://itlab.idcquan.com/linux/administer/939529_1.html</a></p><p><a href="http://itlab.idcquan.com/linux/administer/939529_2.html" target="_blank" rel="external">http://itlab.idcquan.com/linux/administer/939529_2.html</a></p></blockquote><h2 id="1、linux哲学思想："><a href="#1、linux哲学思想：" class="headerlink" title="1、linux哲学思想："></a>1、linux哲学思想：</h2><ul><li><p>一切皆文件,把几乎所有的资源，包括硬件设备都组织为文件格式；</p></li><li><p>由众多目的单一的小程序组成，一个程序只做一件事，并且要好，组合小程序完成复杂任务；</p></li><li>尽量避免跟用户交互,实现脚本编程，自动完成某些功能；</li><li>使用纯文本文件保存配置信息，管理员只需使用一款文本编辑器既能完成系统配置工作；</li><li>提供机制，而非策略，管道是机制，应用管道处理各种数据是策略，机制就是提供各种接口供使用者组合调用得到想要的数据。</li></ul><h2 id="2、FHS-Filesystem-Hierarchy-Standard-意义"><a href="#2、FHS-Filesystem-Hierarchy-Standard-意义" class="headerlink" title="2、FHS (Filesystem Hierarchy Standard)意义"></a>2、FHS (Filesystem Hierarchy Standard)意义</h2><p>linux核心思想<strong>一切皆文件</strong>，因此,了解linux的文件层次结构以及根据FHS规定的目录名的含义是相当重要的。</p><p>Linux和UNIX的文件系统是一个以“<code>/</code> “为根的阶层式的树状文件结构，<code>/</code> 因此被称为根目录。</p><p>所有的文件和目录都置于根目录<code>/</code>之下。根目录<code>/</code>下面有<code>/etc</code>, <code>/usr</code>, <code>/var</code>, <code>/root</code>, <code>/home</code>, <code>/dev</code>等子目录。</p><p>早期的 UNIX 系统中，各个厂家各自定义了自己的UNIX系统的文件系统构成，比较混乱。为了避免在Linux也产生同样的问题，在Linux面世不久，就开始了对Linux文件系统进行标准化的活动，于1994年推出了名为 FSSTND(Filesystem Standard)的Linux文件系统层次结构标准。之后，FSSTND标准吸引了UNIX社团的开发人员，他们把FSSTND扩大到UNIX系统，FSSTND就变为FHS (Filesystem Hierarchy Standard)。</p><h2 id="3、树状目录结构图"><a href="#3、树状目录结构图" class="headerlink" title="3、树状目录结构图"></a>3、树状目录结构图</h2><p><img src="http://ofcj2lgtd.bkt.clouddn.com/1450239746595149.jpg" alt="230817424.jpg"></p><blockquote><p>软件安装目录惯例：</p><p><code>/usr</code>：系统级的目录；<code>/usr/lib</code> 类似<code>C:/Windows/System32</code> .</p><p><code>/usr/local</code> ：用户级的程序目录。用户自己编译的软件默认会安装到这个目录下。</p><p><code>/opt</code>：用户级的程序目录，opt有可选的意思，可以用于放置第三方大型软件（或游戏）。当不需要时，直接<code>rm -rf</code>掉即可。在硬盘容量不够时，也可将<code>/opt</code>单独挂载到其他磁盘上使用。</p><p><code>/usr/src</code>：系统级的源码目录。</p><p><code>/usr/local/src</code>：用户级的源码目录。</p></blockquote><h2 id="4、目录详细介绍目录"><a href="#4、目录详细介绍目录" class="headerlink" title="4、目录详细介绍目录"></a>4、目录详细介绍目录</h2><h3 id="1-目录-根文件系统"><a href="#1-目录-根文件系统" class="headerlink" title="1./目录(根文件系统)"></a>1.<code>/</code>目录(根文件系统)</h3><table><thead><tr><th>目录</th><th>描述</th></tr></thead><tbody><tr><td><code>/</code></td><td>第一层次结构的根、整个文件系统层次结构的根目录。 <code>cd /</code></td></tr><tr><td><code>/bin</code></td><td>供所有用户使用的基本命令，不能关联至独立分区，OS启动即会用到的程序。主要有：<code>ls cp mkdir cat mv netstat pwd rm sync tar touch sort</code> 等等常用的指令。类似的目录还 <code>/usr/bin</code> ， <code>/usr/local/bin</code>等等。这个目录中的文件都是<strong>可执行的</strong>、<strong>普通用户都可使用的命令</strong>。作为基础系统所需要的<strong>最基础的命令</strong>就是放在这里。</td></tr><tr><td><code>/sbin</code></td><td>存放大多涉及<strong>系统管理</strong>的命令（如引导系统的 init 程序），是超级权限用户 root 的可执行命令存放地，普通用户无权限执行这个目录下的命令（但是有时普通用户也可能会用到）。这个目录和 <code>/usr/sbin</code> ,<code>/usr/X11R6/sbin</code>或<code>/usr/local/sbin</code> 等目录是相似的，要记住，凡是 sbin 中包含的都是 root 权限才能执行的。</td></tr><tr><td><code>/boot</code></td><td>引导程序，内核等存放的目录。 放置linux系统启动时用到的一些文件。<code>/boot/vmlinuz</code>为linux的内核文件，引导加载器（bootloader, gurb)。建议单独分区, 大小100M即可。如果机器中包含多个操作系统，那么可通过修改此目录中的某个配置文件（如 grub.conf ）来调整启动的默认系统，系统启动的选择菜单，以及启动延迟等参数。</td></tr><tr><td><code>/lib</code></td><td>根目录下程序的基本共享库目录，以及内核模块文件（lib/modules）. 此目录下包含系统引导和在根用户执行命令时候所必需用到的共享库。</td></tr><tr><td><code>/lib64</code></td><td>专用于x86_64系统上的铺助共享库文件存放位置</td></tr><tr><td><code>/etc</code></td><td><strong>配置文件目录</strong>（纯文本文件），系统主要的配置文件几乎都放置在这个目录内，例如人员的账号密码文件、 各种服务的启始档等等。一般来说，这个目录下的各文件属性是可以让一般使用者查阅的， 但是只有 root 有权力修改。FHS 建议不要放置可执行文件(binary)在这个目录中喔。比较重要的档案有： <code>/etc/inittab, /etc/init.d/, /etc/modprobe.conf, /etc/X11/,/etc/fstab, /etc/sysconfig/</code> 等等。另外，其下重要的目录有： <code>/etc/init.d/</code>：所有服务的预设启动 script 都是放在这里的，例如要启动或者关闭 iptables 的话：『 <code>/etc/init.d/iptables start</code>』、『<code>/etc/init.d/iptables stop</code>』</td></tr><tr><td><code>/home/USERNAME</code></td><td>这是系统默认的用户主目录( home directory，<code>$HOME</code> 目录)。在你新增一个一般使用者账号时，不给用户家目录都会归范到这里来。比较重要的是，家目录有两种代号：<code>~</code>：代表<strong>当前用户</strong>的家目录，而<code>~dmtsai</code> ：则代表 dmtsai 的家目录! 该目录中保存了绝大多数的<strong>用户文件</strong>(用户自己的配置文件，定制文件，文档，数据等)</td></tr><tr><td><code>/root</code></td><td>系统管理员(root)的主目录（<code>$HOME</code>）。之所以放在这里，是因为如果进入单人维护模式而仅挂载根目录时，该目录就能够拥有 root 的主目录，所以我们会希望root主目录不与根目录放置在同一个分割槽中。</td></tr><tr><td><code>/media</code></td><td>便捷式移动设备挂载点（cdrom, usb），media 是『媒体』的英文，顾名思义，这个/media 底下放置的就是可移除的装置啦! 包括软盘、光盘、DVD 等等装置都暂时挂载二此。常见的档名有：/media/floppy, /media/cdrom 等等。</td></tr><tr><td><code>/mnt</code></td><td>如果你想要暂时挂载某些额外的装置，一般建议你可以放置到这个目录中。 在古早时候，这个目录的用途与/media 相同啦!只是有了/media 之后，这个目录就用来暂时挂载用了。</td></tr><tr><td><code>/dev</code></td><td>设备文件及特殊文件存储位置（b:block device 离散访问 c:character device 线性访问）.任何装置不接口设备都是以档案的型态存在二这个目录当中的。 你只要透过存取这个目录底下的某个档案，就等二存取某个装置啰～ 比要重要的档案有<code>/dev/null, /dev/zero, /dev/tty, /dev/lp*, /dev/hd*, /dev/sd*</code>等等</td></tr><tr><td><code>/opt</code></td><td>这个是给第三方程序软件放置的目录。什么是第三方协力软件啊? 举例来说，KDE这个桌面管理系统是一个独立的计划，不过他可以安装到 Linux 系统中，因此 KDE的软件就建议放置到此目录下了。 另外，如果你想要自行安装额外的软件(非原本的distribution 提供的)，那也能够将你的软件安装到这里来。 不过以前的 Linux 系统中，我们还是习惯放置在/usr/local 目录下呢!</td></tr><tr><td><code>/srv</code></td><td>系统上运动的服务用到的数据，srv 可以规为『service』的缩写，是一些网络服务启动之后，这些服务所需要取用的数据目录。 常见的服务例如 WWW, FTP 等等。示例来说，WWW 服务器需要的网页资料就可以放置在/srv/www/里面。</td></tr><tr><td><code>/tmp</code></td><td>这是让一般用户或者是正在执行的程序暂时放置档案的地方。</td></tr><tr><td><code>/usr</code></td><td>universal shared <strong>read-only</strong> data. <strong>默认软件</strong>都会存于该目录下。用于存储只读用户数据的第二层次；此目录中包含了命令库文件和在通常操作中不会修改的文件</td></tr><tr><td><code>/media</code></td><td>便捷式移动设备挂载点,media 是『媒体』的英文，顾名思义，这个/media 底下放置的就是可移除的装置啦! 包括软盘、光盘、DVD 等等装置都暂时挂载二此。常见的档名有：/media/floppy, /media/cdrom 等等</td></tr><tr><td><code>/var</code></td><td>变量文件——在正常运行的系统中其内容不断变化的文件，如日志，脱机文件和临时电子邮件文件。有时是一个单独的分区。如果不单独分区，有可能会把整个分区充满。如果单独分区，给大给小都不合适。</td></tr><tr><td><code>/proc</code></td><td>目录本身是一个『虚拟文件系统(virtual filesystem)』! 放置的数据都是在内存当中， 如系统核心、进程信息(process)、周边装置的状态及网络状态等等。因为这个目录下的数据都是在内存当中，故本身不占任何硬盘空间! 比较重要的档案如：<code>/proc/cpuinfo, /proc/dma, /proc/interrupts,/proc/ioports, /proc/net/*</code>等等。</td></tr><tr><td><code>/sys</code></td><td>这个目录跟<code>/proc</code> 非常类似，也是一个虚拟的文件系统，主要也是记录不核心相关的信息。 包括目前已加载的核心模块不核心侦测到的硬件装置信息等等。这个目录同样不占硬盘容量!</td></tr><tr><td><code>/selinux</code></td><td>security enhanced Linux，selinux相关的安全策略等信息的存储位置。</td></tr><tr><td><code>/lost+found</code></td><td>在ext3文件系统中，当系统意外崩溃或机器意外关机，会产生一些文件碎片在这里。当系统在开机启动的过程中fsck工具会检查这里，并修复已经损坏的文件系统。当系统发生问题。可能会有文件被移动到这个目录中，可能需要用手工的方式来修复，或移到文件到原来的位置上。</td></tr></tbody></table><h3 id="2-etc-目录（配置文件目录-纯文本文件）"><a href="#2-etc-目录（配置文件目录-纯文本文件）" class="headerlink" title="2./etc/目录（配置文件目录,纯文本文件）"></a>2.<code>/etc/</code>目录（配置文件目录,纯文本文件）</h3><table><thead><tr><th>目录</th><th>描述</th></tr></thead><tbody><tr><td><code>/etc/rc</code> <code>/etc/rc.d</code> <code>/etc/rc*.d</code></td><td>启动、或改变运行级时运行的scripts或scripts的目录.</td></tr><tr><td><code>/etc/hosts</code></td><td>本地域名解析文件/etc/sysconfig/networkIP、掩码、网关、主机名配置</td></tr><tr><td><code>/etc/resolv.conf</code></td><td>DNS服务器配置/etc/fstab开机自动挂载系统，所有分区开机都会自动挂载</td></tr><tr><td><code>/etc/inittab</code></td><td>设定系统启动时Init进程将把系统设置成什么样的 runlevel及加载相关的启动文件配置</td></tr><tr><td><code>/etc/exports</code></td><td>设置NFS系统用的配置文件路径</td></tr><tr><td><code>/etc/init.d</code></td><td>这个目录来存放系统启动脚本</td></tr><tr><td><code>/etc/profile, /etc/csh.login, /etc/csh.cshrc</code></td><td>全局系统环境配置变量</td></tr><tr><td><code>/etc/issue</code></td><td>认证前的输出信息，默认输出版本内核信息</td></tr><tr><td><code>/etc/motd</code></td><td>设置认证后的输出信息</td></tr><tr><td><code>/etc/mtab</code></td><td>当前安装的文件系统列表.由scripts初始化，并由mount 命令自动更新.需要一个当前安装的文件系统的列表时使用，例如df 命令<code>/etc/group</code>类似<code>/etc/passwd</code> ，但说明的不是用户而是组.</td></tr><tr><td><code>/etc/passwd</code></td><td>用户数据库，其中的域给出了用户名、真实姓名、家目录、加密的口令和用户的其他信息.</td></tr><tr><td><code>/etc/shadow</code></td><td>在安装了影子口令软件的系统上的影子口令文件.影子口令文件将<code>/etc/passwd</code> 文件中的加密口令移动到<code>/etc/shadow</code> 中，而后者只对root可读.这使破译口令更困难.</td></tr><tr><td><code>/etc/sudoers</code></td><td>可以sudo命令的配置文件</td></tr><tr><td><code>/etc/syslog.conf</code></td><td>系统日志参数配置</td></tr><tr><td><code>/etc/login.defs</code></td><td>设置用户帐号限制的文件</td></tr><tr><td><code>/etc/securetty</code></td><td>确认安全终端，即哪个终端允许root登录.一般只列出虚拟控制台，这样就不可能(至少很困难)通过modem或网络闯入系统并得到超级用户特权.</td></tr><tr><td><code>/etc/printcap</code></td><td>类似<code>/etc/termcap</code> ，但针对打印机.语法不同.</td></tr><tr><td><code>/etc/shells</code></td><td>列出可信任的shell.chsh 命令允许用户在本文件指定范围内改变登录shell.提供一台机器FTP服务的服务进程ftpd 检查用户shell是否列在 <code>/etc/shells</code> 文件中，如果不是将不允许该用户登录.</td></tr><tr><td><code>/etc/xinetd.d</code></td><td>如果服务器是通过xinetd模式运行的，它的脚本要放在这个目录下。有些系统没有这个目录，比如Slackware，有些老的版本也没有。在Redhat Fedora中比较新的版本中存在。</td></tr><tr><td><code>/etc/opt/</code></td><td><code>/opt/</code>的配置文件</td></tr><tr><td><code>/etc/X11/</code></td><td>X_Window系统(版本11)的配置文件</td></tr><tr><td><code>/etc/sgml/</code></td><td>SGML的配置文件</td></tr><tr><td><code>/etc/xml/</code></td><td>XML的配置文件</td></tr><tr><td><code>/etc/skel/</code></td><td>默认创建用户时，把该目录拷贝到家目录下</td></tr></tbody></table><h3 id="3、-usr-目录"><a href="#3、-usr-目录" class="headerlink" title="3、/usr/目录"></a>3、<code>/usr/</code>目录</h3><p>默认软件都会存于该目录下。用于存储只读用户数据的第二层次；包含绝大多数的用户工具和应用程序。</p><table><thead><tr><th>目录</th><th>描述</th></tr></thead><tbody><tr><td><code>/usr/X11R6</code></td><td>存放X-Windows的目录；</td></tr><tr><td><code>/usr/doc</code></td><td>Linux技术文档；/usr/include用来存放Linux下开发和编译应用程序所需要的头文件；</td></tr><tr><td><code>/usr/lib</code></td><td>32位系统使用的函数库目录。存放一些常用的动态链接共享库和静态档案库；</td></tr><tr><td><code>/usr/man</code></td><td>帮助文档所在的目录；</td></tr><tr><td><code>/usr/src</code></td><td><strong>源代码</strong>,例如:内核源代码及其头文件。Linux开放的源代码，就存在这个目录，爱好者们别放过哦；</td></tr><tr><td><code>/usr/bin/</code></td><td>非必要可执行文件 (在单用户模式中不需要)；面向所有用户。一般使用者使用并且不是系统自检等所必需可执行文件的目录。此目录相当于根文件系统下的对应目录（<code>/bin</code> ），非启动系统，非修复系统以及非本地安装的程序一般都放在此目录下</td></tr><tr><td><code>/usr/sbin/</code></td><td>管理员使用的非系统必须的可执行文件存放目录，例如：大量网络服务的守护进程。</td></tr><tr><td><code>/usr/share/</code></td><td>体系结构无关（共享）数据。<code>/usr/share/doc</code>: 系统说明文件存放目录。<code>/usr/share/man</code>: 程序说明文件存放目录</td></tr><tr><td><code>/usr/include/</code></td><td>C语言的头文件</td></tr><tr><td><code>/usr/X11R6/</code></td><td>X Window系统版本 11, Release 6.</td></tr><tr><td><code>/usr/local/</code></td><td>安装<strong>本地程序</strong>的一般默认路径。本地数据的第三层次，具体到本台主机。通常而言有进一步的子目录，例如：<code>bin/、lib/、share/</code>.这是提供给一般用户的<code>/usr</code>目录，在这里安装一般的应用软件；</td></tr></tbody></table><h3 id="4、-var-目录"><a href="#4、-var-目录" class="headerlink" title="4、/var/目录"></a>4、<code>/var/</code>目录</h3><p><code>/var</code> 包括系统一般运行时要改变的数据.每个系统是特定的，即不通过网络与其他计算机共享.</p><table><thead><tr><th>目录</th><th>描述</th></tr></thead><tbody><tr><td><code>/var/log/message</code></td><td>日志信息，按周自动轮询</td></tr><tr><td><code>/var/spool/cron/root</code></td><td>定时器配置文件目录，默认按用户命名</td></tr><tr><td><code>/var/log/secure</code></td><td>记录登陆系统存取信息的文件，不管认证成功还是认证失败都会记录</td></tr><tr><td><code>/var/log/wtmp</code></td><td>记录登陆者信息的文件，last,who,w命令信息来源于此</td></tr><tr><td><code>/var/spool/clientmqueue/</code></td><td>当邮件服务未开启时，所有应发给系统管理员的邮件都将堆放在此</td></tr><tr><td><code>/var/spool/mail/</code></td><td>邮件目录</td></tr><tr><td><code>/var/tmp</code></td><td>比/tmp 允许的大或需要存在较长时间的临时文件. (虽然系统管理员可能不允许/var/tmp 有很旧的文件.)</td></tr><tr><td><code>/var/lib</code></td><td>系统正常运行时要改变的文件.</td></tr><tr><td><code>/var/local</code></td><td><code>/usr/local</code> 中安装的程序的可变数据(即系统管理员安装的程序).注意，如果必要，即使本地安装的程序也会使用其他/var 目录，例如<code>/var/lock</code> .</td></tr><tr><td><code>/var/lock</code></td><td>锁定文件.许多程序遵循在/var/lock 中产生一个锁定文件的约定，以支持他们正在使用某个特定的设备或文件.其他程序注意到这个锁定文件，将不试图使用这个设备或文件.</td></tr><tr><td><code>/var/log/</code></td><td>各种程序的Log文件，特别是login (<code>/var/log/wtmp</code> log所有到系统的登录和注销) 和syslog (<code>/var/log/messages</code> 里存储所有核心和系统程序信息.<code>/var/log</code> 里的文件经常不确定地增长，应该定期清除.</td></tr><tr><td><code>/var/run</code></td><td>保存到下次引导前有效的关于系统的信息文件.例如，<code>/var/run/utmp</code> 包含当前登录的用户的信息.</td></tr><tr><td><code>/var/cache/</code></td><td>应用程序缓存数据。这些数据是在本地生成的一个耗时的I/O或计算结果。应用程序必须能够再生或恢复数据。缓存的文件可以被删除而不导致数据丢失。</td></tr></tbody></table><h3 id="5、-proc-目录"><a href="#5、-proc-目录" class="headerlink" title="5、/proc/目录"></a>5、<code>/proc/</code>目录</h3><p>虚拟文件系统，将内核与进程状态归档为文本文件（系统信息都存放这目录下）。<br>例如：uptime、 network。在Linux中，对应Procfs格式挂载。该目录下文件只能看不能改（包括root）</p><table><thead><tr><th>目录</th><th>描述</th></tr></thead><tbody><tr><td><code>/proc/meminfo</code></td><td>查看内存信息</td></tr><tr><td><code>/proc/loadavg</code></td><td>还记得 top 以及 uptime 吧？没错！上头的三个平均数值就是记录在此！</td></tr><tr><td><code>/proc/uptime</code></td><td>就是用 uptime 的时候，会出现的资讯啦！</td></tr><tr><td><code>/proc/cpuinfo</code></td><td>关于处理器的信息，如类型、厂家、型号和性能等。</td></tr><tr><td><code>/proc/cmdline</code></td><td>加载 kernel 时所下达的相关参数！查阅此文件，可了解系统是如何启动的！</td></tr><tr><td><code>/proc/filesystems</code></td><td>目前系统已经加载的文件系统罗！</td></tr><tr><td><code>/proc/interrupts</code></td><td>目前系统上面的 IRQ 分配状态。</td></tr><tr><td><code>/proc/ioports</code></td><td>目前系统上面各个装置所配置的 I/O 位址。</td></tr><tr><td><code>/proc/kcore</code></td><td>这个就是内存的大小啦！好大对吧！但是不要读他啦！</td></tr><tr><td><code>/proc/modules</code></td><td>目前我们的 Linux 已经加载的模块列表，也可以想成是驱动程序啦！</td></tr><tr><td><code>/proc/mounts</code></td><td>系统已经挂载的数据，就是用 mount 这个命令呼叫出来的数据啦！</td></tr><tr><td><code>/proc/swaps</code></td><td>到底系统挂加载的内存在哪里？呵呵！使用掉的 partition 就记录在此啦！</td></tr><tr><td><code>/proc/partitions</code></td><td>使用 fdisk -l 会出现目前所有的 partition 吧？在这个文件当中也有纪录喔！</td></tr><tr><td><code>/proc/pci</code></td><td>在 PCI 汇流排上面，每个装置的详细情况！可用 lspci 来查阅！</td></tr><tr><td><code>/proc/version</code></td><td>核心的版本，就是用 uname -a 显示的内容啦！</td></tr><tr><td><code>/proc/bus/*</code></td><td>一些汇流排的装置，还有 U盘的装置也记录在此喔！</td></tr></tbody></table><h3 id="6、-dev-目录"><a href="#6、-dev-目录" class="headerlink" title="6、/dev/目录"></a>6、<code>/dev/</code>目录</h3><p>设备文件, 分为两种：块设备文件(b)和字符设备文件(c)<br>设备文件一般存放在/dev目录下，对常见设备文件作如下说明：</p><table><thead><tr><th>目录</th><th>描述</th></tr></thead><tbody><tr><td><code>/dev/hd[a-t]</code></td><td>IDE设备</td></tr><tr><td><code>/dev/sd[a-z]</code></td><td>SCSI设备</td></tr><tr><td><code>/dev/fd[0-7]</code></td><td>标准软驱</td></tr><tr><td><code>/dev/md[0-31]</code></td><td>软raid设备</td></tr><tr><td><code>/dev/loop[0-7]</code></td><td>本地回环设备</td></tr><tr><td><code>/dev/ram[0-15]</code></td><td>内存</td></tr><tr><td><code>/dev/null</code></td><td>无限数据接收设备,相当于黑洞</td></tr><tr><td><code>/dev/zero</code></td><td>无限零资源</td></tr><tr><td><code>/dev/tty[0-63]</code></td><td>虚拟终端</td></tr><tr><td><code>/dev/ttyS[0-3]</code></td><td>串口</td></tr><tr><td><code>/dev/lp[0-3]</code></td><td>并口</td></tr><tr><td><code>/dev/console</code></td><td>控制台</td></tr><tr><td><code>/dev/fb[0-31]</code></td><td>framebuffer</td></tr><tr><td><code>/dev/cdrom</code></td><td>=&gt; <code>/dev/hdc</code></td></tr><tr><td><code>/dev/modem</code></td><td>=&gt; <code>/dev/ttyS[0-9]</code></td></tr><tr><td><code>/dev/pilot</code></td><td>=&gt;<code>/dev/ttyS[0-9]</code></td></tr><tr><td><code>/dev/random</code></td><td>随机数设备</td></tr><tr><td><code>/dev/urandom</code></td><td>随机数设备</td></tr></tbody></table><h3 id="7、Linux下的文件类型："><a href="#7、Linux下的文件类型：" class="headerlink" title="7、Linux下的文件类型："></a>7、Linux下的文件类型：</h3><p>– (f)：普通文件；<br>d: 目录文件；<br>b: 块设备；<br>c: 字符设备；<br>l: 符号链接文件；<br>p: 管道文件；<br>s: 套接字文件；socket;</p><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
       
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Zoo项目学习0</title>
    <link href="houzw.github.io.git/2017/04/08/Zoo%E9%A1%B9%E7%9B%AE%E5%AD%A6%E4%B9%A00/"/>
    <id>houzw.github.io.git/2017/04/08/Zoo项目学习0/</id>
    <published>2017-04-08T05:17:22.000Z</published>
    <updated>2017-04-12T06:38:00.955Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Sun Mar 18 2018 11:22:28 GMT+0800 (中国标准时间) --><h1 id="Zoo-项目-安装"><a href="#Zoo-项目-安装" class="headerlink" title="Zoo 项目-安装"></a>Zoo 项目-安装</h1><h2 id="Linux-CentOS-安装"><a href="#Linux-CentOS-安装" class="headerlink" title="Linux (CentOS)安装"></a>Linux (CentOS)安装</h2><blockquote><p><a href="http://www.zoo-project.org/docs/install/index.html" target="_blank" rel="external">http://www.zoo-project.org/docs/install/index.html</a></p></blockquote><h3 id="依赖软件-（Prerequisites）"><a href="#依赖软件-（Prerequisites）" class="headerlink" title="依赖软件 （Prerequisites）"></a>依赖软件 （Prerequisites）</h3><h4 id="必须-Mandatory"><a href="#必须-Mandatory" class="headerlink" title="必须 | Mandatory"></a>必须 | Mandatory</h4><p>CentOS 下，<a href="http://www.zoo-project.org/docs/install/centos.html" target="_blank" rel="external">文档</a></p><p>elgis 不再维护，对于CentOS7，直接使用 EPEL</p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">su -c &apos;rpm -Uvh https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm&apos;</div><div class="line"></div><div class="line"># wget http://dl.fedoraproject.org/pub/epel/7/x86_64/a/armadillo-4.320.0-1.el7.x86_64.rpm</div><div class="line">sudo yum install armadillo-4.320.0-1.el7.x86_64.rpm</div><div class="line"># hdf5 作为依赖安装</div><div class="line"># 安装 gdal-devel（epel中为 1.11.4）等依赖</div><div class="line">sudo yum install gcc-c++ zlib-devel libxml2-devel bison openssl python-devel subversion libxslt-devel libcurl-devel gdal-devel proj-devel libuuid-devel openssl-devel fcgi-devel</div><div class="line"># 确保安装 Java jdk</div><div class="line"># 可能报错</div><div class="line">错误：软件包：gdal-libs-1.11.4-1.el7.x86_64 (epel)</div><div class="line">          需要：libmysqlclient.so.18(libmysqlclient_18)(64bit)</div><div class="line">          可用: 1:mariadb-libs-5.5.52-1.el7.x86_64 (base)</div><div class="line">              libmysqlclient.so.18(libmysqlclient_18)(64bit)</div><div class="line"># 确保准确地安装了mysql（server）</div><div class="line"># 然后重新执行安装 gdal-devel 等</div><div class="line">sudo yum netcdf proj geos openjpeg2 libgeotiff # optional</div></pre></td></tr></table></figure><h4 id="可选"><a href="#可选" class="headerlink" title="可选"></a>可选</h4><p>下列库是安装 Zoo-Kernel 所必须的（centos下参考上面说明安装）：</p><ul><li><a href="[http://www.gnu.org/software/autoconf/](http://www.gnu.org/software/autoconf/">autoconf</a>)</li></ul><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">cd ~/softwares  # 安装包存放目录</div><div class="line">wget http://ftp.gnu.org/gnu/autoconf/autoconf-2.69.tar.gz</div><div class="line">tar -zxf autoconf-2.69.tar.gz # 解压</div><div class="line">cd autoconf-2.69</div><div class="line">./configure</div><div class="line">sudo make</div><div class="line">sudo make install</div><div class="line">autoconf --version # 查看版本，验证是否安装成功</div><div class="line">whereis autoconf # 查看安装后的目录</div></pre></td></tr></table></figure><ul><li><a href="[https://www.gnu.org/software/gettext/](https://www.gnu.org/software/gettext/">gettext</a> )</li></ul><ul><li><p><a href="[http://curl.haxx.se](http://curl.haxx.se/">cURL</a> )</p></li><li><p><a href="[http://www.fastcgi.com](http://www.fastcgi.com/">FastCGI</a> )</p></li><li><p><a href="[http://flex.sourceforge.net/](http://flex.sourceforge.net/">Flex &amp; Bison</a> | <a href="http://www.gnu.org/software/bison/" target="_blank" rel="external">http://www.gnu.org/software/bison/</a> )</p></li><li><p><a href="ftp://xmlsoft.org/libxml2/" target="_blank" rel="external">libxml2</a></p><blockquote><p>ftp://xmlsoft.org/libxml2/libxml2-2.9.4.tar.gz 或</p><p>ftp://xmlsoft.org/libxml2/libxml2-2.9.4-1.fc23.x86_64.rpm</p><p>ftp://xmlsoft.org/libxml2/libxml2-devel-2.9.4-1.fc23.x86_64.rpm</p></blockquote><p>若 <code>libxml.c:14:20: 致命错误：Python.h：没有那个文件或目录</code> 则 <code>sudo yum install python-devel</code> （Python2）</p><p><code>./configure --prefix=/usr/local</code></p></li><li><p><a href="http://www.openssl.org/" target="_blank" rel="external">OpenSSL</a></p><blockquote><p><a href="http://randombio.com/linuxsetup54.html" target="_blank" rel="external">http://randombio.com/linuxsetup54.html</a></p></blockquote><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">./config</div><div class="line">make &amp;&amp; make install</div></pre></td></tr></table></figure></li><li><p><a href="[http://gdal.org/](http://gdal.org/">GDAL</a>)</p><p>使用 <a href="https://fedoraproject.org/wiki/EPEL" target="_blank" rel="external">https://fedoraproject.org/wiki/EPEL</a></p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">su -c &apos;rpm -Uvh https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm&apos;</div></pre></td></tr></table></figure><p>获取gdal rpm 文件 ：<a href="http://dl.fedoraproject.org/pub/epel/7/x86_64/g/" target="_blank" rel="external">http://dl.fedoraproject.org/pub/epel/7/x86_64/g/</a></p></li></ul><h3 id="安装Zoo"><a href="#安装Zoo" class="headerlink" title="安装Zoo"></a>安装Zoo</h3><h4 id="下载ZOO发行版"><a href="#下载ZOO发行版" class="headerlink" title="下载ZOO发行版"></a>下载ZOO发行版</h4><p>页面 <a href="http://zoo-project.org/Code/Download" target="_blank" rel="external">http://zoo-project.org/Code/Download</a></p><p>压缩文件 <a href="http://zoo-project.org/dl/zoo-project-1.6.0.tar.bz2" target="_blank" rel="external">http://zoo-project.org/dl/zoo-project-1.6.0.tar.bz2</a></p><p>SVN <code>svn checkout http://svn.zoo-project.org/svn/trunk zoo-src</code></p><h4 id="编译安装"><a href="#编译安装" class="headerlink" title="编译安装"></a>编译安装</h4><h3 id="其他可选依赖安装"><a href="#其他可选依赖安装" class="headerlink" title="其他可选依赖安装"></a>其他可选依赖安装</h3><ul><li><a href="[http://mapserver.org](http://mapserver.org/">MapServer</a> ) ( ZOO-Kernel 可选的 WMS, WFS 和 WCS 支持)</li><li><a href="[http://www.python.org](http://www.python.org/">Python</a> )</li><li><a href="[http://www.php.net](http://www.php.net/">PHP</a> ) Embedded ( ZOO-Kernel 可选的 PHP 支持)</li><li><a href="[http://java.sun.com](http://java.sun.com/">Java SDK </a>) (ZOO-Kernel 可选的 Java 支持)</li><li><a href="[http://www.mozilla.org/js/spidermonkey/](http://www.mozilla.org/js/spidermonkey/">SpiderMonkey</a> ) (ZOO-Kernel 可选的Javascript 支持)</li><li><a href="[http://www.saga-gis.org/en/index.html/](http://www.saga-gis.org/en/index.html/">SAGA GIS</a> ) (ZOO-Kernel 可选的SAGA 支持)</li><li><a href="[https://www.orfeo-toolbox.org/](https://www.orfeo-toolbox.org/">OrfeoToolbox</a> ) (ZOO-Kernel 可选的OTB 支持)</li><li><a href="[http://grass.osgeo.org](http://grass.osgeo.org/">GRASS GIS</a> ) (通过 WPSGrassBridge 使用 )</li><li>PostgreSQL support activated in GDAL to <a href="http://zoo-project.org/docs/install/installation.html#zoo-install-db-backend" target="_blank" rel="external">Use a Database Backend (Optional)</a></li></ul><hr><h2 id="Windows安装"><a href="#Windows安装" class="headerlink" title="Windows安装"></a>Windows安装</h2><blockquote><p><a href="http://www.zoo-project.org/docs/install/windows.html" target="_blank" rel="external">http://www.zoo-project.org/docs/install/windows.html</a></p></blockquote><h3 id="最简安装"><a href="#最简安装" class="headerlink" title="最简安装"></a>最简安装</h3><p>安装包 <a href="https://bintray.com/gfenoy/ZOO-Project/download_file?file_path=ZOO-Project-Installer-x64-52.exe" target="_blank" rel="external">https://bintray.com/gfenoy/ZOO-Project/download_file?file_path=ZOO-Project-Installer-x64-52.exe</a></p><h3 id="源码安装"><a href="#源码安装" class="headerlink" title="源码安装"></a>源码安装</h3><p><a href="http://zoo-project.org/dl/zoo-project-1.6.0.zip" target="_blank" rel="external">http://zoo-project.org/dl/zoo-project-1.6.0.zip</a></p><h4 id="依赖软件"><a href="#依赖软件" class="headerlink" title="依赖软件"></a>依赖软件</h4><p>见CentOS安装对应内容</p><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
       
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Apache CXF Web Service Development笔记 01</title>
    <link href="houzw.github.io.git/2017/04/07/Apache-CXF-Web-Service-Development%E7%AC%94%E8%AE%B0-01/"/>
    <id>houzw.github.io.git/2017/04/07/Apache-CXF-Web-Service-Development笔记-01/</id>
    <published>2017-04-07T07:28:18.000Z</published>
    <updated>2017-04-07T09:39:33.184Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Sun Mar 18 2018 11:22:28 GMT+0800 (中国标准时间) --><h1 id="熟悉-CXF"><a href="#熟悉-CXF" class="headerlink" title="熟悉 CXF"></a>熟悉 CXF</h1><blockquote><p><strong><em>Apache CXF Web Service Development——Develop and deploy SOAP and RESTful Web Services</em></strong></p><p><em>Naveen Balani &amp; Rajeev Hathi</em></p><p>2009 Packt Publishing</p><p><a href="https://www.packtpub.com/sites/default/files/downloads/5401_Code.zip" target="_blank" rel="external">示例代码下载</a></p></blockquote><p>Apache CXF 是一个业界领先的构建在标准web services之上的开发框架 ，其目标是简化 web services 的开发.</p><h2 id="Web-service相关标准"><a href="#Web-service相关标准" class="headerlink" title="Web service相关标准"></a>Web service相关标准</h2><ul><li><p>XML</p></li><li><p>SOAP (Simple Object Access Protocol)</p><p>SOAP is a protocol for exchanging XML-based messages over a network, typically using HTTP protocol.</p></li><li><p>WSDL (Web Services Description language)<br>WSDL 是一种基于XML语言的用于描述 web services 的标准</p></li><li><p>REST (Representational State Transfer)<br>REST is neither a technology nor a standard; it’s an architectural style—a set of guidelines for exposing resources over the Web（by a Uniform Resource Indicator (URI)）.</p></li><li><p>Service Registry</p><p>Service Registry 提供了一种查找 web services 的机制.</p></li></ul><h2 id="web-services-简介"><a href="#web-services-简介" class="headerlink" title="web services 简介"></a>web services 简介</h2><p>World Wide Web Consortium (W3C) 定义：</p><blockquote><p><em>A Web service is a software system identified by a URI whose public interfaces and bindings are defined and described using XML (specifically WSDL). Its definition can be discovered by other software systems. These systems may then interact with the web service in a manner prescribed by its definition, using XML-based messages conveyed by Internet protocols.</em></p></blockquote><p>Web services are next generation web applications, modules, or components that can be thought of as a<br>service provided over the web.</p><p>A web service can be thought of as a self contained, self describing, modular application that can be published, located, and invoked across the web.</p><p>web services 提供的最大好处是交互性： <strong>interoperability</strong>.</p><h2 id="web-service开发方法"><a href="#web-service开发方法" class="headerlink" title="web service开发方法"></a>web service开发方法</h2><p>一个web service包含三种类型的角色—服务消费者 service consumer, 服务提供者 service provider, 和一个可选的服务注册 service registry.</p><p>服务提供者通过网络发布（基于SOAP的服务） WSDL文件，使用者可直接或通过查找服务注册来使用此服务。使用者通常利用web service框架提供的工具根据WSDL文件生成客户端代码来与服务进行交互。</p><p>在RESTful Web Services中没有正式的服务契约（contract ，即WSDL）。服务请求者需要知道消息的格式，如XML或JSON，以及支持的操作。使用者使用URI通过HTTP协议来启用服务。</p><blockquote><p><a href="http://blog.csdn.net/defonds/article/details/49000993" target="_blank" rel="external">REST Vs SOAP，Soap 和 Rest 的区别</a></p><p><em>REST 的最佳场景是当你通过互联网公开一个公共 API 来对数据的 CRUD 操作进行处理的时候。REST 专注于通过一个一致性接口访问命名<strong>资源</strong>。</em><br><em>SOAP提供了自己的协议并专注于公开某些应用逻辑(不是数据)为服务。SOAP 公开的是<strong>操作</strong>。SOAP 专注于访问通过不同的接口实现了某些业务逻辑的命名操作。</em></p></blockquote><h2 id="Web-service-SOAP-通信风格"><a href="#Web-service-SOAP-通信风格" class="headerlink" title="Web service SOAP 通信风格"></a>Web service SOAP 通信风格</h2><p>两种SOAP通信方式：Document和RPC。</p><p>SOAP 通信方式（message styles）在 WSDL 文档中被定义为 SOAP binding. SOAP binding 可以是编码或文本（ encoded use or a literal use）.</p><p>Document style,将XML文档作为载荷（ payloads），这些XML文档遵循定义良好的约定 （well defined contracts）, 通常使用 XML schema 定义来创建. 文本文档（Document literal style）是首选的通讯方式。</p><p>RPC (Remote Procedure Call) style, 表明 SOAP 内容体中包含一个方法的XML表达。传统上RPC与SOAP编码规则结合使用，该组合被称为RPC /编码（RPC/encoded）。</p><h2 id="CXF"><a href="#CXF" class="headerlink" title="CXF"></a>CXF</h2><p>选择CXF的原因：</p><ul><li>支持所有的主流Web Service 标准</li><li>提供简化的SOAP和RESTful服务编程模型</li><li>提供多种其他应用协议选项</li><li>使用简便</li><li>部署灵活</li></ul><h2 id="使用CXF开发WebService"><a href="#使用CXF开发WebService" class="headerlink" title="使用CXF开发WebService"></a>使用CXF开发WebService</h2><p>一般过程：</p><ul><li>新建 Service Endpoint Interface (SEI) 并定义业务方法供服务使用</li><li>创建实现类，标注其为web service.</li><li>创建 beans.xml 并使用 JAX-WS frontend定义此服务类为 Spring bean.</li></ul><h3 id="SEI"><a href="#SEI" class="headerlink" title="SEI"></a>SEI</h3><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="keyword">package</span> demo.order;</div><div class="line"><span class="keyword">import</span> javax.jws.WebService;</div><div class="line"><span class="meta">@WebService</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">OrderProcess</span> </span>&#123;</div><div class="line">    <span class="meta">@WebMethod</span></div><div class="line">    <span class="function">String <span class="title">processOrder</span><span class="params">(Order order)</span></span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p><code>@WebService</code> 注解表示此接口为 Service Endpoint Interface，是 JAX-WS 提供的注解之一。</p><p><code>@WebMethod</code> 注解是可选的，用于自定义web服务操作。<code>@WebMethod</code> 提供了operationName, action, exclude三个属性设置（最终反映在WSDL文档中）。</p><p>实体类Order可在类上添加<code>@XmlRootElement(name = &quot;Order&quot;)</code>。 其属于Java Architecture for XML Binding (JAXB) 注解。JAXB 注解用于映射XML schema与Java代码。<code>@XmlRootElement</code> 将类Order映射为XML中的根元素，类中的属性默认映射为<code>@XmlElement</code>.</p><h3 id="实现类"><a href="#实现类" class="headerlink" title="实现类"></a>实现类</h3><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="keyword">package</span> demo.order;</div><div class="line"><span class="meta">@WebService</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OrderProcessImpl</span> <span class="keyword">implements</span> <span class="title">OrderProcess</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">processOrder</span><span class="params">(Order order)</span> </span>&#123;</div><div class="line">        String orderID = validate(order);</div><div class="line">        <span class="keyword">return</span> orderID;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">private</span> String <span class="title">validate</span><span class="params">(Order order)</span> </span>&#123;</div><div class="line">      ...</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><h2 id="基于Spring-Bean的服务端"><a href="#基于Spring-Bean的服务端" class="headerlink" title="基于Spring Bean的服务端"></a>基于Spring Bean的服务端</h2><figure class="highlight xml"><table><tr><td class="code"><pre><div class="line"><span class="comment">&lt;!-- beans.xml --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span> <span class="attr">xmlns:jaxws</span>=<span class="string">"http://cxf.apache.org/jaxws"</span> <span class="attr">xsi:schemaLocation</span>=<span class="string">"</span></span></div><div class="line">http://www.springframework.org/schema/beans</div><div class="line">http://www.springframework.org/schema/beans/spring-beans.xsd</div><div class="line">http://cxf.apache.org/jaxws http://cxf.apache.org/schemas/jaxws.xsd"&gt;</div><div class="line">    <span class="comment">&lt;!-- core components of CXF --&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">import</span> <span class="attr">resource</span>=<span class="string">"classpath:META-INF/cxf/cxf.xml"</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">import</span> <span class="attr">resource</span>=<span class="string">"classpath:META-INF/cxf/cxf-extension-soap.xml"</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">import</span> <span class="attr">resource</span>=<span class="string">"classpath:META-INF/cxf/cxf-servlet.xml"</span> /&gt;</span></div><div class="line">    <span class="comment">&lt;!-- publish the web service --&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">jaxws:endpoint</span> <span class="attr">id</span>=<span class="string">"orderProcess"</span> <span class="attr">implementor</span>=<span class="string">"demo.order.OrderProcessImpl"</span> <span class="attr">address</span>=<span class="string">"/OrderProcess"</span> /&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></div></pre></td></tr></table></figure><h3 id="开发客户端"><a href="#开发客户端" class="headerlink" title="开发客户端"></a>开发客户端</h3><p>一般过程：</p><ul><li>开发 <code>client-beans.xml</code> 来定义客户端的工厂类为使用JAX-WS frontend的Spring bean</li><li>开发客户端Java应用来启用web服务</li></ul><h4 id="client-beans-xml"><a href="#client-beans-xml" class="headerlink" title="client-beans.xml"></a>client-beans.xml</h4><figure class="highlight xml"><table><tr><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span> <span class="attr">xmlns:jaxws</span>=<span class="string">"http://cxf.apache.org/jaxws"</span> <span class="attr">xsi:schemaLocation</span>=<span class="string">"</span></span></div><div class="line">http://www.springframework.org/schema/beans</div><div class="line">http://www.springframework.org/schema/beans/spring-beans.xsd</div><div class="line">http://cxf.apache.org/jaxws http://cxf.apache.org/schemas/jaxws.xsd"&gt;</div><div class="line">    </div><div class="line">    <span class="tag">&lt;<span class="name">jaxws:client</span> <span class="attr">id</span>=<span class="string">"orderClient"</span> <span class="attr">serviceClass</span>=<span class="string">"demo.order.OrderProcess"</span> <span class="attr">address</span>=<span class="string">"http://localhost:8080/orderapp/OrderProcess"</span> /&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></div></pre></td></tr></table></figure><ul><li>serviceClass：指定 web service SEI</li><li>address：指定SEI发布的URL地址（客户端访问地址）</li></ul><h4 id="客户端Java代码"><a href="#客户端Java代码" class="headerlink" title="客户端Java代码"></a>客户端Java代码</h4><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="keyword">package</span> demo.order.client;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Client</span><span class="params">()</span> </span>&#123;&#125;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">            <span class="comment">// START SNIPPET: client</span></div><div class="line">            ClassPathXmlApplicationContext context = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="keyword">new</span> String[] &#123; <span class="string">"demo/order/client/client-beans.xml"</span> &#125;);</div><div class="line">      		<span class="comment">//获得 SEI</span></div><div class="line">            OrderProcess client = (OrderProcess) context.getBean(<span class="string">"orderClient"</span>);</div><div class="line">            <span class="comment">// Populate the Order bean</span></div><div class="line">            Order order = <span class="keyword">new</span> Order();</div><div class="line">            <span class="comment">//...  //set order属性</span></div><div class="line">      		<span class="comment">//使用SEI调用web服务</span></div><div class="line">            String orderID = client.processOrder(order);</div><div class="line">            String message = (orderID == <span class="keyword">null</span>) ?<span class="string">"Order not approved"</span> : <span class="string">"Order approved; order ID is "</span> + orderID;</div><div class="line">            System.out.println(message);</div><div class="line">            System.exit(<span class="number">0</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure><h3 id="Web-xml配置"><a href="#Web-xml配置" class="headerlink" title="Web.xml配置"></a>Web.xml配置</h3><figure class="highlight xml"><table><tr><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">web-app</span>&gt;</span></div><div class="line">  ...</div><div class="line">    <span class="tag">&lt;<span class="name">context-param</span>&gt;</span></div><div class="line">         <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></div><div class="line">44<span class="tag">&lt;<span class="name">param-value</span>&gt;</span>WEB-INF/beans.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></div><div class="line">4<span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>CXFServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">display-name</span>&gt;</span>CXF Servlet<span class="tag">&lt;/<span class="name">display-name</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span></div><div class="line">            org.apache.cxf.transport.servlet.CXFServlet</div><div class="line">        <span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>CXFServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></div></pre></td></tr></table></figure><h4 id="项目结构说明"><a href="#项目结构说明" class="headerlink" title="项目结构说明"></a>项目结构说明</h4><ul><li><code>beans.xml</code> 和<code>web.xml</code> 位于<code>webapp\WEB-INF</code> 文件夹</li><li><code>client-beans.xml</code>位于<code>demo\order\client</code> 文件夹（client类所在目录）</li></ul><h4 id="项目运行说明"><a href="#项目运行说明" class="headerlink" title="项目运行说明"></a>项目运行说明</h4><p>依赖tomcat。原文依赖ant</p><h2 id="CXF架构"><a href="#CXF架构" class="headerlink" title="CXF架构"></a>CXF架构</h2><p>• Bus<br>• Frontend<br>• Messaging and Interceptors<br>• Service Model<br>• Data bindings<br>• Protocol bindings<br>• Transport</p><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
       
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Activiti 实战笔记</title>
    <link href="houzw.github.io.git/2017/04/05/Activiti-%E5%AE%9E%E6%88%98%E7%AC%94%E8%AE%B0/"/>
    <id>houzw.github.io.git/2017/04/05/Activiti-实战笔记/</id>
    <published>2017-04-05T00:28:12.000Z</published>
    <updated>2017-04-05T08:39:58.791Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Sun Mar 18 2018 11:22:28 GMT+0800 (中国标准时间) --><blockquote><p>《Activiti 实战》 闰洪磊著．北京：机械工业出版社， 2014</p></blockquote><h1 id="认识Activiti"><a href="#认识Activiti" class="headerlink" title="认识Activiti"></a>认识Activiti</h1><p>业务流程由多个环节串联起来并且每个环节被赋予任务，而每个任务又可以分为多个活动。</p><h2 id="工作流基础"><a href="#工作流基础" class="headerlink" title="工作流基础"></a>工作流基础</h2><p>BPM 是Business Process Management 的缩写，中文含义是<strong>业务流程管理</strong>，是一套达成企业各种业务环节整合的全面管理模式。BPM 是为了实现一定的经营目的而执行的一系列逻辑相关的活动的集合。</p><p>BPM 包含两个方面的意思：<strong>管理规范</strong>和<strong>软件工程</strong>。</p><p><strong>抽象业务流程</strong>（ Abstract Business Processes ），包含更高级别有价值的信息而不包括不必要的细节。</p><h3 id="工作流生命周期"><a href="#工作流生命周期" class="headerlink" title="工作流生命周期"></a>工作流生命周期</h3><ol><li><strong>定义</strong>： 工作流生命周期总是从流程定义开始。此阶段的任务主要是<strong>收集业务需求并转化为流程定义</strong>。一般由业务需求人员进行，然后交由开发人员加工转化为计算机可以识别的流程定义。</li><li><strong>发布</strong>：由开发人员打包各种资源，然后在系统管理（平台）中<strong>发布流程定义</strong>。在具体的流程引擎中包括流程定义文件( bpmn20.xml 结尾） 、自定义表单、任务监昕类。</li><li><strong>执行</strong>：具体的流程引擎按照事先定义的流程处理路线以<strong>任务驱动</strong>的方式执行业务流程。</li><li><strong>监控</strong>：此阶段是依赖执行阶段。业务人员在办理任务的同时收集每个任务(Task) 的结果，然后根据结果做出相应处理.</li><li><strong>优化</strong>：根据整个流程的运行过程结果分析问题的根源，然后在此基础上进一步改进，并再次开始一个新的周期。</li></ol><h3 id="BPMN"><a href="#BPMN" class="headerlink" title="BPMN"></a>BPMN</h3><p>Business Process Modeling Notation ，简称BPMN ，业务流程建模标注</p><p>BPMN 定义了<strong>业务流程图</strong>，其基于流程图技术，同时对创建业务流程操作的图形化模型进行了裁减。业务流程的模型就是图形化对象的网图， 包括<strong>活动</strong>（也可以说工作）和定义操作顺序的<strong>流控制</strong>。</p><p>BPMN 2.0 规范重点聚焦在<strong>如何执行语义</strong>和一个被业界认可的<strong>通用交换格式</strong>。</p><p><strong>基于BPMN 2.0 的流程建模不仅在流程设计器上可以通用，还可以在任何符合BPMN 2 .0 规范的流程引擎上执行</strong>。</p><h3 id="引擎Service-接口"><a href="#引擎Service-接口" class="headerlink" title="引擎Service 接口"></a>引擎Service 接口</h3><p>Activiti 引擎提供了七大Service 接口， 均通过<strong>ProcessEngine</strong> 获取,并且支持链式API 编程风格:</p><table><thead><tr><th>Service 接口</th><th>作 用</th></tr></thead><tbody><tr><td>RepositoryService</td><td>用于管理流程仓库，例如，<strong>部署、删除、读取</strong>流程资源</td></tr><tr><td>IdentifyService</td><td>可以管理和查询<strong>用户、组</strong>之间的关系</td></tr><tr><td>RuntimeService</td><td>可以处理所有正在<strong>运行状态</strong>的流程实例、任务等</td></tr><tr><td>TaskService</td><td>用于<strong>管理、查询任务</strong>，例如，签收、办理、指派等</td></tr><tr><td>FormService</td><td>用于读取和流程、任务相关的<strong>表单</strong>数据</td></tr><tr><td>HistoryService</td><td>可以查询所有<strong>历史数据</strong>，例如，流程实例、任务、活动、变</td></tr><tr><td>ManagementService</td><td>和具体业务无关，主要是可以查询引擎配置、数据库、作业等</td></tr></tbody></table><h2 id="Activiti-与BPMN-2-0-规范"><a href="#Activiti-与BPMN-2-0-规范" class="headerlink" title="Activiti 与BPMN 2.0 规范"></a>Activiti 与BPMN 2.0 规范</h2><h3 id="启动事件与结束事件"><a href="#启动事件与结束事件" class="headerlink" title="启动事件与结束事件"></a>启动事件与结束事件</h3><ul><li><strong>开始事件</strong>均以<strong>细线圆形</strong>为基础。</li><li><strong>结束事件</strong>均以<strong>粗线圆形</strong>为基础</li></ul><h4 id="启动事件"><a href="#启动事件" class="headerlink" title="启动事件"></a>启动事件</h4><p>每个流程总是以启动事件作为入口。</p><ul><li><strong>空</strong>启动事件</li><li><strong>定时</strong>启动事件</li><li><strong>异常</strong>启动事件</li></ul><p>启动事件都是“捕获型” 的，等待第三方触发后（观察者模式）才可以启动。在Activiti 中可以通过调用API 触发启动事件。</p><h5 id="空启动事件"><a href="#空启动事件" class="headerlink" title="空启动事件"></a>空启动事件</h5><p><code>&lt;startEvent id=&quot;startEvent&quot; name=&quot;Start event&quot;&gt;&lt;/startEvent&gt;</code></p><p>startEvent 表示一个启动事件，由于startEvent 标签中没有任何其他的元素定义， 所以称之为空启动事件.</p><p>Activiti扩展的空启动事件属性:</p><table><thead><tr><th>属性名</th><th>属性说明</th></tr></thead><tbody><tr><td>activiti:formKey</td><td>可以用来指定空启动事件关联的表单文件。</td></tr><tr><td>activiti:initiator</td><td>可以用来记录启动流程的人的ID （ 也可以是用户的名称），启动流程之后此属性指定的变量就会自动设置当前人的名称</td></tr></tbody></table><p>启动事件可以配置表单：外置表单和动态表单。</p><ul><li><p>外置表单： 表单内容存放在一个<strong>单独的“ . form ”文件</strong>中，可以是任何文本字符，一般用HTML 书写，并且可以使用UEL占位符以达到动态填充的目的。启动事件中的<code>activiti:formKey</code> 属性用来指定使用哪个表单文件。</p></li><li><p>动态表单：此类表单是<strong>在流程定义文件中设置表单中元素集合</strong>，包含各种输入框、下拉框等。对应的XML 标示如下：</p><p><code>&lt;activiti:formProperty id＝ &quot;name&quot; name＝ &quot;Name&quot; type＝ &quot;string&quot; &gt;&lt;/activiti:formProperty&gt;</code></p><p><code>activiti:formProperty</code> 可以有多个.</p></li></ul><h5 id="定时启动事件"><a href="#定时启动事件" class="headerlink" title="定时启动事件"></a>定时启动事件</h5><p>可用于<strong>一次性定时启动、特定时间间隔后启动</strong>，用于定期循环流程或一次性流程. 在BPMN 2.0 规范中用一个形象的<strong>钟表图形</strong>表示.</p><figure class="highlight xml"><table><tr><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">startEvent</span> <span class="attr">id</span>=<span class="string">"timerStartEvent"</span> <span class="attr">name</span>=<span class="string">"Timerstart event for report process"</span> &gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">timerEventDefinition</span>&gt;</span> </div><div class="line">        <span class="tag">&lt;<span class="name">timeCycle</span>&gt;</span>R1/2012-02-01T00:00/PM1M<span class="tag">&lt;/<span class="name">timeCycle</span>&gt;</span> </div><div class="line">    <span class="tag">&lt;/<span class="name">timerEventDefinition</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">startEvent</span>&gt;</span></div></pre></td></tr></table></figure><p>可以通过多种方式设置定时事件:</p><ul><li>timeDate: 一次性定时启动，具体到一个日期，用ISO 8601 格式</li><li>timeDuration: 设置多长时间之后启动流程</li><li>timeCycle：周期性启动任务，用来设定循环的时间间隔，表示多长时间执行一次循环。ISO 8601</li></ul><h5 id="异常启动事件"><a href="#异常启动事件" class="headerlink" title="异常启动事件"></a>异常启动事件</h5><p>可触发一个异常子流程，但是不能通过API方式启动，它总是在另外一个流程抛出异常结束事件的时候被触发。</p><p>异常启动事件是“捕获型“，而异常结束事件是“抛出型”：异常结束事件对应throw ，而异常启动事件是catch 。在BPMN 2.0 规范中catch 需要两者的错误信息匹配才能决定是否触发异常启动事件。</p><p>异常启动事件的图形化表示是在空启动事件基础上嵌套了一个雷电符号。异常启动事件必须嵌套在一个事件子流程（EventSubProcess）中。</p><figure class="highlight xml"><table><tr><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">subProcess</span> <span class="attr">id</span>=<span class="string">"eventsubprocess1"</span> <span class="attr">name</span>=<span class="string">"Event sub Process"</span> <span class="attr">triggeredByEvent</span>=<span class="string">"true"</span>&gt;</span> </div><div class="line">  <span class="tag">&lt;<span class="name">startEvent</span> <span class="attr">id</span>=<span class="string">"errorstartevent1"</span> <span class="attr">name</span>=<span class="string">"Error start"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">errorEventDefinition</span> <span class="attr">errorRef</span>=<span class="string">"AIAOO1"</span> &gt;</span><span class="tag">&lt;/<span class="name">errorEventDefinition</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">startEvent</span>&gt;</span></div><div class="line">...</div><div class="line"><span class="tag">&lt;/<span class="name">subProcess</span>&gt;</span></div></pre></td></tr></table></figure><blockquote><p>BPMN 2 . 0 中的异常仅仅描述异常定义及处理方式。</p></blockquote><h5 id="消息启动事件"><a href="#消息启动事件" class="headerlink" title="消息启动事件"></a>消息启动事件</h5><p>可通过一个消息<strong>名称</strong>触发，从而启动一个<strong>流程实例</strong>；还可以结合<strong>消息抛出事件</strong>一起使用，由流程自动根据消息的名称启动对应的流程。</p><p>借助这个功能在实际应用中可以<strong>为不同的业务处理结果启动不同的流程</strong>。</p><p>消息启动事件的图形化表示是在空启动事件的基础上嵌入一个空心的信封图标。</p><figure class="highlight xml"><table><tr><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">message</span> <span class="attr">id</span>=<span class="string">"reSendFile"</span> <span class="attr">name</span>＝"重新发送文件" /&gt;</span></div><div class="line">...</div><div class="line"><span class="tag">&lt;<span class="name">startEvent</span> <span class="attr">id</span>=<span class="string">"messagestart"</span> &gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">messageEventDefinition</span> <span class="attr">messageRef</span>=<span class="string">"reSendFile"</span> /&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">startEvent</span>&gt;</span></div></pre></td></tr></table></figure><p>可通过Activiti 提供的API 触发消息启动事件，如<code>runtimeService.tartProcessInstanceByMessage(&quot;重新发送文件&quot;)</code></p><p>或以消息启动事件为入口，使用runtimeService的<code>startProcesslnstanceByKey</code> 或<code>startProcessInstanceByld</code> 方法</p><h3 id="结束事件"><a href="#结束事件" class="headerlink" title="结束事件"></a>结束事件</h3><p>在定义流程时也允许没有结束事件（但是开始事件不可缺少）。结束事件在BPMN 2.0 规范中用一个线条加粗的圆形表示。结束事件表示流程（包含子流程）的结束。</p><p>结束事件总是抛出型的，当流程执行到结束事件时会抛出一个执行结果。</p><ul><li><p><strong>空</strong>结束事件：空结束事件不处理抛出结果，用于正常结束流程</p></li><li><p><strong>异常</strong>结束事件：有抛出结果。它定义了需要抛出的错误代码，如果找到了异常开始事件定义的异常代码，则会<strong>触发异常开始事件</strong>，否则按照空结束事件规则处理。异常结束事件的<strong>错误代码不能为空</strong>。在空结束事件的基础上添加了一个<strong>雷电</strong>符号</p><figure class="highlight xml"><table><tr><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">endEvent</span> <span class="attr">id</span>=<span class="string">"endevent1"</span> <span class="attr">name</span>=<span class="string">"ErrorEnd"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">errorEventDefinition</span> <span class="attr">errorRef</span>=<span class="string">"AIA-001"</span>&gt;</span><span class="tag">&lt;/<span class="name">errorEventDefinition</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">endEvent</span>&gt;</span></div></pre></td></tr></table></figure></li><li><p><strong>取消</strong>结束事件: 可取消一个事务子流程的执行， 同时也<strong>只能在子流程中使用</strong>. 还可以和取消边界事件 配合使用针对取消操作做后续处理。图形表示是在空结束事件基础上嵌入一个“ X ”图形.</p><figure class="highlight xml"><table><tr><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">endEvent</span> <span class="attr">id</span>=<span class="string">"myCancelEndEvent"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">cancelEventDefinition</span>/&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">endEvent</span>&gt;</span></div></pre></td></tr></table></figure></li><li><p>终止结束事件: 终止结束事件结束的是整个流程实例。在空结束事件的基础上添加了一个实心的圆点.</p><figure class="highlight xml"><table><tr><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">endEvent</span> <span class="attr">id</span>=<span class="string">"terminateendevent1"</span> <span class="attr">name</span>＝"<span class="attr">TerminateEndEvent</span>"&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">terminateEventDefinition</span>&gt;</span><span class="tag">&lt;/<span class="name">terminateEventDefinition</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">endEvent</span>&gt;</span></div></pre></td></tr></table></figure></li></ul><h2 id="顺序流"><a href="#顺序流" class="headerlink" title="顺序流"></a>顺序流</h2><p>顺序流是两个模型之间的连接者。如果一个元素在流程执行期间被访问， 流程会沿着该元素所有输出顺序流继续执行。这意味着BPMN 2.0 默认行为是并行的：多个输出顺序流会创建多条独立、并行的执行路径。</p><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
       
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Vuex 学习</title>
    <link href="houzw.github.io.git/2017/03/31/Vuex-%E5%AD%A6%E4%B9%A0/"/>
    <id>houzw.github.io.git/2017/03/31/Vuex-学习/</id>
    <published>2017-03-31T00:37:16.000Z</published>
    <updated>2017-04-05T15:00:28.114Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Sun Mar 18 2018 11:22:28 GMT+0800 (中国标准时间) --><h1 id="Vuex-Vue的状态管理模式"><a href="#Vuex-Vue的状态管理模式" class="headerlink" title="Vuex : Vue的状态管理模式"></a>Vuex : Vue的状态管理模式</h1><blockquote><p>摘自 <a href="https://vuex.vuejs.org/zh-cn/" target="_blank" rel="external">https://vuex.vuejs.org/zh-cn/</a></p></blockquote><h2 id="State"><a href="#State" class="headerlink" title="State"></a>State</h2><p>Vuex 使用 <strong>单一状态树</strong> :用一个对象包含全部的<strong>应用层级</strong>状态。它作为一个『唯一数据源(<a href="https://en.wikipedia.org/wiki/Single_source_of_truth" target="_blank" rel="external">SSOT</a>)』而存在。这意味着，每个应用将<strong>仅仅包含一个 store 实例</strong>。</p><h3 id="在-Vue-组件中获得-Vuex-状态"><a href="#在-Vue-组件中获得-Vuex-状态" class="headerlink" title="在 Vue 组件中获得 Vuex 状态"></a>在 Vue 组件中获得 Vuex 状态</h3><p>在<a href="http://cn.vuejs.org/guide/computed.html" target="_blank" rel="external">计算属性</a>中返回某个状态:</p><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="comment">//Counter 组件</span></div><div class="line">computed: &#123;</div><div class="line">    count () &#123;</div><div class="line">      <span class="keyword">return</span> store.state.count  <span class="comment">//依赖全局状态单例 store</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>Vuex 通过 <code>store</code> 选项将状态从<strong>根组件</strong>『注入』到每一个子组件中</p><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line">Vue.use(Vuex); <span class="comment">//必需调用</span></div><div class="line"><span class="keyword">const</span> app = <span class="keyword">new</span> Vue(&#123;</div><div class="line">  <span class="attr">el</span>: <span class="string">'#app'</span>,</div><div class="line">  <span class="comment">// 把 store 对象提供给 “store” 选项，这可以把 store 的实例注入所有的子组件</span></div><div class="line">  store,</div><div class="line">  <span class="attr">components</span>: &#123; Counter &#125;,</div><div class="line"> <span class="comment">// ...</span></div></pre></td></tr></table></figure><p>在子组件 Counter 中</p><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="keyword">const</span> Counter = &#123;</div><div class="line">  <span class="comment">//...</span></div><div class="line">  computed: &#123;</div><div class="line">    count () &#123;</div><div class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.$store.state.count <span class="comment">// 子组件能通过 this.$store 访问到</span></div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><h3 id="mapState-辅助函数"><a href="#mapState-辅助函数" class="headerlink" title="mapState 辅助函数"></a><code>mapState</code> 辅助函数</h3><p>当一个组件需要获取多个状态时候，将这些状态都声明为计算属性会有些重复和冗余。可使用 <code>mapState</code> 辅助函数帮助生成计算属性：</p><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="comment">// 在单独构建的版本中辅助函数为 Vuex.mapState</span></div><div class="line"><span class="keyword">import</span> &#123; mapState &#125; <span class="keyword">from</span> <span class="string">'vuex'</span></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">computed: mapState(&#123;</div><div class="line">    <span class="attr">count</span>: <span class="function"><span class="params">state</span> =&gt;</span> state.count,</div><div class="line">    <span class="comment">// 传字符串参数 'count' 等同于 `state =&gt; state.count`</span></div><div class="line">    countAlias: <span class="string">'count'</span>,</div><div class="line">    <span class="comment">// 为了能够使用 `this` 获取局部状态，必须使用常规函数</span></div><div class="line">    countPlusLocalState (state) &#123;</div><div class="line">      <span class="keyword">return</span> state.count + <span class="keyword">this</span>.localCount</div><div class="line">    &#125;</div><div class="line">  &#125;)</div><div class="line">  <span class="comment">//...</span></div><div class="line">&#125;</div></pre></td></tr></table></figure><p>当映射的计算属性的名称与 state 的子节点<strong>名称相同</strong>时，我们也可以给 <code>mapState</code> 传一个<strong>字符串数组</strong>。</p><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line">computed: mapState([</div><div class="line">  <span class="string">'count'</span> <span class="comment">// 映射 this.count 为 store.state.count</span></div><div class="line">])</div></pre></td></tr></table></figure><h3 id="对象展开运算符"><a href="#对象展开运算符" class="headerlink" title="对象展开运算符"></a>对象展开运算符</h3><p><code>mapState</code> 函数返回的是一个<strong>对象</strong>。我们如何将它与局部计算属性混合使用呢？使用<a href="https://github.com/sebmarkbage/ecmascript-rest-spread" target="_blank" rel="external">对象展开运算符</a>，可以极大地简化写法：</p><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line">computed: &#123;</div><div class="line">  localComputed () &#123; <span class="comment">/* ... */</span> &#125;,</div><div class="line">  <span class="comment">// 使用对象展开运算符将此对象混入到外部对象中</span></div><div class="line">  ...mapState(&#123;</div><div class="line">    <span class="comment">// ...</span></div><div class="line">  &#125;)</div><div class="line">&#125;</div></pre></td></tr></table></figure><h2 id="Getters"><a href="#Getters" class="headerlink" title="Getters"></a>Getters</h2><p>Vuex 允许在 store 中定义『getters』（可认为是 <strong>store 的计算属性</strong>），从而可以派生出新的状态（通过filter等等）。</p><p>Getters 接受 state 作为其第一个参数：</p><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> Vuex.Store(&#123;</div><div class="line">  <span class="attr">state</span>: &#123;</div><div class="line">    <span class="attr">todos</span>: [</div><div class="line">      &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">text</span>: <span class="string">'...'</span>, <span class="attr">done</span>: <span class="literal">true</span> &#125;,</div><div class="line">      &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">text</span>: <span class="string">'...'</span>, <span class="attr">done</span>: <span class="literal">false</span> &#125;</div><div class="line">    ]</div><div class="line">  &#125;,</div><div class="line">  <span class="attr">getters</span>: &#123;</div><div class="line">    <span class="attr">doneTodos</span>: <span class="function"><span class="params">state</span> =&gt;</span> &#123;</div><div class="line">      <span class="keyword">return</span> state.todos.filter(<span class="function"><span class="params">todo</span> =&gt;</span> todo.done)</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure><p>Getters 会暴露为 <code>store.getters</code> 对象：</p><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line">store.getters.doneTodos <span class="comment">// -&gt; [&#123; id: 1, text: '...', done: true &#125;]</span></div></pre></td></tr></table></figure><p>Getters 也可以接受其他 getters 作为第二个参数.</p><p>可在任何组件中使用它：</p><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line">computed: &#123;</div><div class="line">  doneTodos () &#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.$store.getters.doneTodos</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><h3 id="mapGetters-辅助函数"><a href="#mapGetters-辅助函数" class="headerlink" title="mapGetters 辅助函数"></a><code>mapGetters</code> 辅助函数</h3><p><code>mapGetters</code> 辅助函数仅仅是将 store 中的 getters 映射到局部计算属性：</p><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; mapGetters &#125; <span class="keyword">from</span> <span class="string">'vuex'</span></div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">  computed: &#123;</div><div class="line">  <span class="comment">// 使用对象展开运算符将 getters 混入 computed 对象中</span></div><div class="line">    ...mapGetters([</div><div class="line">      <span class="string">'doneTodosCount'</span>,</div><div class="line">      <span class="string">'anotherGetter'</span>,</div><div class="line">      <span class="comment">// ...</span></div><div class="line">    ])</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>如果想将一个 getter 属性<strong>另取一个名字</strong>，使用对象形式：</p><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line">mapGetters(&#123;</div><div class="line">  <span class="comment">// 映射 this.doneCount 为 store.getters.doneTodosCount</span></div><div class="line">  doneCount: <span class="string">'doneTodosCount'</span></div><div class="line">&#125;)</div></pre></td></tr></table></figure><h1 id="Mutations"><a href="#Mutations" class="headerlink" title="Mutations"></a>Mutations</h1><p>更改 Vuex 的 store 中的状态的<strong>唯一方法</strong>是<strong>提交 mutation</strong>。</p><p>mutations 非常类似于<strong>事件</strong>：每个 mutation 都有一个字符串的 <strong>事件类型 (type)</strong> 和 一个 <strong>回调函数 (handler)</strong>。这个回调函数就是我们<strong>实际进行状态更改的地方</strong>，并且它会接受 <strong>state 作为第一个参数</strong>：</p><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> Vuex.Store(&#123;</div><div class="line">  <span class="attr">state</span>: &#123;</div><div class="line">    <span class="attr">count</span>: <span class="number">1</span></div><div class="line">  &#125;,</div><div class="line">  <span class="attr">mutations</span>: &#123;</div><div class="line">    increment (state) &#123;</div><div class="line">      <span class="comment">// 变更状态</span></div><div class="line">      state.count++</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure><p><strong>不能直接调用一个 mutation handler</strong>。要唤醒一个 mutation handler，需<strong>以 store.commit 方法调用相应的 type </strong>：</p><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line">store.commit(<span class="string">'increment'</span>)</div></pre></td></tr></table></figure><h3 id="提交载荷（Payload，额外参数）"><a href="#提交载荷（Payload，额外参数）" class="headerlink" title="提交载荷（Payload，额外参数）"></a>提交载荷（Payload，额外参数）</h3><p>可以向 <code>store.commit</code> 传入额外的参数，即 mutation 的 <strong>载荷（payload）</strong>：</p><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="comment">// ...</span></div><div class="line">mutations: &#123;</div><div class="line">  increment (state, n) &#123;</div><div class="line">    state.count += n</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">store.commit(<span class="string">'increment'</span>, <span class="number">10</span>)</div></pre></td></tr></table></figure><p>在大多数情况下，载荷应该是一个<strong>对象</strong>.</p><h3 id="对象风格的提交方式"><a href="#对象风格的提交方式" class="headerlink" title="对象风格的提交方式"></a>对象风格的提交方式</h3><p>直接使用包含 <code>type</code> 属性的对象：</p><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line">store.commit(&#123;</div><div class="line">  <span class="attr">type</span>: <span class="string">'increment'</span>,</div><div class="line">  <span class="attr">amount</span>: <span class="number">10</span></div><div class="line">&#125;)</div></pre></td></tr></table></figure><p>此时，整个对象都作为载荷传给 mutation 函数，因此 handler 保持不变：</p><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line">mutations: &#123;</div><div class="line">  increment (state, payload) &#123;</div><div class="line">    state.count += payload.amount</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><h3 id="Mutations-需遵守-Vue-的响应规则"><a href="#Mutations-需遵守-Vue-的响应规则" class="headerlink" title="Mutations 需遵守 Vue 的响应规则"></a>Mutations 需遵守 Vue 的响应规则</h3><p>Vuex 中的 mutation 也需要与使用 Vue 一样遵守一些注意事项：</p><ol><li><p>最好提前在 store 中初始化好所有所需属性。</p></li><li><p>当需要在对象上添加<strong>新属性</strong>时，你应该</p><ul><li><p>使用 <code>Vue.set(obj, &#39;newProp&#39;, 123)</code>, 或者 -</p></li><li><p>以<strong>新对象替换老对象</strong>。例如，利用 stage-3 的<a href="https://github.com/sebmarkbage/ecmascript-rest-spread" target="_blank" rel="external">对象展开运算符</a>我们可以这样写：</p><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line">state.obj = &#123; ...state.obj, <span class="attr">newProp</span>: <span class="number">123</span> &#125;</div></pre></td></tr></table></figure></li></ul></li></ol><h3 id="使用常量替代-Mutation-事件类型"><a href="#使用常量替代-Mutation-事件类型" class="headerlink" title="使用常量替代 Mutation 事件类型"></a>使用常量替代 Mutation 事件类型</h3><p>使用常量替代 mutation 事件类型可以使 linter 之类的工具发挥作用，同时把这些常量放在单独的文件中可让代码合作者对整个 app 包含的 mutation 一目了然：</p><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="comment">// mutation-types.js</span></div><div class="line"><span class="keyword">export</span> <span class="keyword">const</span> SOME_MUTATION = <span class="string">'SOME_MUTATION'</span></div><div class="line"></div><div class="line"><span class="comment">// store.js</span></div><div class="line"><span class="keyword">import</span> Vuex <span class="keyword">from</span> <span class="string">'vuex'</span></div><div class="line"><span class="keyword">import</span> &#123; SOME_MUTATION &#125; <span class="keyword">from</span> <span class="string">'./mutation-types'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> Vuex.Store(&#123;</div><div class="line">  <span class="attr">state</span>: &#123; ... &#125;,</div><div class="line">  <span class="attr">mutations</span>: &#123;</div><div class="line">    <span class="comment">// 使用 ES6 风格的计算属性命名功能来使用一个常量作为函数名</span></div><div class="line">    [SOME_MUTATION] (state) &#123;</div><div class="line">      <span class="comment">// mutate state</span></div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure><h3 id="mutation-必须是同步函数"><a href="#mutation-必须是同步函数" class="headerlink" title="mutation 必须是同步函数"></a>mutation 必须是同步函数</h3><h3 id="在组件中提交-Mutations"><a href="#在组件中提交-Mutations" class="headerlink" title="在组件中提交 Mutations"></a>在组件中提交 Mutations</h3><p>可以在组件中使用 <code>this.$store.commit(&#39;xxx&#39;)</code> 提交 mutation，或者使用 <strong><code>mapMutations</code></strong> 辅助函数将组件中的 methods 映射为 <code>store.commit</code> 调用（需要在根节点注入 <code>store</code>）。</p><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; mapMutations &#125; <span class="keyword">from</span> <span class="string">'vuex'</span></div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">  methods: &#123;</div><div class="line">    <span class="comment">//字符串数组形式</span></div><div class="line">    ...mapMutations([</div><div class="line">      <span class="string">'increment'</span> <span class="comment">// 映射 this.increment() 为 this.$store.commit('increment')</span></div><div class="line">    ]),</div><div class="line">    <span class="comment">//对象形式</span></div><div class="line">    ...mapMutations(&#123;</div><div class="line">      <span class="attr">add</span>: <span class="string">'increment'</span> <span class="comment">// 映射 this.add() 为 this.$store.commit('increment')</span></div><div class="line">    &#125;)</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><h1 id="Actions"><a href="#Actions" class="headerlink" title="Actions"></a>Actions</h1><p>Action 类似于 mutation，不同在于：</p><ul><li>Action <strong>提交的是 mutation</strong>，而不是直接变更状态。</li><li>Action <strong>可包含任意异步操作</strong>。</li></ul><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> Vuex.Store(&#123;</div><div class="line">  <span class="attr">state</span>: &#123;</div><div class="line">    <span class="attr">count</span>: <span class="number">0</span></div><div class="line">  &#125;,</div><div class="line">  <span class="attr">mutations</span>: &#123;</div><div class="line">    increment (state) &#123;</div><div class="line">      state.count++</div><div class="line">    &#125;</div><div class="line">  &#125;,</div><div class="line">  <span class="attr">actions</span>: &#123;</div><div class="line">    increment (context) &#123;</div><div class="line">      context.commit(<span class="string">'increment'</span>) <span class="comment">//提交 mutation increment</span></div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure><p>Action 函数接受一个<strong>与 store 实例具有相同方法和属性</strong>的 context 对象（ 不是 store 实例本身）。</p><p>可以调用 <code>context.commit</code> 提交一个 mutation，或者通过 <code>context.state</code> 和 <code>context.getters</code> 来获取 state 和 getters。</p><p>用 ES2015 的 <a href="https://github.com/lukehoban/es6features#destructuring" target="_blank" rel="external">参数解构</a> 来简化代码：</p><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line">actions: &#123;</div><div class="line">  increment (&#123; commit &#125;) &#123;</div><div class="line">    commit(<span class="string">'increment'</span>)</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><h3 id="分发-Action"><a href="#分发-Action" class="headerlink" title="分发 Action"></a>分发 Action</h3><p>Action 通过 <code>store.dispatch</code> 方法触发：</p><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line">store.dispatch(<span class="string">'increment'</span>)</div></pre></td></tr></table></figure><p><strong>mutation 必须同步执行</strong>, 而在 action 内部可以执行<strong>异步</strong>操作。</p><p>Actions 支持同样的<strong>载荷</strong>方式和<strong>对象</strong>方式进行分发。</p><h3 id="在组件中分发Action"><a href="#在组件中分发Action" class="headerlink" title="在组件中分发Action"></a>在组件中分发Action</h3><p>可以在 组件中使用 <code>this.$store.dispatch(&#39;xxx&#39;)</code> 分发 action，或者使用 <code>mapActions</code> 辅助函数<strong>将组件的 methods 映射为 <code>store.dispatch</code> 调用</strong>（需要先在根节点注入 <code>store</code>）：</p><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; mapActions &#125; <span class="keyword">from</span> <span class="string">'vuex'</span></div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">  methods: &#123;</div><div class="line">    ...mapActions([</div><div class="line">      <span class="string">'increment'</span> <span class="comment">// 映射 this.increment() 为 this.$store.dispatch('increment')</span></div><div class="line">    ]),</div><div class="line">    ...mapActions(&#123;</div><div class="line">      <span class="attr">add</span>: <span class="string">'increment'</span> <span class="comment">// 映射 this.add() 为 this.$store.dispatch('increment')</span></div><div class="line">    &#125;)</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><h1 id="Modules"><a href="#Modules" class="headerlink" title="Modules"></a>Modules</h1><p>当应用变得很大时，store 对象会变得臃肿不堪。为此，Vuex 允许将 store 分割到<strong>模块（module）</strong>。每个模块拥有自己的 <strong>state、mutation、action、getters</strong>、甚至是<strong>嵌套子模块</strong>——从上至下进行类似的分割：</p><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="keyword">const</span> moduleA = &#123;</div><div class="line">  <span class="attr">state</span>: &#123; ... &#125;,  <span class="comment">//组件级别的状态</span></div><div class="line">  mutations: &#123; ... &#125;,</div><div class="line">  <span class="attr">actions</span>: &#123; ... &#125;,</div><div class="line">  <span class="attr">getters</span>: &#123; ... &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">const</span> moduleB = &#123;</div><div class="line">  <span class="attr">state</span>: &#123; ... &#125;,</div><div class="line">  <span class="attr">mutations</span>: &#123; ... &#125;,</div><div class="line">  <span class="attr">actions</span>: &#123; ... &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> Vuex.Store(&#123;</div><div class="line">  <span class="attr">modules</span>: &#123;</div><div class="line">    <span class="attr">a</span>: moduleA,</div><div class="line">    <span class="attr">b</span>: moduleB</div><div class="line">  &#125;,</div><div class="line">  <span class="attr">state</span>: &#123; <span class="comment">/*根级别的状态*/</span> &#125;</div><div class="line">&#125;)</div><div class="line"></div><div class="line">store.state.a <span class="comment">// -&gt; moduleA 的状态</span></div><div class="line">store.state.b <span class="comment">// -&gt; moduleB 的状态</span></div></pre></td></tr></table></figure><h3 id="模块的局部状态"><a href="#模块的局部状态" class="headerlink" title="模块的局部状态"></a>模块的局部状态</h3><p>对于模块内部的 mutation 和 getter，接收的第一个参数是<strong>模块的局部状态</strong>。对于getter，根节点状态会作为<strong>第三个参数</strong>。</p><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="keyword">const</span> moduleA = &#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">  getters: &#123;</div><div class="line">    sumWithRootCount (state, getters, rootState) &#123;</div><div class="line">      <span class="keyword">return</span> state.count + rootState.count</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>对于模块内部的 action，<code>context.state</code> 是局部状态，根节点的状态是 <code>context.rootState</code>.</p><h3 id="命名空间"><a href="#命名空间" class="headerlink" title="命名空间"></a>命名空间</h3><p>模块内部的 action、mutation和 getter 现在仍然注册在<strong>全局命名空间</strong>——这样保证了多个模块能够响应同一 mutation 或 action。即，在 Vuex 模块化中，state 是唯一会根据组合时模块的别名来添加层级的，后面的 getters、mutations 以及 actions 都是直接合并在 store 下。</p><p>可以通过添加前缀或后缀的方式隔离各模块，以避免名称冲突。</p><p><code>export const DONE_COUNT = &#39;todos/DONE_COUNT&#39;</code></p><h3 id="模块动态注册"><a href="#模块动态注册" class="headerlink" title="模块动态注册"></a>模块动态注册</h3><p>在 store 创建<strong>之后</strong>，你可以使用 <code>store.registerModule</code> 方法注册模块：</p><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line">store.registerModule(<span class="string">'myModule'</span>, &#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">&#125;)</div></pre></td></tr></table></figure><p>模块的状态将是 <code>store.state.myModule</code>。</p><p>也可以使用 <code>store.unregisterModule(moduleName)</code> 动态地卸载模块。</p><blockquote><p>不能使用此方法卸载静态模块（在创建 store 时声明的模块）。</p></blockquote><h2 id="表单处理"><a href="#表单处理" class="headerlink" title="表单处理"></a>表单处理</h2><p>当在严格模式中使用 Vuex 时，在属于 Vuex 的 state 上使用 <code>v-model</code> 会比较棘手：<code>&lt;input v-model=&quot;obj.message&quot;&gt;</code></p><p>假设这里的 <code>obj</code> 是在计算属性中返回的一个属于 Vuex store 的对象，在用户输入时，<code>v-model</code> 会试图直接修改<code>obj.message</code>。在严格模式中，由于这个修改不是在 mutation 函数中执行的, 会抛出一个错误。</p><p>用『Vuex 的思维』去解决这个问题的方法是：给 <code>&lt;input&gt;</code> 中绑定 value，然后侦听 <code>input</code> 或者 <code>change</code> 事件，在事件回调中调用 action:</p><p><code>&lt;input :value=&quot;message&quot; @input=&quot;updateMessage&quot;&gt;</code></p><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="comment">// ...</span></div><div class="line">computed: &#123;</div><div class="line">  ...mapState(&#123;</div><div class="line">    <span class="attr">message</span>: <span class="function"><span class="params">state</span> =&gt;</span> state.obj.message</div><div class="line">  &#125;)</div><div class="line">&#125;,</div><div class="line"><span class="attr">methods</span>: &#123;</div><div class="line">  updateMessage (e) &#123;</div><div class="line">    <span class="keyword">this</span>.$store.commit(<span class="string">'updateMessage'</span>, e.target.value)</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// ...</span></div><div class="line">mutations: &#123;</div><div class="line">  updateMessage (state, message) &#123;</div><div class="line">    state.obj.message = message</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><h3 id="双向绑定的计算属性"><a href="#双向绑定的计算属性" class="headerlink" title="双向绑定的计算属性"></a>双向绑定的计算属性</h3><p>另一个方法是使用带有 setter 的双向绑定计算属性：</p><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line">&lt;input v-model=<span class="string">"message"</span>&gt;</div><div class="line"><span class="comment">// ...</span></div><div class="line">computed: &#123;</div><div class="line">  <span class="attr">message</span>: &#123;</div><div class="line">    get () &#123;</div><div class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.$store.state.obj.message</div><div class="line">    &#125;,</div><div class="line">    set (value) &#123;</div><div class="line">      <span class="keyword">this</span>.$store.commit(<span class="string">'updateMessage'</span>, value)</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><hr><p>定义状态state，为了获得派生状态，定义getters；定义改变状态的方法mutations，然后定义actions来调用mutation，通过dispatch触发actions。</p><p><code>mapGetters</code> 将 store 中的 getters 映射到局部计算属性，<code>mapMutations</code> 将组件中的 methods 映射为 <code>store.commit</code> 调用，<code>mapActions</code> 将组件的 methods 映射为 <code>store.dispatch</code> 调用</p><hr><h2 id="目录结构"><a href="#目录结构" class="headerlink" title="目录结构"></a>目录结构</h2><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">|——— store</div><div class="line">4├── index.js          # 组装模块并导出 store 的地方</div><div class="line">4├── actions.js        # 根级别的 action</div><div class="line">4├── mutations.js      # 根级别的 mutation</div><div class="line">4├── mutation-types.js # 使用常量替代 mutation 事件类型</div><div class="line">4└── modules</div><div class="line">        ├── m1.js         # 模块,内部包含模块的state、action、getter、mutation</div><div class="line">        └── m2.js</div></pre></td></tr></table></figure><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      Vuex学习记录 
    
    </summary>
    
    
  </entry>
  
</feed>
